/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright © 2026 Oglama (https://oglama.com)
 * 
 * Licensed under the Oglama™ Source-Available License, Version 1.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     https://github.com/oglama/dos/blob/main/LICENSE.txt
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{9822:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rV});var r=n(37876),l=n(8628),i=n(7156),o=n(13383),s=n(74787),a=n(14232),c=n(81373),u=n(35268),d=n(38388),x=n(28888),p=n(38993);function h(){let e=(0,x._)(["\n0%   { transform: translateX(-","vw); }\n100% { transform: translateX(100vw); }"]);return h=function(){return e},e}function m(){let e=(0,x._)(["\n0%   { transform: translateX(0); }\n100% { transform: translateX(-","vw); }"]);return m=function(){return e},e}let f=e=>{let{width:t=25,duration:n=1200}=e;t=Number.isInteger(t)?t<0?1:t>100?100:t:25,n=Number.isInteger(n)?n<100?100:n>1e4?1e4:n:1200;let{onDisplayInfo:l}=(0,c.P)(),{settings:u}=(0,s.t)(),{i18n:x}=(0,i.B)(),[f,g]=(0,a.useState)(null),j=(0,a.useRef)(!1),v=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=l(async e=>{let{info:t}=e;j.current=t.passThru,t.onPassThru?o.o.info(t.passThru?x.t("Pass-through enabled"):x.t("Pass-through disabled"),{},!1):o.o.info(t.total>1?x.t("Display {{number}}/{{total}} ({{dimensions}})",{number:t.index+1,total:t.total,dimensions:"".concat(t.workArea.width,"x").concat(t.workArea.height)}):x.t("Main display ({{dimensions}})",{dimensions:"".concat(t.workArea.width,"x").concat(t.workArea.height)})),null!==v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{g("".concat(performance.now(),"-").concat(+!!t.passThru)),v.current=null},150)});return()=>{e()}},[]);let A=(0,p.i7)(h(),t),y=(0,p.i7)(m(),t+100);return u.passThruAnimation?(0,r.jsx)(d.A,{style:{left:j.current?60:30},sx:{position:"fixed",zIndex:3,top:0,pointerEvents:"none",userSelect:"none",width:"".concat(t,"vw"),height:"100vh",transition:"none",overflow:"hidden",maskImage:"linear-gradient(to right, transparent 0%, black 50%, black 50%, transparent 100%)",transform:"translateX(-".concat(t,"vw)"),animation:"".concat(A," ").concat(n,"ms linear forwards"),"&:before":{content:'""',position:"fixed",top:0,left:0,width:"".concat(t+100,"vw"),height:"100vh",pointerEvents:"none",userSelect:"none",transform:"translateX(0)",animation:"".concat(y," ").concat(n,"ms linear forwards"),background:"url(/img/".concat(j.current?"symbol-in":"symbol-out",".png) repeat 0 0 transparent"),backgroundAttachment:"fixed"}}},f):null};function g(e){if(!Array.isArray(e)||!e.length)return"";let t=e.reduce((e,t,n,r)=>{let[l,i]=t,[o,s]=r[(n+1)%r.length];return e.push(l,i,(l+o)/2,(i+s)/2),e},["M",...e[0],"Q"]);return t.push("Z"),t.join(" ")}function j(e){return Array.isArray(e)&&e.length?["M ".concat(e[0][0]," ").concat(e[0][1]),...e.slice(1).map(e=>{let[t,n]=e;return"L ".concat(t," ").concat(n)}),"Z"].join(" "):""}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,l=Math.min(e[0],t[0]),i=Math.max(e[0],t[0]),o=Math.min(e[1],t[1]),s=Math.max(e[1],t[1]);if((n=Math.min(Math.floor((i-l)/2),Math.floor((s-o)/2),n))<=0||r<2)return[[l,o],[i,o],[i,s],[l,s],[l,o]];let a=n,c=[];function u(e,t,n,l){let i=(l-n)/(r-1),o=[];for(let l=0;l<r;l++){let r=n+i*l;o.push([e+Math.cos(r)*a,t+Math.sin(r)*a])}return o}return c.push([l+a,o]),c.push([i-a,o]),c.push(...u(i-a,o+a,-Math.PI/2,0).slice(1)),c.push([i,s-a]),c.push(...u(i-a,s-a,0,Math.PI/2).slice(1)),c.push([l+a,s]),c.push(...u(l+a,s-a,Math.PI/2,Math.PI).slice(1)),c.push([l,o+a]),c.push(...u(l+a,o+a,Math.PI,1.5*Math.PI).slice(1)),c.push(c[0]),c.map(e=>[...e,0])}function A(e,t){let n=Math.min(e[0],t[0]),r=Math.max(e[0],t[0]),l=Math.min(e[1],t[1]);return{x:n,y:l,width:r-n,height:Math.max(e[1],t[1])-l}}var y=n(3362);let b={escape:"Escape",space:"Space"},w={shift:"Shift",ctrl:"Control",meta:"Meta"};var S=n(16291);let k=(0,u.Ay)("svg")(e=>{let{theme:t}=e;return{pointerEvents:"none",position:"absolute",touchAction:"none",userSelect:"none",height:"100%",width:"100%",zIndex:1,left:0,top:0}});function I(){var e;let{getTutorialStep:t,onTutorial:n,onDisplayInfo:l,getDeviceInfo:o}=(0,c.P)(),{i18n:s}=(0,i.B)(),u=(0,a.useRef)([]),[d,x]=(0,a.useState)(t()),[p,h]=(0,a.useState)(!1),m={1:s.t("Swipe to draw"),2:s.t("Hold ({{key}}) for eraser",{key:"Esc"}),3:s.t("Hold ({{key}}) for laser",{key:"Shift"}),4:s.t("Hold ({{key}}) for line",{key:"macos"===o().os?"⌘":"Ctrl"}),5:s.t("Hold ({{key}}) for box",{key:"macos"===o().os?"Shift ⌘":"Ctrl+Shift"}),6:s.t("Double-tap for text"),7:s.t("You are ready!")},f=p&&d<=7?s.t("{{key}} to return",{key:"".concat("macos"===o().os?"Shift ⌘ ":"Ctrl+Shift+","Backspace")}):null!=(e=m[d])?e:null;(0,a.useEffect)(()=>{x(t());let e=n(e=>{let{step:t}=e;return x(t)}),r=l(async e=>{let{info:t}=e;return h(t.passThru)});return()=>{e(),r()}},[]),(0,a.useEffect)(()=>{if("string"==typeof f)for(let e of(7===d&&(0,S.A)("toastSuccess"),u.current)){if("function"!=typeof(null==e?void 0:e.getComputedTextLength))continue;let t=e.getComputedTextLength();e.style.transition="none",e.style.strokeDasharray=t,e.style.strokeDashoffset=t,setTimeout(()=>{requestAnimationFrame(()=>{e.style.transition="stroke-dashoffset ".concat(7===d?8:5,"s linear"),e.style.strokeDashoffset=0})},100)}},[p,d]);let g=7===d?"160px":"80px";return"string"==typeof f?(0,r.jsx)(k,{children:[{strokeWidth:4,stroke:"#000"},{strokeWidth:3,stroke:"#fff"}].map((e,t)=>{let{stroke:n,strokeWidth:l}=e;return(0,r.jsx)("text",{ref:e=>u.current[t]=e,x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",style:{fontFamily:"Caveat",fontSize:g,strokeWidth:l,stroke:n,strokeLinecap:"round",fill:"transparent"},children:f},"".concat(d,"-").concat(p,"-").concat(t))})},"".concat(d,"-").concat(p)):null}var C=n(27996);let z=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{zIndex:4,display:"flex",position:"absolute",marginTop:"-22px",marginLeft:"-15px","& .drag":{position:"absolute",height:"40px",width:"40px",top:"50%",left:"-40px",marginTop:"-20px",display:"flex",transition:"opacity 100ms linear",justifyContent:"center",alignItems:"center",opacity:0},"&:hover .drag, & .drag:hover":{opacity:1},"& .content":{outline:"none",minWidth:45,"&:hover, &:focus":{outline:"2px dashed #fff"},padding:10,paddingLeft:15,paddingRight:15,borderRadius:10}}}),E=e=>{let{top:t,left:n,text:l=null,id:i=null,rolledOut:o=!1,autoFocus:u=!1}=e,{historyCreate:x,historyUpdate:p,historyDelete:h,canvasTextReset:m,canvasEnable:f,onDisplayInfo:g}=(0,c.P)(),{settings:j}=(0,s.t)(),[A,y]=(0,a.useState)({x:0,y:0}),[b,w]=(0,a.useState)(!1),S=(0,a.useRef)({mouseX:0,mouseY:0,x:0,y:0}),k=(0,a.useRef)(null),I=(0,a.useRef)(!1),E=(0,a.useRef)(null),T=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{u&&setTimeout(()=>{if(null===E.current)return;E.current.focus();let e=document.createRange(),t=window.getSelection();e.selectNodeContents(E.current),e.collapse(!1),t.removeAllRanges(),t.addRange(e)},250);let e=e=>{I.current&&y({x:S.current.x+e.clientX-S.current.mouseX,y:S.current.y+e.clientY-S.current.mouseY})},t=()=>{f(!0),I.current&&(I.current=!1,E.current.focus(),E.current.blur(),y({x:0,y:0}))};document.addEventListener("mousemove",e),document.addEventListener("mouseup",t);let n=g(async e=>{let{info:t}=e;w(t.passThru)});return()=>{n(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[]),(0,a.useEffect)(()=>{y({x:0,y:0})},[n,t]),(0,a.useEffect)(()=>{if(null!==i&&l){if(!T.current){T.current=!0;return}if(null!==E.current){let{x:e,y:t,width:n,height:r}=k.current.getBoundingClientRect();p(i,{points:v([e,t],[e+n,t+r],0)},!0)}}},[t,n,l,j.textFont,j.textSize]),(0,r.jsxs)(z,{ref:k,onMouseDown:e=>{e.target.closest(".drag")&&(f(!1),I.current=!0,S.current={mouseX:e.clientX,mouseY:e.clientY,x:A.x,y:A.y})},style:{top:t,left:n,opacity:o?.5:1,transform:"translate(".concat(A.x,"px, ").concat(A.y,"px)"),...b?{pointerEvents:"none"}:{}},children:[null===i||o?null:(0,r.jsx)(d.A,{className:"drag",children:(0,r.jsx)(C.A,{style:{fill:"#fff",filter:"drop-shadow(0 0 1px #000) drop-shadow(0 0 1px #000)"}})}),(0,r.jsx)(d.A,{tabIndex:0,className:"content",contentEditable:!0,suppressContentEditableWarning:!0,ref:E,role:"textbox","aria-multiline":"true","data-placeholder":"...",sx:{whiteSpace:"pre-wrap",textAlign:j.textAlignment,fontFamily:j.textFont},style:{...I.current?{outline:"none"}:{},color:o?"#000":j.textColor,fontSize:"".concat(j.textSize,"px"),lineHeight:"".concat(j.textSize,"px"),minHeight:"".concat(j.textSize+20,"px"),filter:o?null:"drop-shadow(0 0px 1px ".concat(j.textStrokeColor,") drop-shadow(0 0 1px ").concat(j.textStrokeColor,")")},onBlur:e=>{if(null===e.target)return;let r=e.target.innerText.trim().replace(/[\r\n]{2,}/g,"\n\n");e.target.innerText=r;let{x:l,y:o,width:s,height:a}=k.current.getBoundingClientRect(),c=v([l,o],[l+s,o+a],0),u={left:n+A.x,top:t+A.y,text:r,points:c};null===i?r&&x("text",u):r?p(i,u):h([i]),m()},onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain"),n=window.getSelection();if(!n.rangeCount)return;let r=n.getRangeAt(0);r.deleteContents(),r.insertNode(document.createTextNode(t)),r.collapse(!1),n.removeAllRanges(),n.addRange(r)},children:l})]},"".concat(t,"-").concat(n))},T=()=>{let{onHistory:e,onCanvasRollout:t,getTutorialStep:n,setTutorialStep:l}=(0,c.P)(),[i,o]=(0,a.useState)([]),[s,u]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let n=e(e=>{let{items:t}=e,n=[];for(let e of Object.keys(t))"text"===e.substring(0,e.indexOf("-"))&&n.push({...t[e],itemId:e});u(n)}),r=t(e=>{let{ids:t}=e;o(t)});return()=>{n(),r()}},[]),(0,a.useEffect)(()=>{s.length&&6===n()&&l(7)},[s]),(0,r.jsx)(r.Fragment,{children:s.map(e=>{let{itemId:t,top:n,left:l,text:o}=e;return(0,r.jsx)(E,{rolledOut:i.includes(t),id:t,top:n,left:l,text:o},t)})})},O=e=>{let{children:t}=e,{onCanvasDraw:n}=(0,c.P)(),[l,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=n(e=>{let{draw:t}=e;return i(t)});return()=>e()},[]),(0,r.jsx)(d.A,{style:{...l?{pointerEvents:"none"}:{}},children:t})},P=()=>{let{onCanvasText:e}=(0,c.P)(),[t,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t=e(n);return()=>t()},[]),null!==t?(0,r.jsx)(E,{top:t.y,left:t.x,text:t.text,autoFocus:!0}):null},R=e=>{let{refTool:t}=e,{onCanvasBox:n}=(0,c.P)(),{settings:l}=(0,s.t)(),[i,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=n(e=>{let{coords:n}=e;y.A.tools.SPOTLIGHT===t.current&&o(Array.isArray(n)&&2==n.length?A(n[0],n[1]):null)});return()=>e()},[]),null!==i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("mask",{id:"tool-spotlight-mask",children:[(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,r.jsx)("rect",{x:i.x,y:i.y,width:i.width,height:i.height,rx:l.spotlightRadius,ry:l.spotlightRadius,fill:"black"})]})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:l.spotlightColor,opacity:"0.5",mask:"url(#tool-spotlight-mask)"})]}):null};var N=n(24230);let L={data:{},get:(e,t)=>{let n="".concat(e,"-").concat(JSON.stringify(t));return"string"!=typeof L.data[n]&&(L.data[n]=g((0,N.$4)(e,t))),L.data[n]}},M=e=>{let{refTool:t}=e,{onHistory:n,canvasPointsReset:l,onCanvasRollout:i,onCanvasBox:o,getTutorialStep:u,setTutorialStep:d}=(0,c.P)(),{settings:x,getToolValue:p}=(0,s.t)(),[h,m]=(0,a.useState)(!0),[f,g]=(0,a.useState)(null),[A,b]=(0,a.useState)([]),[w,S]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=n(e=>{let{items:t}=e;l();let n=[],r=null;for(let e of Object.keys(t)){let l=e.substring(0,e.indexOf("-"));[y.A.tools.PEN,y.A.tools.LINE,y.A.tools.BOX].includes(l)&&n.push({...t[e],itemId:e,itemType:l}),y.A.tools.SPOTLIGHT===l&&(r={...t[e],itemId:e,itemType:l})}n.length||(L.data={}),S(n),g(r),7===u()&&d(8,!1)}),r=o(e=>{let{coords:n}=e;m(y.A.tools.SPOTLIGHT!==t.current||null===n)}),s=i(e=>{let{ids:t}=e;b(t)});return()=>{e(),r(),s()}},[]),(0,r.jsxs)(r.Fragment,{children:[h&&null!==f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("mask",{id:"spotlight-mask",children:[(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,r.jsx)("rect",{x:f.x,y:f.y,width:f.width,height:f.height,rx:x.spotlightRadius,ry:x.spotlightRadius,fill:"black"})]})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:A.includes(f.itemId)?"#000000":x.spotlightColor,opacity:A.includes(f.itemId)?.25:1,mask:"url(#spotlight-mask)"})]}):null,w.length?w.map(e=>{let{itemId:t,itemType:n,points:l,coords:i}=e;y.A.tools.BOX===n&&Array.isArray(i)&&(l=v(i[0],i[1],x.boxRadius));let o=(Array.isArray(l)?l:[]).length?L.get(l,{size:p(n,"size"),smoothing:p(n,"smoothing"),streamline:p(n,"streamline"),thinning:p(n,"thinning")}):"",s=y.A.tools.BOX===n&&(9!==x.boxFillColor.length||"00"!==x.boxFillColor.substring(7))?j(l):null,c=A.includes(t),u=c?"#000":p(n,"color"),d=c?.5:1;return o?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("path",{stroke:p(n,"stroke"),strokeWidth:2,strokeOpacity:+!c,strokeLinecap:"round",paintOrder:"stroke",fill:u,fillOpacity:d,d:o}),s?(0,r.jsx)("path",{fill:c?"#000":x.boxFillColor,fillOpacity:d,d:s}):null]},t):null}):null]})},B=()=>{let{settings:e,getToolValue:t}=(0,s.t)(),{onCanvasLaser:n}=(0,c.P)(),[l,i]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=n(e=>{let{items:t}=e,n=[];for(let e of Object.keys(t))n.push({itemId:e,points:t[e]});i(n)});return()=>{e()}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"userSpaceOnUse",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"10",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),l.length?l.map(n=>{let{itemId:l,points:i}=n,o=(Array.isArray(i)?i:[]).length?g((0,N.$4)(i,{size:t(y.A.tools.LASER,"size"),smoothing:t(y.A.tools.LASER,"smoothing"),streamline:t(y.A.tools.LASER,"streamline"),thinning:t(y.A.tools.LASER,"thinning")})):"",s=e.laserColor;return o?(0,r.jsx)("path",{filter:"url(#glow)",fill:s,fillOpacity:1,d:o},l):null}):null]})},D=e=>{let{refTool:t}=e,{settings:n,getToolValue:l}=(0,s.t)(),{onCanvasPoints:i,onCanvasBox:o}=(0,c.P)(),[u,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=i(e=>{let{points:t}=e;d(t)}),r=o(e=>{let{coords:r}=e;y.A.tools.BOX===t.current&&d(Array.isArray(r)&&2==r.length?v(r[0],r[1],n.boxRadius):[])});return()=>{e(),r()}},[n.boxRadius]);let x=y.A.tools.ERASER===t.current?"#000":l(t.current,"color"),p=y.A.tools.ERASER===t.current?.5:1,h=+(y.A.tools.ERASER!==t.current),m=u.length?g((0,N.$4)(u,{size:l(t.current,"size"),smoothing:l(t.current,"smoothing"),streamline:l(t.current,"streamline"),thinning:l(t.current,"thinning")})):"",f=y.A.tools.BOX===t.current&&(9!==n.boxFillColor.length||"00"!==n.boxFillColor.substring(7))?j(u):null;return(0,r.jsxs)(r.Fragment,{children:[u.length?(0,r.jsx)("path",{stroke:l(t.current,"stroke"),strokeWidth:2,strokeOpacity:h,strokeLinecap:"round",paintOrder:"stroke",fill:x,fillOpacity:p,d:m}):null,f?(0,r.jsx)("path",{fill:y.A.tools.ERASER===t.current?"#000":n.boxFillColor,fillOpacity:p,d:f}):null]})},F=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{boxShadow:t.shadows[3],justifyContent:"center",pointerEvents:"none",alignItems:"center",position:"absolute",userSelect:"none",overflow:"hidden",display:"none",width:"auto",zIndex:2}}),X=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{background:"url(/img/placeholder/stream.webp) repeat 0 0 transparent",transition:"opacity 400ms linear",backgroundSize:"auto",position:"absolute",overflow:"hidden",height:"100%",width:"100%",opacity:1,zIndex:2,top:0,left:0}}),U=(0,u.Ay)("video")(e=>{let{theme:t}=e;return{pointerEvents:"none",borderRadius:"20px",position:"relative",objectFit:"cover",userSelect:"none",overflow:"hidden",maxWidth:"100vw",aspectRatio:.5,height:"25vh",width:"auto",opacity:0,zIndex:1,left:0,top:0}}),Y=()=>{var e,t,n,l,u,d,x,p;let{webcamSetList:h,onWebcamList:m,onWebcamConfigId:f,webcamGetConfigId:g,webcamSetConfigId:j}=(0,c.P)(),{getStream:v,resetStream:A}=function(){let e=(0,a.useRef)({});return{getStream:async t=>{var n;return"string"!=typeof t||e.current[t]||(e.current[t]=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t}}})),null!=(n=e.current[t])?n:null},resetStream:t=>{for(let r of"string"==typeof t?[t]:Object.keys(e.current)){try{var n;"function"==typeof(null==(n=e.current[r])?void 0:n.getTracks)&&e.current[r].getTracks().forEach(e=>{"function"==typeof(null==e?void 0:e.stop)&&e.stop()})}catch(e){}delete e.current[r]}}}}(),{getWebcamValue:b}=(0,s.t)(),{i18n:w}=(0,i.B)(),[S,k]=(0,a.useState)(g()),[I,C]=(0,a.useState)(null),[z,E]=(0,a.useState)(!1),T=(0,a.useRef)(null),O=(0,a.useRef)(null),P=null!=(e=b(S,"id"))?e:"",R=null!=(t=b(S,"orientation"))?t:y.A.orientation.LANDSCAPE,N=null!=(n=b(S,"placement"))?n:"bottom-right",L=null!=(l=b(S,"marginX"))?l:5,M=null!=(u=b(S,"marginY"))?u:5,B=null!=(d=b(S,"height"))?d:25,D=null!=(x=b(S,"radius"))?x:20;(0,a.useEffect)(()=>{k(g());let e=f(e=>{let{configId:t}=e;return k(t)}),t=async()=>{try{let e=await navigator.mediaDevices.enumerateDevices();h(Array.isArray(e)?e.filter(e=>"videoinput"===(null==e?void 0:e.kind)).map(e=>e.toJSON()):[])}catch(e){}};return navigator.mediaDevices.addEventListener("devicechange",t),t(),()=>{e(),navigator.mediaDevices.removeEventListener("devicechange",t)}},[]),(0,a.useEffect)(()=>{let e=performance.now();E(!1);let t=e=>{A(P),setTimeout(()=>{e&&o.o.error(e),j(null)},300)},n=m(async e=>{let{list:n}=e,r=n.map(e=>{var t;return null!=(t=null==e?void 0:e.deviceId)?t:null}).filter(e=>null!==e);"string"==typeof P&&P.length&&(r.includes(P)||t(w.t("Webcam disconnected")))});(async()=>{if(O.current&&"string"==typeof P&&P.length)try{if(T.current=await v(P),!T.current)throw Error(w.t("Invalid webcam stream"));O.current.srcObject=T.current,await O.current.play();let t=T.current.getVideoTracks()[0];if("function"==typeof(null==t?void 0:t.getSettings)){var n,r;t.enabled=!0,C(null!=(r=null==(n=t.getSettings())?void 0:n.aspectRatio)?r:null),setTimeout(()=>E(!0),performance.now()-e<300?300-(performance.now()-e):0)}}catch(n){let e="".concat(n.message||n);"OverconstrainedError"===n.name&&(e="deviceId"===n.constraint?w.t("Selected webcam is no longer available"):w.t("Invalid webcam constraint: {{item}}",{item:n.constraint})),t(e)}})();let r=setTimeout(()=>{O.current.srcObject||A()},5e3);return()=>{E(!1),n(),clearTimeout(r),(async()=>{var e,t;try{"function"==typeof(null==(e=O.current)?void 0:e.pause)&&(await O.current.pause(),O.current.srcObject=null,await O.current.load())}catch(e){}try{"function"==typeof(null==(t=T.current)?void 0:t.getTracks)&&T.current.getTracks().forEach(e=>{e.enabled=!1})}catch(e){}})()}},[P,S]);let Y="".concat(D,"px"),K="".concat(B,"vh"),_=null!=(p=({"top-left":{left:"".concat(L,"vh"),top:"".concat(M,"vh")},top:{left:"50%",top:"".concat(M,"vh"),transform:"translate(-50%, 0)"},"top-right":{right:"".concat(L,"vh"),top:"".concat(M,"vh")},right:{right:"".concat(L,"vh"),top:"50%",transform:"translate(0, -50%)"},"bottom-right":{right:"".concat(L,"vh"),bottom:"".concat(M,"vh")},bottom:{left:"50%",bottom:"".concat(M,"vh"),transform:"translate(-50%, 0)"},"bottom-left":{left:"".concat(L,"vh"),bottom:"".concat(M,"vh")},left:{left:"".concat(L,"vh"),top:"50%",transform:"translate(0, -50%)"},center:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})[N])?p:{right:"".concat(L,"vh"),bottom:"".concat(M,"vh")};return(0,r.jsxs)(F,{style:{...P?{display:"flex"}:{},..._,borderRadius:Y,height:K},children:[(0,r.jsx)(X,{style:{...P&&z?{opacity:0}:{},borderRadius:Y}}),(0,r.jsx)(U,{style:{...function(e,t){let n=null;do{var r;if([y.A.orientation.PORTRAIT,y.A.orientation.LANDSCAPE].includes(e)){Number.isFinite(t)&&t>0&&(n=y.A.orientation.PORTRAIT===e&&t>1||y.A.orientation.LANDSCAPE===e&&t<1?1/t:t);break}n=null!=(r=({[y.A.orientation.R1_1]:1,[y.A.orientation.R16_9]:16/9,[y.A.orientation.R9_16]:9/16,[y.A.orientation.R21_9]:21/9,[y.A.orientation.R9_21]:9/21,[y.A.orientation.R32_9]:32/9,[y.A.orientation.R9_32]:9/32,[y.A.orientation.R45_9]:5,[y.A.orientation.R9_45]:.2})[e])?r:null}while(!1);return null!==n?{aspectRatio:n}:{}}(R,I),...P&&z?{opacity:1}:{},borderRadius:Y,height:K},disablePictureInPicture:!0,disableRemotePlayback:!0,controls:!1,ref:O,playsInline:!0,autoPlay:!0,muted:!0})]})},K=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{top:0,left:0,width:"100vw",height:"100vh",position:"fixed",overflow:"hidden",pointerEvents:"auto",zIndex:2}}),_=(0,u.Ay)("svg")(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,width:"100%",height:"100%",touchAction:"none",zIndex:3}}),W=()=>{var e;let{canvasDrawSet:t,canvasToolGet:n,canvasPointsSet:i,canvasPointsAdd:o,canvasPointsGet:u,canvasPointsReset:d,canvasRolloutAdd:x,canvasRolloutGet:p,canvasRolloutReset:h,canvasLaserAdd:m,canvasLaserStop:f,canvasLaserStart:g,canvasBoxGet:j,canvasBoxSetFrom:S,canvasBoxSetTo:k,canvasBoxReset:C,canvasTextAdd:z,historyCreate:E,historyDelete:N,historyRead:L,onDisplayInfo:F,dialogSet:X,getDeviceInfo:U,getTutorialStep:W,setTutorialStep:H}=(0,c.P)(),{settings:V}=(0,s.t)(),G=function(){let{getDeviceInfo:e,onDisplayInfo:t,canvasToolSet:n}=(0,c.P)(),{settings:r}=(0,s.t)(),l=(0,a.useRef)({mouseDown:!1,escape:!1,space:!1,shift:!1,ctrl:!1,meta:!1}),i="string"==typeof y.A.cursor.sizes[r.cursor]?r.cursor:y.A.cursor.default,o=y.A.cursor.sizes[i],u=e=>{n(e);let t="".concat(i,"/").concat(e).concat(l.current.mouseDown?"-down":"");document.documentElement.style.setProperty("--cursor",'url("/img/cursor/'.concat(t,'.png") ').concat(o,", auto"))},d=()=>{let t="macos"===e().os?l.current.meta:l.current.ctrl;do{if(l.current.escape){u(y.A.tools.ERASER);break}if(l.current.space){u(y.A.tools.SPOTLIGHT);break}if(l.current.shift&&t){u(y.A.tools.BOX);break}if(t){u(y.A.tools.LINE);break}if(l.current.shift){u(y.A.tools.LASER);break}u(y.A.tools.PEN)}while(!1)},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=0;Object.values(y.A.tools).map((n,l)=>{setTimeout(()=>{new Image().src="/img/cursor/".concat(r.cursor,"/").concat(n,".png")},10*t),setTimeout(()=>{let t=new Image;0===l&&(t.onload=()=>"function"==typeof e&&e()),t.src="/img/cursor/".concat(r.cursor,"/").concat(n,"-down.png")},(t+1)*10),t+=2})};return(0,a.useEffect)(()=>{x(d);let e=e=>{l.current.mouseDown=!0,d()},n=()=>{l.current.mouseDown=!1,d()},r=e=>{let t=!1;for(let n of Object.keys(b))b[n]!==e.code||l.current[n]||(t=!0,l.current[n]=!0);for(let n of Object.keys(w))w[n]!==e.key||l.current[n]||(t=!0,l.current[n]=!0);t&&d()},i=e=>{let t=!1;for(let n of Object.keys(b))b[n]===e.code&&l.current[n]&&(t=!0,l.current[n]=!1);for(let n of Object.keys(w))w[n]===e.key&&l.current[n]&&(t=!0,l.current[n]=!1);t&&d()};window.addEventListener("mousedown",e),window.addEventListener("mouseup",n),window.addEventListener("keydown",r),window.addEventListener("keyup",i);let o=t(async()=>{Object.keys(l.current).map(e=>{l.current[e]=!1}),d()});return()=>{o(),window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",n),window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)}},[r.cursor]),l}(),q=(0,l.A)(),Z=(0,a.useRef)({time:0,x:0,y:0}),J=(0,a.useRef)(y.A.tools.PEN),Q=(0,a.useRef)(!1),[$,ee]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=F(async e=>{let{info:t}=e;ee(t.passThru)});return()=>e()},[]),(0,a.useEffect)(()=>{var e;Q.current=!!(null==(e=q.user)?void 0:e.computerEnabled)},[null==(e=q.user)?void 0:e.computerEnabled]),(0,r.jsxs)(K,{children:[(0,r.jsx)(I,{}),(0,r.jsx)(Y,{}),(0,r.jsxs)(_,{"data-use-cursor":$?null:"true",onPointerDown:e=>{if(!$){if(!Q.current)return void X("dialog:subscription");if((e=>{if(!e.isPrimary||"mouse"===e.pointerType&&0!==e.button)return!1;let t=performance.now(),{clientX:n,clientY:r}=e,l=Z.current,i=t-l.time,o=Math.hypot(n-l.x,r-l.y);if(i>0&&i<300&&o<15){Z.current.time=0;let e=null;if("macos"===U().os?G.current.meta:G.current.ctrl){let t=1,n=L();for(let e of Object.keys(n.items)){var s;if(0!==e.indexOf("text-")||"string"!=typeof(null==(s=n.items[e])?void 0:s.text))continue;let r=n.items[e].text.match(/^(\d+)(\W|$)/);if(!r)continue;let l=parseInt(r[1],10)+1;Number.isInteger(l)&&!(l<=t)&&(t=l)}e="".concat(t," ")}return z(n,r,e),!0}return Z.current={time:t,x:n,y:r},!1})(e))return void t(!1);if(t(!0),e.target.setPointerCapture(e.pointerId),J.current=n(),d(!1),y.A.tools.PEN===J.current||y.A.tools.ERASER===J.current)return void o([e.pageX,e.pageY,e.pressure]);if(y.A.tools.LASER===J.current)return void g([e.pageX,e.pageY,e.pressure],V.laserDelay);if(y.A.tools.LINE===J.current||y.A.tools.BOX===J.current||y.A.tools.SPOTLIGHT===J.current)return void S(e.pageX,e.pageY)}},onPointerMove:e=>{if(!$&&Q.current&&1===e.buttons){if(y.A.tools.PEN===J.current)return void o([e.pageX,e.pageY,e.pressure]);if(y.A.tools.ERASER===J.current){o([e.pageX,e.pageY,e.pressure]);let t=p().reduce((e,t)=>(e[t]=1,e),{}),n=function(e,t){if("object"!=typeof e||null===e||0===Object.keys(e).length||!Array.isArray(t)||t.length<2)return null;let n=(e,t,n)=>{let r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},r=(e,t,n)=>t[0]>=Math.min(e[0],n[0])&&t[0]<=Math.max(e[0],n[0])&&t[1]>=Math.min(e[1],n[1])&&t[1]<=Math.max(e[1],n[1]),l=(e,t,l,i)=>{if(!(Math.max(e[0],t[0])>=Math.min(l[0],i[0])&&Math.max(l[0],i[0])>=Math.min(e[0],t[0])&&Math.max(e[1],t[1])>=Math.min(l[1],i[1])&&Math.max(l[1],i[1])>=Math.min(e[1],t[1])))return!1;let o=n(e,t,l),s=n(e,t,i),a=n(l,i,e),c=n(l,i,t);return!!(o!==s&&a!==c||0===o&&r(e,l,t)||0===s&&r(e,i,t)||0===a&&r(l,e,i)||0===c&&r(l,t,i))},i=[];for(let e=0;e<t.length-1;e++)i.push([t[e],t[e+1]]);for(let t of Object.keys(e)){var o;let n=null==(o=e[t])?void 0:o.points;if(Array.isArray(n)&&!(n.length<2)){for(let[e,r]of i)for(let i=0;i<n.length-1;i++)if(l(e,r,n[i],n[i+1]))return t}}return null}(p().length?Object.keys(L().items).reduce((e,n)=>(t[n]||(e[n]=L().items[n]),e),{}):L().items,u());null===n||t[n]||x(n);return}if(y.A.tools.LASER===J.current)return void m([e.pageX,e.pageY,e.pressure]);if(y.A.tools.LINE===J.current){k(e.pageX,e.pageY);let t=j();i(Array.isArray(t)?t:[]);return}if(y.A.tools.BOX===J.current||y.A.tools.SPOTLIGHT===J.current)return void k(e.pageX,e.pageY)}},onPointerUp:e=>{if($||!Q.current)return;t(!1);let n=u();if(d(),y.A.tools.PEN===J.current){Array.isArray(n)&&n.length>=3&&(E(y.A.tools.PEN,{points:n}),1===W()&&H(2));return}if(y.A.tools.ERASER===J.current){p().length&&(N(p()),h()),2===W()&&H(3);return}if(y.A.tools.LASER===J.current){f(),3===W()&&H(4);return}if(y.A.tools.LINE===J.current){let e=j();Array.isArray(e)&&(E(y.A.tools.LINE,{points:e}),C(),4===W()&&H(5));return}if(y.A.tools.BOX===J.current){let e=j();Array.isArray(e)&&(E(y.A.tools.BOX,{coords:e,points:v(e[0],e[1],0)}),C(),5===W()&&H(6));return}if(y.A.tools.SPOTLIGHT===J.current){let e=j();Array.isArray(e)&&(E(y.A.tools.SPOTLIGHT,{...A(e[0],e[1]),points:v(e[0],e[1],0)}),C());return}},children:[(0,r.jsx)(R,{refTool:J}),(0,r.jsx)(M,{refTool:J}),(0,r.jsx)(D,{refTool:J}),(0,r.jsx)(B,{})]}),(0,r.jsxs)(O,{children:[(0,r.jsx)(T,{}),(0,r.jsx)(P,{})]})]})};var H=n(36740),V=n(80218),G=n.n(V),q=n(67906),Z=n(80553),J=n(44395),Q=n(35003),$=n(71733),ee=n(50993),et=n(79270),en=n(65754),er=n(10240),el=n(50138),ei=n(72563),eo=n(35283),es=n(47896),ea=n(72471),ec=n(23227),eu=n(27780),ed=n(216),ex=n(88639),ep=n(54544),eh=n(32673),em=n(22653),ef=n(66703),eg=n(6995);let ej=(0,u.Ay)(d.A)(e=>{let{theme:t,size:n="small"}=e;return{background:t.palette.background.paper,justifyContent:"center",alignItems:"center",display:"flex",boxShadow:t.shadows[3],borderRadius:"small"===n?"0.4rem":"1rem",fontSize:"small"===n?"0.85rem":"3rem",marginRight:"small"===n?"0px":"2px",marginLeft:"small"===n?"1px":"2px",height:"small"===n?"2rem":"5rem",width:"small"===n?"1.1rem":"3rem"}});function ev(e){let{subInfo:t={},sx:n={},small:l=!1}=e,i=(0,ef.A)(),o=(0,eg.A)(i.breakpoints.up("sm")),[s,c]=(0,a.useState)(null);("object"!=typeof n||null===n)&&(n={}),(0,a.useEffect)(()=>{let e=null;return Number.isInteger(t.pilotLeft)&&t.pilotLeft>0&&(c(t.pilotLeft),e=setInterval(()=>{c(e=>e-1)},1e3)),()=>null!==e&&clearInterval(e)},[t.pilotLeft]);let u=t.pilotLeft>0&&t.planComputersCount>0&&t.computersCount>t.planComputersCount,x=(o||!l?"00:00:00":"00:00").split("");return"number"==typeof s&&s>0&&(x=[Math.floor(s/3600),Math.floor(s%3600/60),...o||!l?[Math.floor(s%60)]:[]].map(e=>"".concat(e).padStart(2,"0")).join(":").split("")),t.active&&"pilot"===t.status||u?(0,r.jsx)(d.A,{sx:{display:"flex",justifyContent:"space-between",...n},children:x.map((e,t)=>(0,r.jsx)(ej,{size:l?"small":"large",children:e},t))}):null}let eA=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{position:"absolute",left:"-2rem",bottom:"-5rem",width:"25rem",height:"25rem",zIndex:1,opacity:.1,"&>svg":{position:"relative",width:"100%",height:"100%"}}}),ey=(0,u.Ay)("pre")(e=>{let{theme:t}=e;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,color:t.palette.text.primary,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}});function eb(e){var t,n,s,u,x,p;let{isOpen:h=!1,onClose:m=()=>{}}=e,{onSubscription:f,getSubscription:g,checkSubscription:j}=(0,c.P)(),{i18n:v}=(0,i.B)(),A=(0,H.A)(),b=(0,l.A)(),[w,S]=(0,a.useState)(null),[k,I]=(0,a.useState)({}),[C,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{j(b,!0),I(g());let e=f(e=>{let{info:t}=e;I(t)});return(async()=>{var e;S(await (null==(e=window.sdk)?void 0:e.ipc.device.getSerialNumber()))})(),z(!0),()=>e()},[]);let E=()=>{h&&"function"==typeof m&&m()},T=async e=>{o.o.info(v.t("Copied computer serial number to clipboard"),null,!1),A.copy(e)},O=async()=>{var e,t,n;E(),o.o.info(!k.active||(null==(e=b.user)?void 0:e.computerEnabled)?v.t("Navigating to billing page..."):v.t("Navigating to my computers..."),null,!1),await (null==(n=window.sdk)?void 0:n.ipc.device.openURL(!k.active||(null==(t=b.user)?void 0:t.computerEnabled)?"".concat(y.A.siteUrl,"/profile/#/tab:billing"):"".concat(y.A.siteUrl,"/#/tab:computers")))},P=[{key:"computersCount",labelSingular:v.t("computer"),labelPlural:v.t("computers"),count:k.computersCount,max:G().max.computersCount,boostedCount:k.planComputersCount,boostedTooltip:v.t("You can use this extra computer until the trial ends"),Icon:ep.A},{key:"updates",labelSingular:v.t("update"),labelPlural:v.t("updates"),count:1/0,max:0,boostedCount:0,boostedTooltip:null,Icon:eh.A}],R=k.pilotLeft>0&&k.planComputersCount>0&&k.computersCount>k.planComputersCount,N=!(null==(t=b.user)?void 0:t.computerEnabled)||!k.active||y.A.billing.subscriptionStatus.pastDue===k.status;return h&&C?(0,r.jsxs)(et.A,{open:!0,onClose:E,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,r.jsx)(eA,{className:"rotate",children:k.active?(null==(n=b.user)?void 0:n.computerEnabled)?"pilot"===k.status?(0,r.jsx)(eu.A,{color:"info"}):y.A.billing.subscriptionStatus.pastDue===k.status?(0,r.jsx)(es.A,{color:"warning"}):R?(0,r.jsx)(eo.A,{color:"success"}):(0,r.jsx)(el.A,{color:"success"}):(0,r.jsx)(ex.A,{}):(0,r.jsx)(em.A,{color:"warning"})}),(0,r.jsx)(J.A,{children:k.active?"pilot"===k.status?v.t("Free trial"):y.A.billing.subscriptionStatus.pastDue===k.status?v.t("Invoice past due"):"string"==typeof(null==(s=k.pricePlan)?void 0:s.interval)?v.t("Active subscription"):v.t("Lifetime subscription"):v.t("Payment required")}),(0,r.jsx)(Z.A,{sx:{my:6,position:"relative",zIndex:2},children:k.active?(null==(u=b.user)?void 0:u.computerEnabled)?(0,r.jsxs)(d.A,{children:["pilot"!==k.status&&y.A.billing.subscriptionStatus.pastDue===k.status?(0,r.jsx)(er.A,{severity:"warning",sx:{mb:6},children:v.t("Invoice past due. Please fix this issue to avoid service interruption.")}):null,"pilot"===k.status?(0,r.jsxs)(d.A,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",userSelect:"none",mb:6},children:[(0,r.jsx)(ev,{subInfo:k,sx:{mb:6}}),(0,r.jsx)(Q.A,{variant:"body2",children:v.t("Free trial limits expire soon")})]}):null,(0,r.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",mt:3},children:P.map((e,t)=>(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",mb:3,ml:6*(0!==t)},children:[(0,r.jsx)(ee.A,{placement:"top",title:R&&e.boostedCount>e.count?e.boostedTooltip:null,children:(0,r.jsx)(e.Icon,{sx:{fontSize:"3rem"},className:R&&e.boostedCount>e.count?"zoom-in":null,color:R&&e.boostedCount>e.count?"success":"inherit"})}),1/0===e.count?(0,r.jsx)(ec.A,{fontSize:"large",sx:{ml:4,mr:2}}):(0,r.jsx)(Q.A,{variant:"h4",sx:{ml:4,mr:2},children:e.count}),(0,r.jsxs)(Q.A,{variant:"h6",color:"text.secondary",children:[1/0===e.count?null:"x ",1===e.count?e.labelSingular:e.labelPlural]})]},e.key))})]}):(0,r.jsxs)(er.A,{severity:"info",icon:(0,r.jsx)(ex.A,{}),sx:{"&>.MuiAlert-message":{width:"100%"}},children:[(0,r.jsx)(Q.A,{variant:"body2",sx:{color:"inherit",width:"100%"},children:v.t("Please go to your dashboard and enable computer with serial number:")}),(0,r.jsxs)(d.A,{display:"flex",sx:{width:"100%",justifyContent:"center",alignItems:"center",my:3},children:[(0,r.jsx)(ee.A,{title:v.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard."),placement:"top",children:(0,r.jsx)(ey,{children:w})}),(0,r.jsx)(ee.A,{title:v.t("Click to copy"),placement:"top",children:(0,r.jsx)($.A,{onClick:()=>T(w),children:(0,r.jsx)(ed.A,{fontSize:"small"})})})]})]}):(0,r.jsx)(er.A,{icon:(0,r.jsx)(ea.A,{}),severity:"warning",variant:"filled",children:v.t("To continue using the app, please upgrade to a paid plan.")})}),(0,r.jsxs)(q.A,{sx:{position:"relative",zIndex:2},children:[(0,r.jsx)(en.A,{startIcon:!k.active||(null==(x=b.user)?void 0:x.computerEnabled)?(0,r.jsx)(ei.A,{}):(0,r.jsx)(ep.A,{}),onClick:O,color:k.active?"primary":"warning",className:N?"pop":null,variant:"contained",children:!k.active||(null==(p=b.user)?void 0:p.computerEnabled)?v.t("Go to billing"):v.t("Go to my computers")}),(0,r.jsx)(en.A,{color:"secondary",onClick:E,children:v.t("Close")})]})]}):null}var ew=n(71090),eS=n(88992);let ek=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{month:"long",day:"numeric",year:"numeric"};return e?new Intl.DateTimeFormat(t,n).format(new Date(e)):e};var eI=n(16084),eC=n(39091),ez=n(91040),eE=n(4728),eT=n(95389),eO=n(77648),eP=n(14353),eR=n(38111),eN=n(41316),eL=n(60595),eM=n(87080),eB=n(32136),eD=n(2665),eF=n(7827),eX=n(51018),eU=n(56792),eY=n(53608),eK=n(35250),e_=n(45559),eW=n(43400);let eH=(0,u.Ay)("img")(()=>({width:200,height:200})),eV=e=>{let{uploadPath:t,getSrc:n,onChange:l=async()=>{},crop:s="fit",backgroundColor:c=null,borderColor:u=null,borderWidth:x=null,previewWidth:p=200,previewHeight:h=200,radius:m=5,alt:f="Logo",inputName:g="logo",label:j="Select logo",active:v=!1,width:A=256,height:y=256}=e;"function"!=typeof n&&(n=()=>"/img/logo/192.png");let b=(0,ef.A)(),[w,S]=(0,a.useState)(n()),[k,I]=(0,a.useState)(!1),{i18n:C}=(0,i.B)(),z=null!==u&&null!==x?"solid":null,{getRootProps:E,getInputProps:T}=(0,eY.VB)({multiple:!1,accept:{"image/png":[".png"],"image/jpg":[".jpg",".jpeg"],"image/webp":[".webp"]},onDrop:e=>{let n=document.createElement("img");n.onload=function(){I(!0),setTimeout(()=>{let e=n.width,r=n.height,i=0,o=0;e>r?"fill"===s?(r=y,e*=y/n.height,i=parseInt((A-e)/2,10)):(e=A,r*=A/n.width,o=parseInt((y-r)/2,10)):"fill"===s?(e=A,r*=A/n.width,o=parseInt((y-r)/2,10)):(r=y,e*=y/n.height,i=parseInt((A-e)/2,10));let a=document.createElement("canvas");a.width=A,a.height=y,a.getContext("2d").drawImage(n,i,o,e,r),a.toBlob(e=>{let n=new FormData;n.append(g,e),(async()=>{try{let r=await ez.A.post(t,n,{headers:{"Content-Type":"multipart/form-data"}});S(URL.createObjectURL(e)),"function"==typeof l&&await l(r.data,URL.createObjectURL(e)),I(!1)}catch(e){I(!1)}})()},"png"),a.remove(),n.remove()},eK.A.delay.request)},n.onerror=()=>{o.o.error(C.t("The selected file is not a valid image"),{duration:5e3,ariaProps:{role:"alert"}})},n.src=URL.createObjectURL(Object.assign(e[0]))},validator:()=>{}});return(0,r.jsx)(d.A,{children:k?(0,r.jsx)(d.A,{sx:{width:p,height:h,display:"flex",alignItems:"center",flexDirection:"column"},children:(0,r.jsx)(eW.A,{count:1,spacing:0,rounded:!0,sx:{p:5,width:p,height:h}})}):v?(0,r.jsxs)(d.A,{...E({className:"dropzone"}),sx:{position:"relative",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"},children:[(0,r.jsx)("input",{...T()}),(0,r.jsx)(eH,{src:w,alt:"logo",sx:{m:0,pointerEvents:"none",borderRadius:m,backgroundColor:c,borderStyle:z,borderWidth:x,borderColor:u,width:p,height:h}}),(0,r.jsxs)(d.A,{sx:{position:"absolute",width:"70%",height:"70%",background:"dark"===b.palette.mode?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.6)",borderRadius:"50%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","&:hover > p":{display:"none"},"&:hover > svg":{transform:"scale(2)"}},children:[(0,r.jsx)(e_.A,{}),(0,r.jsx)(Q.A,{size:"large",color:"inherit",sx:{mt:2,textAlign:"center"},children:j})]})]}):(0,r.jsx)(d.A,{sx:{position:"relative",width:p,height:h,"&:before":{content:'""',display:"block",width:p,height:h,position:"absolute",top:0,left:0,zIndex:1,background:b.palette.background.paper,borderRadius:m}},children:(0,r.jsx)(eH,{src:w,sx:{position:"relative",zIndex:1,width:p,height:h,borderRadius:m,backgroundColor:"transparent",borderWidth:x,borderColor:u},alt:f})})})};function eG(){let e=(0,x._)(["0% { opacity: 0 } 100% { opacity: 1 }"]);return eG=function(){return e},e}function eq(){let e=(0,x._)(["0% { opacity: 0; transform: scale(1.5); } 100% { opacity: 1; transform: scale(1); }"]);return eq=function(){return e},e}let eZ=(0,p.i7)(eG()),eJ=(0,p.i7)(eq()),eQ=(0,u.Ay)(d.A)(e=>{let{theme:t,color:n}=e;return{display:"flex",position:"absolute",justifyContent:"flex-end",alignItems:"end",top:0,left:0,width:"100%",height:200,zIndex:0,"&:before":{content:'""',display:"block",position:"absolute",background:n,width:"100%",height:"100%",opacity:0,animation:null!==n?"".concat(eZ," 1250ms forwards linear"):"none"},"&:after":{content:'""',display:"block",position:"absolute",width:"100%",height:"100%",opacity:0,transform:"scale(1.5)",animation:null!==n?"".concat(eJ," 250ms forwards linear"):"none",background:"url(/img/pages/circles-profile-".concat(t.palette.mode,".svg)"),backgroundSize:"auto",backgroundRepeat:"no-repeat",[t.breakpoints.up("xs")]:{backgroundPosition:"50% -600px",transformOrigin:"50% 100%"},[t.breakpoints.up("md")]:{backgroundPosition:"-680px -600px",transformOrigin:"100px 100%"}}}}),e$=e=>{var t,n;let{isOpen:o=!1,onOpen:c=()=>{},onClose:u=()=>{}}=e,{settings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),h=(0,l.A)(),m=(0,eI.G)(),f=(0,ef.A)(),g=m.getUserData(),[j,v]=(0,a.useState)(null),[A,b]=(0,a.useState)(!0),[w,S]=(0,a.useState)(!1),[k,I]=(0,a.useState)(null),[C,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o&&"function"==typeof c&&c()},[o]);let E=()=>{o&&"function"==typeof u&&u()},{control:T,setValue:O,handleSubmit:P,formState:{errors:R}}=(0,eS.mN)({defaultValues:{userName:null!=(t=null==g?void 0:g.userName)?t:p.t("User name")},mode:"onChange",resolver:(0,ew.t)(eC.Ik().shape({userName:eC.Yj().min(3,()=>p.t("Must be at least {{n}} characters long",{n:3})).max(64,()=>p.t("Must be at most {{n}} characters long",{n:64})).required()}))});(0,a.useEffect)(()=>{O("userName",null==g?void 0:g.userName),I(null);let e=setTimeout(async()=>{"string"==typeof f.palette.customColors.userColors.gradient[null==g?void 0:g.userColor]&&I(f.palette.customColors.userColors.gradient[null==g?void 0:g.userColor])},150);return()=>clearTimeout(e)},[x.mode,null==g?void 0:g.userColor,null==g?void 0:g.userName]);let N=e=>{"string"==typeof(null==e?void 0:e.userName)&&(O("userName",e.userName),h.setUser({...h.user,userName:e.userName,userColor:e.userColor,userAvatarId:e.userAvatarId}))},L=async()=>{z(!0)},M=async()=>{E(),h.logout()},B=async e=>{if(A){b(!1);try{var t;let n=await ez.A.post("account",e);N(null!=(t=null==n?void 0:n.data)?t:{})}catch(e){}b(!0),S(!1)}},D=async e=>{if(A){b(!1);try{var t;let n=await ez.A.post("account",{userColor:e});N(null!=(t=null==n?void 0:n.data)?t:{})}catch(e){}b(!0)}};return o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(et.A,{open:!0,onClose:E,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:750,p:0}},children:(0,r.jsx)(eN.Ay,{container:!0,spacing:6,children:(0,r.jsx)(eN.Ay,{item:!0,xs:12,children:(0,r.jsxs)(eL.A,{sx:{position:"relative"},children:[(0,r.jsx)(eQ,{color:k}),(0,r.jsx)(eO.A,{sx:{zIndex:10,position:"relative"},action:(0,r.jsxs)(d.A,{sx:{display:"flex"},children:[w&&A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:p.t("Profile color"),children:(0,r.jsx)($.A,{sx:{zIndex:10,background:"light"===f.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:f.palette.background.paper}},onClick:e=>v(e.currentTarget),children:(0,r.jsx)(eF.A,{color:"info"})})}),(0,r.jsx)(eM.A,{keepMounted:!0,anchorEl:j,open:!!j,onClose:()=>v(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{ml:"2px",mt:2},PaperProps:{style:{minWidth:20}},children:Object.keys(f.palette.customColors.userColors.solid).map(e=>(0,r.jsx)(eR.A,{selected:(null==g?void 0:g.userColor)==e,onClick:()=>{v(null),D(e)},children:(0,r.jsx)(d.A,{sx:{width:15,height:15,borderRadius:"50%",background:f.palette.customColors.userColors.solid[e]}})},"user-color-".concat(e)))})]}):null,(0,r.jsx)(ee.A,{title:w?p.t("Exit edit mode"):p.t("Edit profile"),children:(0,r.jsx)($.A,{sx:{ml:2,background:"light"===f.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:f.palette.background.paper}},variant:"contained",color:"inherit",onClick:()=>{if(!w)return void S(!0);O("userName",g.userName),S(!1)},children:w?(0,r.jsx)(eB.A,{}):(0,r.jsx)(eD.A,{})})})]})}),(0,r.jsxs)(eT.A,{sx:{zIndex:10},children:[(0,r.jsx)("form",{onSubmit:P(B),autoComplete:"off",children:(0,r.jsx)(eN.Ay,{container:!0,spacing:7,sx:{justifyContent:"left"},children:(0,r.jsx)(eN.Ay,{item:!0,xs:12,sx:{my:4,display:"flex"},children:(0,r.jsxs)(d.A,{sx:{display:"flex",width:"100%",alignItems:{xs:"center",md:"flex-end"},flexDirection:{xs:"column",md:"row"}},children:[(0,r.jsx)(eV,{crop:"fill",borderColor:f.palette.background.paper,backgroundColor:f.palette.background.paper,inputName:"avatar",uploadPath:"account/avatar",active:w,label:p.t("Select avatar"),radius:"50%",onChange:async()=>{var e;let t=await ez.A.get("account");"string"==typeof(null==(e=t.data)?void 0:e.id)&&h.setUser(t.data)},alt:null!=(n=null==g?void 0:g.userName)?n:p.t("User name"),getSrc:()=>{var e;let t=new Date().toJSON().slice(0,10),n="".concat(y.A.s3Url,"/users/").concat(null==g?void 0:g.id,"/?cb=").concat(t);return(null==(e=h.user)?void 0:e.id)===(null==g?void 0:g.id)&&(n="string"==typeof(null==g?void 0:g.userAvatarId)?"".concat(y.A.s3Url,"/users/").concat(g.id,"/").concat(g.userAvatarId,".png"):"/img/placeholder/user.png"),n}}),(0,r.jsx)(d.A,{sx:{ml:{xs:0,md:6},width:"100%",position:"relative"},children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.A,{sx:{width:"100%",display:"flex"},children:[(0,r.jsx)(eS.xI,{name:"userName",control:T,fullWidth:!0,rules:{required:!0},render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(eP.A,{sx:{textAlign:"center"},fullWidth:!0,required:!0,spellCheck:!1,autoComplete:"off",autoFocus:!0,disabled:!A,value:t,label:p.t("User name"),onChange:n,placeholder:"John Doe"})}}),(0,r.jsx)(en.A,{variant:"contained",startIcon:(0,r.jsx)(eU.A,{}),sx:{ml:3},type:"submit",disabled:!A,children:p.t("Save")})]}),R.userName&&(0,r.jsx)(eE.A,{sx:{color:"error.main",position:"absolute",bottom:-25},children:R.userName.message})]}):(0,r.jsx)(d.A,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(ee.A,{title:(null==g?void 0:g.createdAt)?"".concat(p.t("Member since")," ").concat(ek(g.createdAt,x.lang,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})):null,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"start",flexDirection:"column"},children:[(0,r.jsx)(d.A,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(Q.A,{variant:"h6",children:g.userName})}),(0,r.jsx)(Q.A,{variant:"caption",children:null==g?void 0:g.userEmail})]})})})})]})})})}),(0,r.jsxs)(d.A,{sx:{display:"flex",justifyContent:"end",width:"100%",mt:2},children:[(0,r.jsx)(en.A,{startIcon:(0,r.jsx)(eX.A,{}),onClick:L,color:"error",sx:{mr:2},children:p.t("Log out")}),(0,r.jsx)(en.A,{color:"secondary",onClick:E,children:p.t("Close")})]})]})]})})})}),C?(0,r.jsxs)(et.A,{open:!0,onClose:()=>z(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,r.jsx)(J.A,{children:p.t("Log out")}),(0,r.jsx)(Z.A,{children:(0,r.jsxs)(er.A,{severity:"warning",children:[p.t("Are you sure you want to log out of this computer?"),(0,r.jsx)("br",{}),p.t("You can reconnect this computer to your account at any time.")]})}),(0,r.jsxs)(q.A,{children:[(0,r.jsx)(en.A,{color:"secondary",onClick:()=>z(!1),children:p.t("Cancel")}),(0,r.jsx)(en.A,{variant:"text",color:"error",onClick:()=>M(),startIcon:(0,r.jsx)(eX.A,{}),children:p.t("Log out")})]})]}):null]}):null};var e0=n(29814),e1=n(7360),e2=n(34318),e5=n(4567),e3=n(215),e4=n(54582);let e6=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{border:"1px solid ".concat("dark"===t.palette.mode?t.palette.text.disabled:t.palette.divider),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),marginRight:t.spacing(2),marginTop:t.spacing(1),borderRadius:t.spacing(2),paddingBottom:t.spacing(1),minHeight:"30px",position:"relative","&:before":{content:'""',display:"block",position:"absolute",top:"-2px",left:"1px",width:"calc(100% - 2px)",height:"90%",border:"2px solid ".concat("dark"===t.palette.mode?t.palette.text.disabled:t.palette.divider),borderRadius:t.spacing(2)}}});function e7(e){let{final:t=!1,children:n,sx:l={}}=e;return("object"!=typeof l||null===l)&&(l={}),(0,r.jsx)(e6,{sx:{...l},style:{...t?{marginRight:0}:{}},children:n})}function e8(e){let{sx:t={}}=e,{getDeviceInfo:n}=(0,c.P)();return("object"!=typeof t||null===t)&&(t={}),(0,r.jsxs)(d.A,{sx:{display:"flex",...t},children:["macos"===n().os?null:(0,r.jsx)(e7,{children:(0,r.jsx)(e4.A,{fontSize:"small"})}),(0,r.jsx)(e7,{children:(0,r.jsx)(e5.A,{fontSize:"small"})}),"macos"===n().os?(0,r.jsx)(e7,{children:(0,r.jsx)(e2.A,{fontSize:"small"})}):null,(0,r.jsx)(e7,{children:(0,r.jsx)(e3.A,{fontSize:"small"})})]})}var e9=n(18539),te=n(2220),tt=n(38375),tn=n(75359);let tr=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{position:"relative",width:360,height:240,perspective:"400px",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"10px","@keyframes cardB":{"0%,40%":{transform:"translate3d(0,20px,0)",zIndex:1},"45%":{transform:"translate3d(-115px,0,0)",zIndex:1},"45.1%":{zIndex:2},"50%,90%":{transform:"translate3d(0,-20px,40px)",zIndex:2},"95%":{transform:"translate3d(115px,0,0)",zIndex:2},"95.1%":{zIndex:1},"100%":{transform:"translate3d(0,20px,0)",zIndex:1}},"@keyframes cardA":{"0%,40%":{transform:"translate3d(0,-20px,40px)",zIndex:2},"45%":{transform:"translate3d(115px,0,0)",zIndex:2},"45.1%":{zIndex:1},"50%,90%":{transform:"translate3d(0,20px,0)",zIndex:1},"95%":{transform:"translate3d(-115px,0,0)",zIndex:1},"95.1%":{zIndex:2},"100%":{transform:"translate3d(0,-20px,40px)",zIndex:2}}}}),tl=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{position:"absolute",width:180,height:140,borderRadius:"16px",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",willChange:"transform"}}),ti=(0,u.Ay)(tl)(e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, rgba(140,90,255,0.55), rgba(60,130,255,0.45))",boxShadow:"0 18px 40px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.25)",animation:"cardA 4s linear infinite"}}),to=(0,u.Ay)(tl)(e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, rgba(80,140,255,0.55), rgba(30,70,160,0.45))",boxShadow:"0 22px 44px rgba(0,0,0,0.32), inset 0 1px 0 rgba(255,255,255,0.28)",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",padding:"10px",gap:"5px",alignContent:"center",justifyContent:"center",animation:"cardB 4s linear infinite"}}),ts=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}});function ta(){return(0,r.jsxs)(tr,{children:[(0,r.jsx)(ti,{children:(0,r.jsx)(tn.A,{})}),(0,r.jsxs)(to,{children:[(0,r.jsx)(ts,{children:(0,r.jsx)(e9.A,{sx:{fontSize:"50px",fill:"#fff"}})}),(0,r.jsx)(ts,{children:(0,r.jsx)(te.A,{sx:{fontSize:"50px",fill:"#fff"}})}),(0,r.jsx)(ts,{children:(0,r.jsx)(tt.A,{sx:{fontSize:"50px",fill:"#fff"}})})]})]})}let tc=e=>{let{isOpen:t=!1,onOpen:n=()=>{}}=e,{getDeviceInfo:l}=(0,c.P)(),{i18n:o}=(0,i.B)();(0,a.useEffect)(()=>{t&&"function"==typeof n&&n()},[t]);let s="".concat("macos"===l().os?"Shift ⌘ ":"Ctrl+Shift+","Backspace");return t?(0,r.jsxs)(et.A,{open:!0,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,r.jsx)(J.A,{children:o.t("You shall pass!")}),(0,r.jsxs)(Z.A,{children:[(0,r.jsx)(er.A,{icon:(0,r.jsx)(e1.A,{}),severity:"success",children:o.t("You are about to master using this application in a few seconds.")}),(0,r.jsx)(d.A,{sx:{mt:6,position:"relative"},className:"pop",children:(0,r.jsxs)(er.A,{icon:(0,r.jsx)(e0.A,{className:"zoom-in"}),severity:"info",children:[o.t("Toggle pass-through with this shortcut:")," ",(0,r.jsx)("b",{children:s})]})}),(0,r.jsxs)(d.A,{sx:{mt:8,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",flexDirection:"column"},children:[(0,r.jsx)(ta,{}),(0,r.jsx)(e8,{sx:{transform:"scale(1.5)",my:8}})]})]})]}):null};var tu=n(81041),td=n(60999),tx=n(66766),tp=n(61293),th=n(79701),tm=n(95978),tf=n(46320),tg=n(71015),tj=n(20003);function tv(){let e=(0,x._)(["\n0%   { transform: scale(0.2); opacity: 0; }\n100% { transform: scale(1); opacity: 1; }"]);return tv=function(){return e},e}function tA(){let e=(0,x._)(["\n0%   { transform: scale(0.1) translateY(10rem); opacity: 0; }\n100% { transform: scale(1) translateY(0); opacity: 1; }"]);return tA=function(){return e},e}let ty=(0,p.i7)(tv()),tb=(0,p.i7)(tA()),tw=(0,u.Ay)(tf.A)(e=>{let{theme:t}=e;return{position:"absolute",right:"-10rem",bottom:"-10rem",width:"35rem",height:"35rem",zIndex:1,opacity:.1}}),tS=(0,u.Ay)("pre")(e=>{let{theme:t}=e;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}}),tk=(0,u.Ay)(en.A)(e=>{let{theme:t,index:n=0}=e;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(tb," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}}),tI=(0,u.Ay)(tu.Ay)(e=>{let{theme:t,index:n=0}=e;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(ty," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}}),tC=e=>{var t,n,l,s,c;let{isOpen:u=!1,onOpen:d=()=>{},onClose:x=()=>{}}=e,{i18n:p}=(0,i.B)(),h=(0,H.A)(),[m,f]=(0,a.useState)({});(0,a.useEffect)(()=>{u&&"function"==typeof d&&d()},[u]),(0,a.useEffect)(()=>{let e=setTimeout(async()=>{var e,t;let n=y.A.version,r=await (null==(e=window.sdk)?void 0:e.ipc.main.getProcessVersions()),l=await (null==(t=window.sdk)?void 0:t.ipc.device.getSerialNumber());f({...r,app:n,serialNumber:l})},150);return()=>clearTimeout(e)},[]);let g=()=>{u&&"function"==typeof x&&x()},j=async()=>{var e;o.o.info(p.t("Navigating to licenses..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("https://github.com/oglama/dos/blob/main/NOTICE.md"))},v=async()=>{var e;o.o.info(p.t("Navigating to Terms of Service..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("".concat(y.A.siteUrl,"/terms-of-service/")))},A=async()=>{var e;o.o.info(p.t("Navigating to my computers..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("".concat(y.A.siteUrl,"/#/tab:computers")))},b=[{icon:(0,r.jsx)(ep.A,{color:"inherit",fontSize:"large"}),key:"serialNumber",name:p.t("Serial Number"),version:null!=(t=m.serialNumber)?t:null,tooltip:p.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard.")},{icon:(0,r.jsx)(th.A,{color:"warning",fontSize:"large"}),key:"chrome",name:"Chromium",version:null!=(n=m.chrome)?n:null},{icon:(0,r.jsx)(tx.A,{color:"primary",fontSize:"large"}),key:"electron",name:"Electron.js",version:null!=(l=m.electron)?l:null},{icon:(0,r.jsx)(tj.A,{color:"success",fontSize:"large"}),key:"node",name:"Node.js",version:null!=(s=m.node)?s:null},{icon:(0,r.jsx)(tn.A,{size:35,animate:!0}),key:"dos",name:"Draw on Screen",version:null!=(c=m.app)?c:null}];return u?(0,r.jsxs)(et.A,{open:!0,onClose:g,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,r.jsx)(tw,{color:"action",className:"rotate"}),(0,r.jsx)(J.A,{sx:{position:"relative",zIndex:2},children:p.t("About Draw on Screen")}),(0,r.jsx)(Z.A,{sx:{position:"relative",zIndex:2},children:(0,r.jsx)(td.A,{children:b.map((e,t)=>{var n;return(0,r.jsxs)(tI,{index:t,children:[e.icon,(0,r.jsx)(Q.A,{variant:"body2",sx:{mx:2},children:e.name}),e.version?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:null!=(n=e.tooltip)?n:null,placement:"top",children:(0,r.jsx)(tS,{children:e.version})}),(0,r.jsx)(ee.A,{title:p.t("Click to copy"),placement:"top",children:(0,r.jsx)($.A,{onClick:()=>((e,t,n)=>{o.o.info("serialNumber"===e?p.t("Copied computer serial number to clipboard"):p.t("Copied {{name}} version to clipboard",{name:t}),null,!1),h.copy("serialNumber"===e?n:"".concat(t," v").concat(n))})(e.key,e.name,e.version),children:(0,r.jsx)(ed.A,{fontSize:"small"})})}),"serialNumber"===e.key?(0,r.jsx)(ee.A,{title:p.t("Go to my computers"),placement:"top",children:(0,r.jsx)($.A,{onClick:()=>A(),children:(0,r.jsx)(tg.A,{fontSize:"small"})})}):null]}):(0,r.jsx)(eW.A,{sx:{width:"15rem",mt:2},spacing:0})]},"".concat(t,"-").concat(e.key))})})}),(0,r.jsxs)(q.A,{sx:{position:"relative",zIndex:2},children:[(0,r.jsx)(tk,{index:5,onClick:j,startIcon:(0,r.jsx)(tm.A,{}),children:p.t("Licenses")}),(0,r.jsx)(tk,{index:7,onClick:v,startIcon:(0,r.jsx)(tp.A,{}),children:p.t("Terms")}),(0,r.jsx)(en.A,{color:"secondary",onClick:g,children:p.t("Close")})]})]}):null},tz=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{position:"relative",pointerEvents:"auto",zIndex:4}}),tE=()=>{var e;let{onDisplayInfo:t,onDialog:n,dialogSet:i,getTutorialStep:o,setTutorialStep:s}=(0,c.P)(),[u,d]=(0,a.useState)(null),x=(0,l.A)(),p=()=>{i(null)};(0,a.useEffect)(()=>{let e=t(async e=>{let{info:t}=e;t.passThru&&p(),t.passThru&&t.onPassThru&&0===o()&&s(1)}),r=n(e=>d(e));return()=>{e(),r()}},[]),(0,a.useEffect)(()=>{var e;x.user&&y.A.irc.WINDOW_MAIN===(null==(e=window.sdk)?void 0:e.irc.winName)&&0===o()&&i("dialog:pass-thru")},[x.user]);let h=null!=(e=({"dialog:about":tC,"dialog:profile":e$,"dialog:pass-thru":tc,"dialog:subscription":eb})[u])?e:null;return(0,r.jsx)(tz,{children:h?(0,r.jsx)(h,{isOpen:!0,onClose:p}):null})};var tT=n(97578),tO=n(23820),tP=n(25999);let tR=(0,u.Ay)(d.A)(e=>{var t,n;let{theme:r,color:l}=e;return{backgroundColor:r.palette.background.paper,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,height:"100%",width:"30%",backgroundColor:null!=(n=null==(t=r.palette[l])?void 0:t.main)?n:r.palette.primary.main,animation:"progress 1.5s infinite",willChange:"transform"},"@keyframes progress":{"0%":{transform:"translateX(-100%) scaleX(1)"},"70%":{transform:"translateX(200%) scaleX(1.5)"},"100%":{transform:"translateX(350%) scaleX(1)"}}}}),tN=e=>{let{color:t="primary",variant:n="determinate",value:l=0,sx:i={}}=e;return("object"!=typeof i||null===i)&&(i={}),i={width:"100%",height:"4px",...i},["determinate","buffer"].includes(n)?(0,r.jsx)(tP.A,{sx:i,color:t,variant:n,value:l}):(0,r.jsx)(tR,{sx:i,color:t})},tL=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"250px",height:"40px",position:"relative",display:"flex",alignItems:"center",justifyContent:"start",paddingLeft:t.spacing(2),paddingRight:t.spacing(2),borderRadius:0,textTransform:"none",textAlign:"left"}}),tM=(0,u.Ay)(Q.A)(e=>{let{theme:t}=e;return{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"180px"}}),tB=e=>{var t;let{children:n}=e,{onUpdaterInfo:l,getUpdaterInfo:s,onUpdaterStatus:u,getUpdaterStatus:x}=(0,c.P)(),{i18n:p}=(0,i.B)(),[h,m]=(0,a.useState)(null),[f,g]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),[A,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{g(s());let e=l(e=>{let{info:t}=e;return g(t)});m(x());let t=u(e=>{let{status:t}=e;return m(t)});return(async()=>{var e;return y("linux"===await (null==(e=window.sdk)?void 0:e.ipc.device.getOS()))})(),()=>{e(),t()}},[]),(0,a.useEffect)(()=>{var e;null==(e=window.sdk)||e.ipc.updater.check()},[]),(0,a.useEffect)(()=>{!(null==h?void 0:h.working)&&(null==h?void 0:h.error)&&o.o.error("".concat(p.t("Update cancelled")," ").concat(h.error),{duration:5e3})},[h]);let b=async()=>{v(!0)},w=async()=>{var e;await (null==(e=window.sdk)?void 0:e.ipc.updater.install()),v(!1)};return(null==f?void 0:f.version)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(tL,{children:[!(null==f?void 0:f.filePath)||(null==h?void 0:h.working)?(0,r.jsx)(d.A,{sx:{ml:2,mr:4},children:(null==h?void 0:h.working)?(0,r.jsx)(tO.A,{className:"rotate-360"}):(0,r.jsx)(em.A,{color:"primary"})}):null,(0,r.jsx)(d.A,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"start"},children:!(null==f?void 0:f.filePath)||(null==h?void 0:h.working)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tM,{variant:"caption",color:"inherit",children:(null==h?void 0:h.working)?p.t("Updating to v.{{version}}...",{version:f.version}):p.t("Downloading v.{{version}}...",{version:f.version})}),(0,r.jsx)(tN,{color:"primary",sx:{mt:1},variant:(null==h?void 0:h.working)?"indeterminate":"determinate",value:(null==h?void 0:h.working)?null:null!=(t=null==f?void 0:f.progress)?t:0})]}):(0,r.jsx)(ee.A,{title:p.t("Update to version {{version}}",{version:f.version}),placement:"top",children:(0,r.jsx)(en.A,{fullWidth:!0,size:"small",variant:"outlined",startIcon:(0,r.jsx)(em.A,{}),onClick:()=>b(),children:p.t("Update")})})})]}),j?(0,r.jsxs)(et.A,{open:!0,onClose:()=>!(null==h?void 0:h.working)&&v(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:1}},children:[(0,r.jsx)(J.A,{children:(0,r.jsx)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(Q.A,{variant:"h3",sx:{ml:4},children:(null==h?void 0:h.working)?p.t("Updating to v.{{version}}...",{version:f.version}):p.t("Install update")})})}),(0,r.jsx)(Z.A,{children:(null==h?void 0:h.working)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(er.A,{severity:"warning",sx:{mb:4},children:p.t("Please do not close this window until the update is complete.")}),(0,r.jsx)(eW.A,{sx:{mb:-4}})]}):(0,r.jsx)(er.A,{severity:"info",icon:(0,r.jsx)(tT.A,{}),children:A?p.t("Updating to version {{version}} requires root privileges. Please enter your root password in the next dialog.",{version:f.version}):p.t("Update to version {{version}} and restart the application.",{version:f.version})})}),(null==h?void 0:h.working)?null:(0,r.jsxs)(q.A,{children:[(0,r.jsx)(en.A,{color:"secondary",variant:"text",onClick:()=>v(!1),children:p.t("Cancel")}),(0,r.jsx)(en.A,{size:"small",className:"pop",startIcon:(0,r.jsx)(em.A,{}),color:"primary",onClick:()=>w(),variant:"contained",children:p.t("Update and restart")})]})]}):null]}):n};var tD=n(68697);function tF(){let{webcamGetConfigId:e,onWebcamConfigId:t}=(0,c.P)(),{getWebcamValue:n}=(0,s.t)(),l=(0,ef.A)(),[i,o]=(0,a.useState)(e());return(0,a.useEffect)(()=>{o(e());let n=t(e=>{let{configId:t}=e;return o(t)});return()=>n()},[]),n(i,"id")?(0,r.jsx)(d.A,{sx:{position:"absolute",top:"-6px",right:"-6px",width:"15px",height:"15px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fontSize:"0.65rem",background:l.palette.background.default,border:"1px solid ".concat(l.palette.divider),zIndex:2},children:i}):null}var tX=n(63684),tU=n(95578),tY=n(51260),tK=n(99833),t_=n(19678),tW=n(81579),tH=n(32750),tV=n(66786),tG=n(31763),tq=n(26304),tZ=n(42401),tJ=n(76543),tQ=n(81793),t$=n(86914),t0=n(8111),t1=n(67601);let t2=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}}),t5=e=>{if(y.A.orientation.LANDSCAPE===e)return t$.A;if(y.A.orientation.PORTRAIT===e)return tQ.A;let t="".concat(e).split(":").map(e=>parseInt(e,10)).filter(e=>Number.isInteger(e));return Array.isArray(t)&&2===t.length?t[0]===t[1]?t1.A:t[0]<t[1]?tQ.A:t$.A:t0.A};function t3(e){var t;let{settingKey:n,title:l=null,sx:o={}}=e,{settings:c,saveSettings:u}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,h]=(0,a.useState)(null!=(t=c[n])?t:y.A.orientation.LANDSCAPE);("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(c[n]!==p&&u({[n]:p})),50);return()=>clearTimeout(e)},[p]);let m=Object.values(y.A.orientation),f=e=>y.A.orientation.LANDSCAPE===e?x.t("Landscape"):y.A.orientation.PORTRAIT===e?x.t("Portrait"):e;return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e&&m.includes(e)){let t=t5(e);return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(t2,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:f(e)})]})}return(0,r.jsx)(Q.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>h(e.target.value),children:m.map(e=>{let t=t5(e);return(0,r.jsx)(eR.A,{value:e,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(t2,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:f(e)})]})},e)})})})}var t4=n(19400),t6=n(15959),t7=n(80722),t8=n(73281),t9=n(91247),ne=n(40577),nt=n(28417),nn=n(61548),nr=n(62592);let nl=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:t.spacing(.5),padding:t.spacing(1)}});function ni(e){var t;let{settingKey:n,title:l=null,sx:o={}}=e,{onDisplayInfo:u,onToolbarVisible:d}=(0,c.P)(),{settings:x,saveSettings:p}=(0,s.t)(),{i18n:h}=(0,i.B)(),[m,f]=(0,a.useState)(null!=(t=x[n])?t:"bottom-right"),[g,j]=(0,a.useState)(null),v=()=>{x[n]!==m&&p({[n]:m})};(0,a.useEffect)(()=>{let e=u(()=>j(null)),t=d(()=>j(null));return()=>{e(),t()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(v,50);return()=>clearTimeout(e)},[m]);let A=[{value:"top-left",Icon:t8.A,label:h.t("Top-left")},{value:"top",Icon:nr.A,label:h.t("Top")},{value:"top-right",Icon:t7.A,label:h.t("Top-right")},{value:"left",Icon:nn.A,label:h.t("Left")},{value:"center",Icon:t9.A,label:h.t("Center")},{value:"right",Icon:ne.A,label:h.t("Right")},{value:"bottom-left",Icon:t6.A,label:h.t("Bottom-left")},{value:"bottom",Icon:nt.A,label:h.t("Bottom")},{value:"bottom-right",Icon:t4.A,label:h.t("Bottom-right")}],y=A.find(e=>e.value===m);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(en.A,{tabIndex:-1,size:"small",variant:"text",color:"inherit",startIcon:y&&(0,r.jsx)(y.Icon,{fontSize:"small"}),onClick:e=>j(e.currentTarget),sx:{ml:2,textTransform:"none",...o},children:(0,r.jsx)(Q.A,{sx:{ml:2,fontSize:"0.8rem"},children:y?y.label:h.t("Select an option")})})}),(0,r.jsx)(eM.A,{anchorEl:g,open:!!g,sx:{mt:-1},onClose:()=>j(null),transformOrigin:{vertical:"bottom",horizontal:"left"},anchorOrigin:{vertical:"top",horizontal:"left"},MenuListProps:{disablePadding:!0},children:(0,r.jsx)(nl,{children:A.map(e=>{let{value:t,Icon:n,label:l}=e;return(0,r.jsx)(ee.A,{title:l,placement:"top",children:(0,r.jsx)(en.A,{tabIndex:-1,onClick:()=>{f(t),j(null)},sx:{"&.MuiButton-root":{p:1},position:"relative",minWidth:"30px",flexGrow:0,m:1},variant:t===m?"contained":"text",color:t===m?"primary":"inherit",children:(0,r.jsx)(n,{fontSize:"small"})})},t)})})})]})}function no(e){var t;let{settingKey:n,title:l=null,sx:o={}}=e,{onWebcamList:u,webcamGetList:x}=(0,c.P)(),{settings:p,saveSettings:h}=(0,s.t)(),{i18n:m}=(0,i.B)(),[f,g]=(0,a.useState)(x()),[j,v]=(0,a.useState)(null!=(t=p[n])?t:"");return("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{g(x());let e=u(async e=>{let{list:t}=e;g(t)});return()=>{e()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(p[n]!==j&&h({[n]:j})),50);return()=>clearTimeout(e)},[j]),f.length?(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsxs)(tJ.A,{displayEmpty:!0,renderValue:e=>{if("string"==typeof e){let t=f.find(t=>t.deviceId===e);if(t)return(0,r.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,r.jsx)(tD.A,{fontSize:"small",sx:{mr:3,ml:-2}}),(0,r.jsx)(ee.A,{title:t.label,placement:"bottom",children:(0,r.jsx)(Q.A,{variant:"caption",color:"inherit",sx:{display:"inline-block",maxWidth:"250px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.label})})]})}return(0,r.jsx)(Q.A,{variant:"caption",sx:{pl:2},children:m.t("Select a webcam")})},value:j,sx:{"&.MuiInput-root:before":{display:"none"},px:0,borderRadius:1,height:"32px",...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>v(e.target.value),children:[f.map(e=>{let{deviceId:t,label:n}=e;return(0,r.jsxs)(eR.A,{value:t,children:[(0,r.jsx)(tD.A,{fontSize:"small",sx:{mr:2}}),(0,r.jsx)(Q.A,{variant:"caption",color:"inherit",children:n})]},t)}),(0,r.jsxs)(eR.A,{value:"",children:[(0,r.jsx)(tH.A,{fontSize:"small",sx:{mr:2}}),(0,r.jsx)(Q.A,{variant:"caption",color:"inherit",children:m.t("No webcam")})]})]})}):(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(tH.A,{fontSize:"small",sx:{mr:2}}),(0,r.jsx)(Q.A,{variant:"caption",children:m.t("No webcam available")})]})}var ns=n(89879);function na(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[h,m]=(0,a.useState)(null!=(t=u[n])?t:20);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(h)&&u[n]!==h&&x({[n]:h})),50);return()=>clearTimeout(e)},[h]);let f={xxs:{value:20},xs:{value:30},sm:{value:40},md:{value:50},lg:{value:60},xl:{value:70},"2xl":{value:80},"3xl":{value:90},"4xl":{value:100}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{value:e}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(ns.A,{fontSize:"small"}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"H: ".concat(e,"%")})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:h,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{value:t}=e;return(0,r.jsx)(eR.A,{value:t,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(ns.A,{fontSize:"small"}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(t,"%")})]})},t)})})})}var nc=n(33907),nu=n(31821);let nd=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nx(e){var t;let{settingKey:n,horizontal:l=!1,title:o=null,options:c=null,sx:u={},disabled:x=!1}=e,{settings:p,saveSettings:h}=(0,s.t)(),{i18n:m}=(0,i.B)(),[f,g]=(0,a.useState)(null!=(t=p[n])?t:20);("object"!=typeof u||null===u)&&(u={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(f)&&p[n]!==f&&h({[n]:f})),50);return()=>clearTimeout(e)},[f]);let j={xs:{value:0},sm:{value:5},md:{value:10},lg:{value:15},xl:{value:20}},v="object"==typeof c&&null!==c&&Object.keys(c).length?Object.keys(c).map(e=>{let t=null;return"object"==typeof j[e]&&((t={...j[e]}).value=c[e]),t}).filter(e=>null!==e):Object.values(j);return(0,r.jsx)(ee.A,{title:o,placement:"bottom",children:(0,r.jsx)(d.A,{children:(0,r.jsx)(tJ.A,{disabled:x,displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(v).find(t=>t.value===e);if("object"==typeof t){let{value:e}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nd,{children:l?(0,r.jsx)(nc.A,{fontSize:"small"}):(0,r.jsx)(nu.A,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(l?"MX":"MY",": ").concat(e,"%")})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:m.t("Select an option")})},value:f,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...u},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>g(e.target.value),children:v.map(e=>{let{value:t}=e;return(0,r.jsx)(eR.A,{value:t,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[l?(0,r.jsx)(nc.A,{fontSize:"small"}):(0,r.jsx)(nu.A,{fontSize:"small"}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(t,"%")})]})},t)})})})})}var np=n(78376),nh=n(82175);let nm=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nf(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[h,m]=(0,a.useState)(null!=(t=u[n])?t:20);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(h)&&u[n]!==h&&x({[n]:h})),50);return()=>clearTimeout(e)},[h]);let f={none:{value:0},xs:{value:5},sm:{value:10},md:{value:20},lg:{value:40},xl:{value:80}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t)return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nm,{children:t.value>0?(0,r.jsx)(np.A,{}):(0,r.jsx)(nh.A,{})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:t.value>0?"\xd8 ".concat(t.value,"px"):p.t("Sharp corners")})]})}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:h,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>(0,r.jsx)(eR.A,{value:e.value,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nm,{children:e.value>0?(0,r.jsx)(np.A,{}):(0,r.jsx)(nh.A,{})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:e.value>0?"\xd8 ".concat(e.value,"px"):p.t("Sharp corners")})]})},e.value))})})}var ng=n(34785);function nj(){let e=(0,x._)(["\n0%   { transform: scale(0.1) translateY(10rem); opacity: 0; width: 0px; margin-left: 0px; }\n100% { transform: scale(1) translateY(0); opacity: 1; width: 30px; margin-left: 8px; }"]);return nj=function(){return e},e}function nv(){let e=(0,x._)(["\n0%   { transform: scale(0.1) translateY(2rem); opacity: 0; width: 0px; margin-left: 0px; }\n100% { transform: scale(1) translateY(0); opacity: 1; width: 60px; margin-left: 8px; }"]);return nv=function(){return e},e}let nA=(0,p.i7)(nj()),ny=(0,p.i7)(nv());function nb(e){let{title:t,Icon:n,children:l,index:i=0,chip:o=null,label:s=null,Bubble:u=null,double:x=!1,startIcon:p=null,disabled:h=!1,useCursor:m=!1,onClick:f=()=>{},anchorRight:g=!1,overflowVisible:j=!1}=e,{onDisplayInfo:v,onToolbarVisible:A,onWebcamList:y}=(0,c.P)(),b=(0,ef.A)(),[w,S]=(0,a.useState)(null),[k,I]=(0,a.useState)(!1);n||(n=ng.A),(0,a.useEffect)(()=>{let e=y(()=>S(null)),t=v(e=>{let{info:t}=e;S(null),I(t.passThru)}),n=A(()=>S(null));return()=>{e(),t(),n()}},[]);let C=e=>{S(l?e.currentTarget:null),"function"==typeof f&&f(e)},z=!k&&(t||o)?(0,r.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[o?(0,r.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:o}):null,t?(0,r.jsx)(d.A,{sx:{...o?{mt:1}:{}},children:t}):null]}):null;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:z,placement:"bottom",children:(0,r.jsx)(d.A,{children:(0,r.jsxs)(d.A,{"data-use-cursor":m?"true":null,sx:{animation:"".concat(x?ny:nA," ").concat(x?350:750,"ms ease-in-out forwards"),animationDelay:"".concat(i*(x?50:100),"ms"),justifyContent:"center",transformOrigin:"50%",flexDirection:"row",position:"relative",display:"flex"},style:{animationDirection:k?"reverse":"normal",marginLeft:k?"8px":0,opacity:+!!k,width:k?x?60:30:0},children:[null!==u?(0,r.jsx)(u,{}):null,l?(0,r.jsx)(en.A,{tabIndex:-1,"aria-label":"button-".concat(i),startIcon:p,onClick:C,variant:w?"contained":"outlined",color:w?"primary":"inherit",disabled:h,size:"small",sx:{borderColor:b.palette.divider,"&.MuiButton-root":{p:1},position:"relative",minWidth:"30px",flexGrow:0,zIndex:1},children:(0,r.jsx)(n,{fontSize:"small",color:"inherit"})}):(0,r.jsx)($.A,{tabIndex:-1,"aria-label":"button-".concat(i),onClick:l?e=>S(e.currentTarget):C,disabled:h,color:"inherit",size:"small",sx:{"&:hover":{transform:"scale(1.1)"},transition:"transform 100ms linear",position:"relative",zIndex:1},children:(0,r.jsx)(n,{fontSize:"small",color:"inherit"})})]},"".concat(k))})}),l?(0,r.jsx)(eM.A,{transformOrigin:{vertical:"bottom",horizontal:g?"right":"left"},anchorOrigin:{vertical:"top",horizontal:g?"right":"left"},onClose:()=>S(null),open:!!w,anchorEl:w,sx:{mt:x?-3:-4,...j?{"& .MuiPaper-root":{overflow:"visible",maxHeight:"none"}}:{}},children:(0,r.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",px:3,py:1},children:[null!==s?(0,r.jsx)(d.A,{sx:{mb:2},children:(0,r.jsx)(Q.A,{variant:"caption",sx:{textTransform:"uppercase"},children:s})}):null,(0,r.jsx)(d.A,{sx:{justifyContent:"start",position:"relative",alignItems:"center",display:"flex"},children:l})]})}):null]})}function nw(e){var t,n,l;let{configId:o,sx:u={}}=e,{webcamGetList:x,onWebcamList:p,webcamSetConfigId:h,onWebcamConfigId:m,webcamGetConfigId:f}=(0,c.P)(),{getWebcamKey:g,getWebcamValue:j}=(0,s.t)(),{i18n:v}=(0,i.B)(),[A,y]=(0,a.useState)(x()),[b,w]=(0,a.useState)(f()),S=j(o,"placement"),k=j(o,"id");("object"!=typeof u||null===u)&&(u={}),(0,a.useEffect)(()=>{y(x());let e=p(async e=>{let{list:t}=e;y(t)});w(f());let t=m(e=>{let{configId:t}=e;return w(t)});return()=>{e(),t()}},[]);let I=null!=(t=({1:tV.A,2:tG.A,3:tq.A,4:tZ.A})[o])?t:tV.A,C=null!=(n=({1:tY.A,2:tK.A,3:t_.A,4:tW.A})[o])?n:tY.A,z=(0,r.jsx)(e7,{final:!0,children:(0,r.jsx)(C,{fontSize:"small"})}),E=k?b===o?(0,r.jsx)(tX.A,{sx:{ml:1}}):(0,r.jsx)(tU.A,{sx:{ml:1}}):(0,r.jsx)(tH.A,{sx:{ml:1}}),T=null!=(l=({1:v.t("Toggle 1st configuration"),2:v.t("Toggle 2nd configuration"),3:v.t("Toggle 3rd configuration"),4:v.t("Toggle 4th configuration")})[o])?l:v.t("Toggle configuration"),O=-1!==S.indexOf("left")||-1!==S.indexOf("right"),P=-1!==S.indexOf("top")||-1!==S.indexOf("bottom");return(0,r.jsx)(nb,{anchorRight:!0,onClick:()=>h(o),title:"".concat(T," (F").concat(o,")"),startIcon:E,index:o-1,chip:z,Icon:I,double:!0,children:(0,r.jsxs)(d.A,{display:"flex",flexDirection:"column",children:[(0,r.jsx)(d.A,{sx:{mb:3},children:(0,r.jsx)(Q.A,{variant:"caption",sx:{textTransform:"uppercase"},children:v.t("Webcam configuration #{{configId}}",{configId:o})})}),(0,r.jsx)(no,{settingKey:g(o,"id")}),A.length&&k?(0,r.jsxs)(d.A,{display:"flex",sx:{mt:3},children:[(0,r.jsx)(ni,{sx:{ml:0},settingKey:g(o,"placement"),title:v.t("Placement")}),(0,r.jsx)(na,{settingKey:g(o,"height"),title:v.t("Height")}),(0,r.jsx)(t3,{settingKey:g(o,"orientation"),title:v.t("Aspect ratio")})]}):null,A.length&&k?(0,r.jsxs)(d.A,{display:"flex",sx:{mt:3},children:[(0,r.jsx)(nx,{sx:{ml:0},disabled:!O,settingKey:g(o,"marginX"),title:v.t("Horizontal margins"),horizontal:!0}),(0,r.jsx)(nx,{disabled:!P,settingKey:g(o,"marginY"),title:v.t("Vertical margins")}),(0,r.jsx)(nf,{settingKey:g(o,"radius"),title:v.t("Corner radius")})]}):null]})})}function nS(){let{i18n:e}=(0,i.B)();return(0,r.jsx)(nb,{index:7,Icon:tD.A,overflowVisible:!0,Bubble:tF,label:e.t("Webcam configurations"),title:"".concat(e.t("Webcam configurations")),children:(0,r.jsx)(d.A,{display:"flex",sx:{ml:-3,mt:1},children:[1,2,3,4].map(e=>(0,r.jsx)(nw,{configId:e,sx:{...1===e?{ml:0}:{}}},e))})})}var nk=n(28137),nI=n(99804),nC=n(89612),nz=n(99985);let nE=(0,u.Ay)(en.A)(e=>{let{theme:t}=e;return{zIndex:1,position:"relative",minWidth:"fit-content",flexGrow:0,border:"1px solid ".concat("light"===t.palette.mode?"#ccc":"#333"),backgroundColor:"#ffffff",backgroundImage:"linear-gradient(45deg, #cccccc 25%, transparent 25%), linear-gradient(-45deg, #cccccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #cccccc 75%), linear-gradient(-45deg, transparent 75%, #cccccc 75%)",backgroundSize:"10px 10px",backgroundPosition:"0 0, 0 5px, 5px -5px, -5px 0px","&.MuiButton-root":{padding:0},"&>div":{width:"24px",height:"24px",borderRadius:"4px"},"&>div>div":{position:"absolute",top:"-6px",right:"-6px",width:"15px",height:"15px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fontSize:"0.65rem",background:t.palette.background.paper,border:"1px solid ".concat(t.palette.divider),zIndex:2}}});function nT(e){var t;let{settingKey:n,title:l=null,letter:i=null,sx:o={}}=e,{onDisplayInfo:u,onToolbarVisible:x}=(0,c.P)(),{settings:p,saveSettings:h}=(0,s.t)(),m=(0,ef.A)(),[f,g]=(0,a.useState)(null!=(t=p[n])?t:"#fff"),[j,v]=(0,a.useState)(null);("object"!=typeof o||null===o)&&(o={});let A=()=>{"string"==typeof n&&"string"==typeof f&&[4,7,9].includes(f.length)&&f.match(/^#[\da-f]+$/i)&&p[n]!==f.toLowerCase()&&h({[n]:f.toLowerCase()})};return(0,a.useEffect)(()=>{let e=u(()=>v(null)),t=x(()=>v(null));return()=>{e(),t()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>A(),250);return()=>clearTimeout(e)},[f]),(0,r.jsxs)(d.A,{sx:{position:"relative"},children:[(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(nE,{sx:{...o},color:"inherit",onClick:e=>v(e.currentTarget),variant:"outlined",children:(0,r.jsx)("div",{style:{backgroundColor:f},children:"string"==typeof i&&i.length?(0,r.jsx)("div",{children:i[0]}):null})})}),(0,r.jsx)(eM.A,{anchorEl:j,open:!!j,onClose:()=>void(v(null),A()),anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:{mt:-1},children:(0,r.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",px:5,py:3},children:[l?(0,r.jsx)(Q.A,{variant:"caption",sx:{textTransform:"uppercase",mb:3},children:l}):null,(0,r.jsx)(nz.dp,{onChange:g,color:f}),(0,r.jsx)(nz.HC,{color:f,onChange:g,alpha:!0,style:{background:m.palette.background.default,color:m.palette.text.primary,border:"1px solid ".concat(m.palette.divider),minWidth:"50px",width:"200px",padding:"10px",fontSize:"1rem",marginTop:"15px",borderRadius:"10px"}})]})})]})}function nO(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Space ":"Space+").concat(t.t("Swipe"));return(0,r.jsxs)(nb,{index:6,title:"".concat(t.t("Spotlight")," (").concat(n,")"),label:t.t("Spotlight settings"),Icon:nI.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7,{children:(0,r.jsx)(nk.A,{fontSize:"small"})}),(0,r.jsx)(nC.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nT,{settingKey:"spotlightColor",title:t.t("Spotlight color")}),(0,r.jsx)(nf,{settingKey:"spotlightRadius",title:t.t("Corner radius")})]})}var nP=n(70715);let nR=Object.keys(y.A.cursor.sizes).map(e=>parseInt(e,10));function nN(){let{settings:e,saveSettings:t}=(0,s.t)(),{i18n:n}=(0,i.B)();return(0,r.jsx)(nb,{index:0,useCursor:!0,title:n.t("Cursor size"),Icon:nP.A,onClick:()=>{let n=nR.indexOf(e.cursor);++n>=nR.length&&(n=0),t({cursor:nR[n]})}})}var nL=n(13125),nM=n(1954),nB=n(20191);let nD=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nF(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[h,m]=(0,a.useState)(null!=(t=u[n])?t:"");("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(h)&&u[n]!==h&&x({[n]:h})),50);return()=>clearTimeout(e)},[h]);let f={xs:{icon:(0,r.jsx)(nB.A,{fontSize:"small"}),value:2,label:p.t("Extra thin")},sm:{icon:(0,r.jsx)(nB.A,{fontSize:"medium"}),value:4,label:p.t("Thin")},md:{icon:(0,r.jsx)(nB.A,{fontSize:"large"}),value:8,label:p.t("Midweight")},lg:{icon:(0,r.jsx)(t9.A,{fontSize:"small"}),value:12,label:p.t("Thick")},xl:{icon:(0,r.jsx)(t9.A,{fontSize:"medium"}),value:16,label:p.t("Extra thick")},xxl:{icon:(0,r.jsx)(t9.A,{fontSize:"large"}),value:24,label:p.t("Chunky")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[e?(0,r.jsx)(nD,{children:e}):null,(0,r.jsx)(Q.A,{sx:{ml:2*!!e},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:h,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[t?(0,r.jsx)(nD,{children:t}):null,(0,r.jsx)(Q.A,{sx:{ml:2*!!t},variant:"body2",color:"inherit",children:l})]})},n)})})})}var nX=n(54098),nU=n(19563),nY=n(25261);let nK=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function n_(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[h,m]=(0,a.useState)(null!=(t=u[n])?t:0);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isFinite(h)&&u[n]!==h&&x({[n]:h})),50);return()=>clearTimeout(e)},[h]);let f={no:{Icon:nX.A,value:0,label:p.t("No thinning")},sm:{Icon:nY.A,value:.3,label:p.t("Slight thinning")},lg:{Icon:nU.A,value:.6,label:p.t("Heavy thinning")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nK,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:h,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nK,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}function nW(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Esc ":"Esc+").concat(t.t("Swipe"));return(0,r.jsxs)(nb,{index:1,title:"".concat(t.t("Eraser")," (").concat(n,")"),label:t.t("Eraser settings"),Icon:nL.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7,{children:(0,r.jsx)(nM.A,{fontSize:"small"})}),(0,r.jsx)(nC.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nF,{settingKey:"eraserThickness",title:t.t("Eraser thickness")}),(0,r.jsx)(n_,{settingKey:"eraserThinning",title:t.t("Eraser thinning")})]})}var nH=n(49404),nV=n(1879);function nG(){let{settings:e,saveSettings:t}=(0,s.t)(),{i18n:n}=(0,i.B)();return(0,r.jsx)(nb,{index:1,title:n.t("Sound"),Icon:e.sound?nV.A:nH.A,onClick:()=>{t({sound:!e.sound}),o.o.info(e.sound?n.t("Sound off"):n.t("Sound on"))}})}var nq=n(40756),nZ=n(56086),nJ=n(692),nQ=n(78813),n$=n(5844),n0=n(49645);let n1=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function n2(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[h,m]=(0,a.useState)(null!=(t=u[n])?t:80);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(h)&&u[n]!==h&&x({[n]:h})),50);return()=>clearTimeout(e)},[h]);let f={vslow:{Icon:n0.A,value:160,label:p.t("Very slow")},slow:{Icon:nJ.A,value:80,label:p.t("Slow")},normal:{Icon:nZ.A,value:40,label:p.t("Normal speed")},fast:{Icon:nQ.A,value:30,label:p.t("Fast")},vfast:{Icon:n$.A,value:25,label:p.t("Very fast")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(n1,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:h,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(n1,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}function n5(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Shift ":"Shift+").concat(t.t("Swipe"));return(0,r.jsxs)(nb,{index:2,title:"".concat(t.t("Laser")," (").concat(n,")"),label:t.t("Laser settings"),Icon:nq.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7,{children:(0,r.jsx)(e5.A,{fontSize:"small"})}),(0,r.jsx)(nC.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nT,{settingKey:"laserColor",title:t.t("Laser color")}),(0,r.jsx)(nF,{settingKey:"laserThickness",title:t.t("Laser thickness")}),(0,r.jsx)(n_,{settingKey:"laserThinning",title:t.t("Laser thinning")}),(0,r.jsx)(n2,{settingKey:"laserDelay",title:t.t("Laser fading speed")})]})}var n3=n(92828),n4=n(54895);function n6(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n={ctrlComma:"(".concat("macos"===e().os?"⌘ ":"Ctrl+",",)"),ctrlQ:"(".concat("macos"===e().os?"⌘ ":"Ctrl+","Q)")};return(0,r.jsx)(nb,{index:0,title:t.t("Toggle toolbar {{ctrlComma}}",n),Icon:n3.A,onClick:()=>{var e;null==(e=window.sdk)||e.ipc.main.setToolbar(!1),o.o.info(t.t("Press {{ctrlComma}} to toggle toolbar, {{ctrlQ}} to quit",n),{duration:4e3})},chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7,{children:"macos"===e().os?(0,r.jsx)(e2.A,{fontSize:"small"}):(0,r.jsx)(e4.A,{fontSize:"small"})}),(0,r.jsx)(e7,{final:!0,children:(0,r.jsx)(n4.A,{fontSize:"small"})})]})})}var n7=n(23975),n8=n(63150);function n9(){let{getDeviceInfo:e,historyUndo:t,onHistory:n}=(0,c.P)(),{i18n:l}=(0,i.B)(),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=n(e=>{let{index:t,total:n}=e;s(n<=0||t<0)});return()=>e()},[]),(0,r.jsx)(nb,{index:0,disabled:o,title:"".concat(l.t("Undo")," (").concat("macos"===e().os?"⌘ ":"Ctrl+","Z)"),Icon:n7.A,onClick:t,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7,{children:"macos"===e().os?(0,r.jsx)(e2.A,{fontSize:"small"}):(0,r.jsx)(e4.A,{fontSize:"small"})}),(0,r.jsx)(e7,{final:!0,children:(0,r.jsx)(n8.A,{fontSize:"small"})})]})})}var re=n(70673);function rt(){let{getDeviceInfo:e,historyRedo:t,onHistory:n}=(0,c.P)(),{i18n:l}=(0,i.B)(),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=n(e=>{let{index:t,total:n}=e;s(n<=0||t>=n-1)});return()=>e()},[]),(0,r.jsx)(nb,{index:1,disabled:o,title:"".concat(l.t("Redo")," (").concat("macos"===e().os?"Shift ⌘ ":"Ctrl+Shift+","Z)"),Icon:re.A,onClick:t,chip:(0,r.jsxs)(r.Fragment,{children:["macos"===e().os?null:(0,r.jsx)(e7,{children:(0,r.jsx)(e4.A,{fontSize:"small"})}),(0,r.jsx)(e7,{children:(0,r.jsx)(e5.A,{fontSize:"small"})}),"macos"===e().os?(0,r.jsx)(e7,{children:(0,r.jsx)(e2.A,{fontSize:"small"})}):null,(0,r.jsx)(e7,{final:!0,children:(0,r.jsx)(n8.A,{fontSize:"small"})})]})})}var rn=n(24360),rr=n(1810);function rl(e){var t;let{title:n=null,sx:l={}}=e,{settings:o,saveSettings:c}=(0,s.t)(),{i18n:u}=(0,i.B)(),[d,x]=(0,a.useState)(null!=(t=o.textFont)?t:"Rancho");("object"!=typeof l||null===l)&&(l={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(o.textFont!==d&&c({textFont:d})),50);return()=>clearTimeout(e)},[d]);let p=["Inconsolata","Inter","Yaldevi","Libre Baskerville","Comic Relief","Pacifico","Dancing Script","Satisfy","Caveat","Rancho","Mansalva","Henny Penny","Permanent Marker"];return(0,r.jsx)(ee.A,{title:n,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>"string"==typeof e&&p.includes(e)?(0,r.jsx)(Q.A,{sx:{fontFamily:e,pl:2},variant:"body1",color:"inherit",children:e}):(0,r.jsx)(Q.A,{variant:"caption",children:u.t("Select an option")}),value:d,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...l},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>x(e.target.value),children:p.map(e=>(0,r.jsx)(eR.A,{value:e,children:(0,r.jsx)(Q.A,{sx:{fontFamily:e},variant:"body1",color:"inherit",children:e})},e))})})}var ri=n(80037),ro=n(29437);let rs=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function ra(e){var t;let{title:n=null,sx:l={}}=e,{settings:o,saveSettings:c}=(0,s.t)(),{i18n:u}=(0,i.B)(),[x,p]=(0,a.useState)(null!=(t=o.textAlignment)?t:"center");("object"!=typeof l||null===l)&&(l={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(o.textAlignment!==x&&c({textAlignment:x})),50);return()=>clearTimeout(e)},[x]);let h=[{Icon:ro.A,value:"left",label:u.t("Left")},{Icon:ri.A,value:"center",label:u.t("Center")},{Icon:ri.A,value:"right",label:u.t("Right")}];return(0,r.jsx)(ee.A,{title:n,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=h.find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(rs,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:u.t("Select an option")})},value:x,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...l},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>p(e.target.value),children:h.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(rs,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}var rc=n(24996),ru=n(38261),rd=n(58086),rx=n(74088),rp=n(83931);let rh=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function rm(e){var t;let{title:n=null,options:l=null,sx:o={}}=e,{settings:c,saveSettings:u}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,h]=(0,a.useState)(null!=(t=c.textSize)?t:54);("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(Number.isInteger(p)&&c.textSize!==p&&u({textSize:p})),50);return()=>clearTimeout(e)},[p]);let m={xs:{Icon:rc.A,value:20,label:x.t("Tiny")},sm:{Icon:rd.A,value:36,label:x.t("Small")},md:{Icon:rx.A,value:54,label:x.t("Midsize")},lg:{Icon:rp.A,value:90,label:x.t("Large")},xl:{Icon:ru.A,value:144,label:x.t("Huge")}},f="object"==typeof l&&null!==l&&Object.keys(l).length?Object.keys(l).map(e=>{let t=null;return"object"==typeof m[e]&&((t={...m[e]}).value=l[e]),t}).filter(e=>null!==e):Object.values(m);return(0,r.jsx)(ee.A,{title:n,placement:"bottom",children:(0,r.jsx)(tJ.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(f).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(rh,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>h(e.target.value),children:f.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(rh,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}function rf(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"⌘ ":"Ctrl+").concat(t.t("Double-tap"));return(0,r.jsxs)(nb,{index:5,title:(0,r.jsxs)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},children:["".concat(t.t("Text")," (").concat(t.t("Double-tap"),")"),(0,r.jsx)("br",{}),"".concat(t.t("Sequence")," (").concat(n,")")]}),label:t.t("Text settings"),Icon:rr.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.A,{color:"inherit",children:"2x"}),(0,r.jsx)(rn.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nT,{settingKey:"textColor",title:t.t("Text color")}),(0,r.jsx)(nT,{settingKey:"textStrokeColor",title:t.t("Stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(rl,{title:t.t("Font family")}),(0,r.jsx)(rm,{title:t.t("Text size")}),(0,r.jsx)(ra,{title:t.t("Justification")})]})}var rg=n(21865);function rj(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"⌘ ":"Ctrl+").concat(t.t("Swipe"));return(0,r.jsxs)(nb,{index:3,title:"".concat(t.t("Line")," (").concat(n,")"),label:t.t("Line settings"),Icon:rg.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7,{children:"macos"===e().os?(0,r.jsx)(e2.A,{fontSize:"small"}):(0,r.jsx)(e4.A,{fontSize:"small"})}),(0,r.jsx)(nC.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nT,{settingKey:"lineColor",title:t.t("Line color")}),(0,r.jsx)(nT,{settingKey:"lineStrokeColor",title:t.t("Line stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(nF,{settingKey:"lineThickness",title:t.t("Line thickness")})]})}var rv=n(7579),rA=n(72295),ry=n(71608),rb=n(23842),rw=n(82491),rS=n(72066),rk=n(24029),rI=n(77312);function rC(){let{settings:e,saveSettings:t}=(0,s.t)(),{onDisplayInfo:n,dialogSet:l,onToolbarVisible:u}=(0,c.P)(),{i18n:d}=(0,i.B)(),[x,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=n(()=>p(null)),t=u(()=>p(null));return()=>{e(),t()}},[]);let h=[{action:()=>l("dialog:subscription"),label:d.t("Subscription"),Icon:ei.A},{action:()=>l("dialog:profile"),label:d.t("Profile"),Icon:rA.A},{action:()=>l("dialog:about"),label:d.t("About"),Icon:ry.A},null,{action:()=>{o.o.success(e.passThruAnimation?d.t("Pass-through animation disabled"):d.t("Pass-through animation enabled"),{},!1),t({passThruAnimation:!e.passThruAnimation})},label:e.passThruAnimation?d.t("Animated pass-through"):d.t("Silent pass-through"),Icon:e.passThruAnimation?rI.A:rk.A},{action:()=>t({mode:"dark"===e.mode?"light":"dark"}),label:"dark"===e.mode?d.t("Dark mode"):d.t("Light mode"),Icon:"dark"===e.mode?rS.A:rw.A}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nb,{index:2,title:d.t("More"),Icon:rb.A,onClick:e=>{p(e.currentTarget)}}),(0,r.jsx)(eM.A,{transformOrigin:{vertical:"bottom",horizontal:"left"},anchorOrigin:{vertical:"top",horizontal:"left"},onClose:()=>p(null),open:!!x,anchorEl:x,sx:{mt:-4},children:h.map((e,t)=>"function"==typeof(null==e?void 0:e.action)?(0,r.jsxs)(eR.A,{sx:{alignItems:"center"},onClick:()=>{e.action(),p(null)},children:[e.Icon?(0,r.jsx)(e.Icon,{fontSize:"small",sx:{mr:3}}):null,(0,r.jsx)(Q.A,{variant:"body2",sx:{color:"inherit"},children:e.label})]},t):(0,r.jsx)(rv.A,{},t))})]})}function rz(){let{onDisplayInfo:e,getDeviceInfo:t}=(0,c.P)(),{i18n:n}=(0,i.B)(),l=(0,ef.A)(),[o,s]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=e(async e=>{let{info:t}=e;return s(t.passThru)});return()=>{t()}},[]);let u="".concat("macos"===t().os?"Shift ⌘ ":"Ctrl+Shift+","Backspace"),x=(0,r.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(e8,{})}),(0,r.jsx)(d.A,{sx:{mt:1},children:"".concat(n.t("Toggle pass-through")," (").concat(u,")")})]});return(0,r.jsx)(ee.A,{title:o?null:x,children:(0,r.jsx)(d.A,{className:o?null:"drag",style:{...o?{pointerEvents:"none"}:{}},children:(0,r.jsx)(tn.A,{delay:50,size:70,grey:o,animate:!0},l.palette.mode)})})}var rE=n(81451);function rT(){let{i18n:e}=(0,i.B)(),t=e.t("Swipe");return(0,r.jsxs)(nb,{index:0,title:"".concat(e.t("Pen")," (").concat(t,")"),label:e.t("Pen settings"),Icon:rE.A,chip:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(nC.A,{fontSize:"small"})}),children:[(0,r.jsx)(nT,{settingKey:"penColor",title:e.t("Pen color")}),(0,r.jsx)(nT,{settingKey:"penStrokeColor",title:e.t("Pen stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(nF,{settingKey:"penThickness",title:e.t("Pen thickness")}),(0,r.jsx)(n_,{settingKey:"penThinning",title:e.t("Pen thinning")})]})}var rO=n(13754),rP=n(25596);function rR(){let{getDeviceInfo:e,historyClear:t}=(0,c.P)(),{i18n:n}=(0,i.B)();return(0,r.jsx)(nb,{index:2,title:"".concat(n.t("New")," (").concat("macos"===e().os?"⌘ ":"Ctrl+","N)"),Icon:rP.A,onClick:()=>t(),chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e7,{children:"macos"===e().os?(0,r.jsx)(e2.A,{fontSize:"small"}):(0,r.jsx)(e4.A,{fontSize:"small"})}),(0,r.jsx)(e7,{final:!0,children:(0,r.jsx)(rO.A,{fontSize:"small"})})]})})}var rN=n(25452);function rL(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Shift ⌘ ":"Ctrl+Shift+").concat(t.t("Swipe"));return(0,r.jsxs)(nb,{index:4,title:"".concat(t.t("Box")," (").concat(n,")"),label:t.t("Box settings"),Icon:rN.A,chip:(0,r.jsxs)(r.Fragment,{children:["macos"===e().os?null:(0,r.jsx)(e7,{children:(0,r.jsx)(e4.A,{fontSize:"small"})}),(0,r.jsx)(e7,{children:(0,r.jsx)(e5.A,{fontSize:"small"})}),"macos"===e().os?(0,r.jsx)(e7,{children:(0,r.jsx)(e2.A,{fontSize:"small"})}):null,(0,r.jsx)(nC.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nT,{settingKey:"boxColor",title:t.t("Border color")}),(0,r.jsx)(nT,{settingKey:"boxStrokeColor",title:t.t("Stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(nT,{settingKey:"boxFillColor",title:t.t("Fill color"),letter:"F",sx:{ml:2}}),(0,r.jsx)(nF,{settingKey:"boxThickness",title:t.t("Border thickness")}),(0,r.jsx)(nf,{settingKey:"boxRadius",title:t.t("Corner radius"),options:{xs:5,sm:10,md:20,lg:40,xl:80}})]})}let rM=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{transition:"width 750ms linear, opacity 250ms linear",marginLeft:t.spacing(1),marginTop:t.spacing(-1),justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden",display:"flex",height:"100%",opacity:0,width:0}});function rB(){let{onDisplayInfo:e,getUpdaterInfo:t,onUpdaterInfo:n,upPassThruXP:l,getPassThruXP:i,onPassThruXP:o}=(0,c.P)(),[s,u]=(0,a.useState)(i()),[d,x]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let r=e(async e=>{let{info:t}=e;x(t.passThru),t.onPassThru&&t.passThru&&l()});h(t());let s=n(e=>{let{info:t}=e;return h(t)});u(i());let a=o(e=>{let{xp:t}=e;u(t)});return()=>{r(),s(),a()}},[]),(null==p?void 0:p.version)||s>=G().max.passThruHints?null:(0,r.jsx)(rM,{style:{width:d?"140px":"0px",opacity:+!!d},children:(0,r.jsx)(e8,{})})}function rD(){let e=(0,x._)(["\n0%   { opacity: 0; margin-left: 0px; }\n100% { opacity: 1; margin-left: 8px; }"]);return rD=function(){return e},e}let rF=(0,p.i7)(rD());function rX(){let{onDisplayInfo:e}=(0,c.P)(),[t,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=e(async e=>{let{info:t}=e;n(t.passThru)});return()=>{t()}},[]);let l=!t;return(0,r.jsx)(rv.A,{orientation:"vertical",sx:{animation:"".concat(rF," 750ms ease-in-out forwards"),position:"relative",height:"20px",zIndex:1},style:{animationDirection:l?"normal":"reverse",marginLeft:l?0:"8px",opacity:+!l}},"".concat(t))}let rU=(0,u.Ay)(eL.A)(e=>{let{theme:t}=e;return{userSelect:"none",position:"relative",zIndex:5,bottom:"100px",overflow:"visible",display:"flex",flexDirection:"row",alignItems:"end",height:"45px",boxShadow:t.shadows[3],"& .drag":{transition:"transform 100ms linear",transformOrigin:"50% 100%",position:"relative","& .dots":{position:"absolute",top:22,right:15,zIndex:11,opacity:0,transition:"opacity 100ms linear"},"&:hover":{transform:"scale(1.1)","& .dots":{opacity:1}}},transition:"opacity 250ms linear, border-radius 500ms linear",paddingLeft:t.spacing(2),paddingRight:t.spacing(2)}});function rY(){var e;let{onDisplayInfo:t,onToolbarVisible:n,canvasEnable:o,dialogSet:s}=(0,c.P)(),{i18n:u}=(0,i.B)(),x=(0,l.A)(),[p,h]=(0,a.useState)({x:0,y:0}),[m,f]=(0,a.useState)(!0),[g,j]=(0,a.useState)(!1),[v,A]=(0,a.useState)(!0),y=(0,a.useRef)({mouseX:0,mouseY:0,x:0,y:0}),b=(0,a.useRef)(!1);(0,a.useEffect)(()=>{let e=e=>{if(!b.current)return;let t=e.clientX-y.current.mouseX,n=e.clientY-y.current.mouseY;h({x:y.current.x+t,y:y.current.y+n})},r=()=>{o(!0),b.current&&(b.current=!1)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",r);let l=t(async e=>{let{info:t}=e;t.onPassThru||h({x:0,y:0}),j(t.passThru)}),i=n(async e=>{let{visible:t}=e;A(t)});return()=>{l(),i(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r)}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>f(v&&!g),250);return()=>clearTimeout(e)},[v,g]);let w=v&&!g;return(0,r.jsxs)(rU,{onMouseDown:e=>{e.target.closest(".drag")&&(o(!1),b.current=!0,y.current={mouseX:e.clientX,mouseY:e.clientY,x:p.x,y:p.y})},style:{transform:"translate(".concat(p.x,"px, ").concat(p.y,"px)"),opacity:v?g?.5:1:0,...m?{}:{pointerEvents:"none"},...w?{}:{borderRadius:"25px"}},children:[(0,r.jsx)(rz,{}),(0,r.jsx)(d.A,{sx:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},children:(null==(e=x.user)?void 0:e.computerEnabled)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(rB,{}),(0,r.jsx)(n9,{}),(0,r.jsx)(rt,{}),(0,r.jsx)(rR,{}),(0,r.jsx)(rX,{}),(0,r.jsxs)(tB,{children:[(0,r.jsx)(rT,{}),(0,r.jsx)(nW,{}),(0,r.jsx)(n5,{}),(0,r.jsx)(rj,{}),(0,r.jsx)(rL,{}),(0,r.jsx)(rf,{}),(0,r.jsx)(nO,{}),(0,r.jsx)(nS,{})]}),(0,r.jsx)(rX,{}),(0,r.jsx)(nN,{}),(0,r.jsx)(nG,{}),(0,r.jsx)(rC,{}),(0,r.jsx)(rX,{}),(0,r.jsx)(n6,{})]}):(0,r.jsx)(en.A,{sx:{ml:2},startIcon:(0,r.jsx)(ex.A,{}),color:"warning",size:"small",onClick:()=>s("dialog:subscription"),children:u.t("Computer disabled")})})]})}let rK=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{display:"flex",width:"100vw",height:"100vh",flexDirection:"column",position:"relative",justifyContent:"end",alignItems:"center"}}),r_=()=>(!function(){let{getDeviceInfo:e,getToolbarVisible:t,historyUndo:n,historyRedo:r,historyClear:l,webcamGetConfigId:u,webcamSetConfigId:d}=(0,c.P)(),{settings:x,getWebcamValue:p}=(0,s.t)(),{i18n:h}=(0,i.B)(),m=(0,a.useRef)(null),f=e=>e===u()?void d(null):p(e,"id")?void d(e):void o.o.error(h.t("No webcam selected for configuration #{{configId}}",{configId:e})),g={F1:()=>f(1),F2:()=>f(2),F3:()=>f(3),F4:()=>f(4),"CommandOrControl+,":()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.setToolbar(!t())},"CommandOrControl+Z":()=>n(),"CommandOrControl+Y":()=>r(),"CommandOrControl+Shift+Z":()=>r(),"CommandOrControl+N":()=>l(),"CommandOrControl+Q":()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.quit()}};(0,a.useEffect)(()=>{let t=t=>{if(!t.isTrusted)return;let n=[];("macos"===e().os?t.metaKey:t.ctrlKey)&&n.push("CommandOrControl"),t.altKey&&n.push("Alt"),t.shiftKey&&n.push("Shift"),["Command","Control","Alt","Shift"].includes(t.key)||n.push(1==="".concat(t.key).length?"".concat(t.key).toUpperCase():t.key);let r=n.join("+");r!==m.current&&(m.current=r,"function"==typeof g[r]&&(g[r](),m.current=null))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[x])}(),(0,r.jsxs)(rK,{children:[(0,r.jsx)(W,{}),(0,r.jsx)(f,{}),(0,r.jsx)(tE,{}),(0,r.jsx)(rY,{})]}));var rW=n(72568);let rH=()=>(0,l.A)().user?(0,r.jsx)(r_,{}):(0,r.jsx)(rW.A,{});rH.guestGuard=!0;let rV=rH},36740:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(14232),l=n(71507),i=n.n(l);let o=e=>e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useRef)(null),n=()=>{e.onSuccess&&e.onSuccess(),e.selectOnCopy&&o(t.current)&&t.current.select()},l=()=>{e.onError&&e.onError(),!1!==e.selectOnError&&o(t.current)&&t.current.select()},s=e=>{i()(e).then(n).catch(l)};return{copy:(0,r.useCallback)(e=>{"string"==typeof e?s(e):t.current&&s(t.current.value)},[]),target:t}}},42936:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9822)}])},43400:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(37876),l=n(14232),i=n(89037);let o=function(e){var t;let{className:n,sx:o,count:s=1,columns:a=1,spacing:c=20,justify:u="start",rounded:d=!1,rowHeight:x=null}=e,p=[],h=Math.ceil(s);a=null!=(t=Math.abs(parseInt(a,10)))?t:1,c=Math.abs(parseInt(c,10)),u=-1===["start","center","end","space-between"].indexOf(u)?"start":u;for(let e=0;e<h;e++){let t=h>s&&e===h-1?s%1*100:100,n=[];if(a>1)for(let e=1;e<=a;e++){let r=t-100/a*(e-1);n.push(r<100/a?r>0?r:0:100/a)}else n.push(t);p.push((0,r.jsx)(l.Fragment,{children:n.map((t,n)=>{let l=0===c?"".concat(t,"%"):"calc(".concat(t,"% - ").concat(c,"px)"),i=0===c?null:"".concat(c,"px"),o={width:l,marginLeft:i,marginTop:i};return d&&(o.borderRadius="50%"),null!==x&&(o.height=x),(0,r.jsx)("div",{className:"skeleton",style:o,children:"‌"},"".concat(e,"-").concat(n))})},e))}let m=0===c?null:"".concat(c,"px");return(0,r.jsx)(i.A,{sx:{...o},className:n,children:(0,r.jsx)("div",{"aria-live":"polite","aria-busy":!0,style:{paddingRight:m,paddingBottom:m,display:"inline-flex",flexFlow:"wrap",width:"100%",height:"100%",top:"-3px",position:"relative",zIndex:0,justifyContent:u},children:p})})}}},e=>{e.O(0,[931,995,636,593,792],()=>e(e.s=42936)),_N_E=e.O()}]);