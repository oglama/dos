/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright © 2026 Oglama (https://oglama.com)
 * 
 * Licensed under the Oglama™ Source-Available License, Version 1.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     https://github.com/oglama/dos/blob/main/LICENSE.txt
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{9156:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l8});var l=n(37876),r=n(8628),i=n(7156),o=n(13383),s=n(74787),a=n(14232),c=n(81373),u=n(3362);let d={escape:"Escape",space:"Space"},x={shift:"Shift",ctrl:"Control",meta:"Meta"};var p=n(35268),h=n(38388),m=n(28888),f=n(38993);function g(){let e=(0,m._)(["\n0%   { transform: translateX(-","vw); }\n100% { transform: translateX(100vw); }"]);return g=function(){return e},e}function v(){let e=(0,m._)(["\n0%   { transform: translateX(0); }\n100% { transform: translateX(-","vw); }"]);return v=function(){return e},e}let j=e=>{let{width:t=25,duration:n=1200}=e;t=Number.isInteger(t)?t<0?1:t>100?100:t:25,n=Number.isInteger(n)?n<100?100:n>1e4?1e4:n:1200;let{onDisplayInfo:r}=(0,c.P)(),{settings:u}=(0,s.t)(),{i18n:d}=(0,i.B)(),[x,p]=(0,a.useState)(null),m=(0,a.useRef)(!1),j=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=r(async e=>{let{info:t}=e;m.current=t.passThru,t.onPassThru?u.animations&&o.o.info(t.passThru?d.t("Pass-through enabled"):d.t("Pass-through disabled"),{},!1):o.o.info(t.total>1?d.t("Display {{number}}/{{total}} ({{dimensions}})",{number:t.index+1,total:t.total,dimensions:"".concat(t.workArea.width,"x").concat(t.workArea.height)}):d.t("Main display ({{dimensions}})",{dimensions:"".concat(t.workArea.width,"x").concat(t.workArea.height)})),null!==j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{p("".concat(performance.now(),"-").concat(+!!t.passThru)),j.current=null},150)});return()=>{e()}},[u.animations]);let y=(0,f.i7)(g(),t),A=(0,f.i7)(v(),t+100);return u.animations?(0,l.jsx)(h.A,{style:{left:m.current?60:30},sx:{position:"fixed",zIndex:3,top:0,pointerEvents:"none",userSelect:"none",width:"".concat(t,"vw"),height:"100vh",transition:"none",overflow:"hidden",maskImage:"linear-gradient(to right, transparent 0%, black 50%, black 50%, transparent 100%)",transform:"translateX(-".concat(t,"vw)"),animation:"".concat(y," ").concat(n,"ms linear forwards"),"&:before":{content:'""',position:"fixed",top:0,left:0,width:"".concat(t+100,"vw"),height:"100vh",pointerEvents:"none",userSelect:"none",transform:"translateX(0)",animation:"".concat(A," ").concat(n,"ms linear forwards"),background:"url(/img/".concat(m.current?"symbol-in":"symbol-out",".png) repeat 0 0 transparent"),backgroundAttachment:"fixed"}}},x):null};function y(e){if(!Array.isArray(e)||!e.length)return"";let t=e.reduce((e,t,n,l)=>{let[r,i]=t,[o,s]=l[(n+1)%l.length];return e.push(r,i,(r+o)/2,(i+s)/2),e},["M",...e[0],"Q"]);return t.push("Z"),t.join(" ")}function A(e){return Array.isArray(e)&&e.length?["M ".concat(e[0][0]," ").concat(e[0][1]),...e.slice(1).map(e=>{let[t,n]=e;return"L ".concat(t," ").concat(n)}),"Z"].join(" "):""}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=Math.min(e[0],t[0]),i=Math.max(e[0],t[0]),o=Math.min(e[1],t[1]),s=Math.max(e[1],t[1]);if((n=Math.min(Math.floor((i-r)/2),Math.floor((s-o)/2),n))<=0||l<2)return[[r,o],[i,o],[i,s],[r,s],[r,o]];let a=n,c=[];function u(e,t,n,r){let i=(r-n)/(l-1),o=[];for(let r=0;r<l;r++){let l=n+i*r;o.push([e+Math.cos(l)*a,t+Math.sin(l)*a])}return o}return c.push([r+a,o]),c.push([i-a,o]),c.push(...u(i-a,o+a,-Math.PI/2,0).slice(1)),c.push([i,s-a]),c.push(...u(i-a,s-a,0,Math.PI/2).slice(1)),c.push([r+a,s]),c.push(...u(r+a,s-a,Math.PI/2,Math.PI).slice(1)),c.push([r,o+a]),c.push(...u(r+a,o+a,Math.PI,1.5*Math.PI).slice(1)),c.push(c[0]),c.map(e=>[...e,0])}function w(e,t){let n=Math.min(e[0],t[0]),l=Math.max(e[0],t[0]),r=Math.min(e[1],t[1]);return{x:n,y:r,width:l-n,height:Math.max(e[1],t[1])-r}}var S=n(16291);let I=(0,p.Ay)("svg")(e=>{let{theme:t}=e;return{pointerEvents:"none",position:"absolute",touchAction:"none",userSelect:"none",height:"100%",width:"100%",zIndex:1,left:0,top:0}});function k(){var e;let{getTutorialStep:t,onTutorial:n,onDisplayInfo:r,getDeviceInfo:o}=(0,c.P)(),{i18n:s}=(0,i.B)(),u=(0,a.useRef)([]),[d,x]=(0,a.useState)(t()),[p,h]=(0,a.useState)(!1),m={1:s.t("Swipe to draw"),2:s.t("Hold ({{key}}) for eraser",{key:"Esc"}),3:s.t("Hold ({{key}}) for laser",{key:"Shift"}),4:s.t("Hold ({{key}}) for line",{key:"macos"===o().os?"⌘":"Ctrl"}),5:s.t("Hold ({{key}}) for box",{key:"macos"===o().os?"Shift ⌘":"Ctrl+Shift"}),6:s.t("Double-tap for text"),7:s.t("You are ready!")},f=p&&d<=7?s.t("{{key}} to return",{key:"".concat("macos"===o().os?"Shift ⌘ ":"Ctrl+Shift+","Backspace")}):null!=(e=m[d])?e:null;(0,a.useEffect)(()=>{x(t());let e=n(e=>{let{step:t}=e;return x(t)}),l=r(async e=>{let{info:t}=e;return h(t.passThru)});return()=>{e(),l()}},[]),(0,a.useEffect)(()=>{if("string"==typeof f)for(let e of(7===d&&(0,S.A)("toastSuccess"),u.current)){if("function"!=typeof(null==e?void 0:e.getComputedTextLength))continue;let t=e.getComputedTextLength();e.style.transition="none",e.style.strokeDasharray=t,e.style.strokeDashoffset=t,setTimeout(()=>{requestAnimationFrame(()=>{e.style.transition="stroke-dashoffset ".concat(7===d?8:5,"s linear"),e.style.strokeDashoffset=0})},100)}},[p,d]);let g=7===d?"160px":"80px";return"string"==typeof f?(0,l.jsx)(I,{children:[{strokeWidth:6,stroke:"#000"},{strokeWidth:3,stroke:"#fff"}].map((e,t)=>{let{stroke:n,strokeWidth:r}=e;return(0,l.jsx)("text",{ref:e=>u.current[t]=e,x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",style:{fontFamily:"Caveat",fontSize:g,strokeWidth:r,stroke:n,strokeLinecap:"round",fill:"transparent"},children:f},"".concat(d,"-").concat(p,"-").concat(t))})},"".concat(d,"-").concat(p)):null}var C=n(27996);let z=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{zIndex:5,display:"flex",position:"absolute",marginTop:"-22px",marginLeft:"-15px","& .drag":{position:"absolute",height:"40px",width:"40px",top:"50%",left:"-40px",marginTop:"-20px",display:"flex",transition:"opacity 100ms linear",justifyContent:"center",alignItems:"center",opacity:0},"&:hover .drag, & .drag:hover":{opacity:1},"& .content":{outline:"none",minWidth:45,"&:hover, &:focus":{outline:"2px dashed #fff"},padding:10,paddingLeft:15,paddingRight:15,borderRadius:10}}}),E=e=>{let{top:t,left:n,text:r=null,id:i=null,rolledOut:o=!1,autoFocus:u=!1,normalize:d=()=>{}}=e,{historyCreate:x,historyUpdate:p,historyDelete:m,canvasTextReset:f,canvasEnable:g,onDisplayInfo:v}=(0,c.P)(),{settings:j}=(0,s.t)(),[y,A]=(0,a.useState)({x:0,y:0}),[w,S]=(0,a.useState)(!1),I=(0,a.useRef)({mouseX:0,mouseY:0,x:0,y:0}),k=(0,a.useRef)(null),E=(0,a.useRef)(!1),T=(0,a.useRef)(null),O=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{u&&setTimeout(()=>{if(null===T.current)return;T.current.focus();let e=document.createRange(),t=window.getSelection();e.selectNodeContents(T.current),e.collapse(!1),t.removeAllRanges(),t.addRange(e)},250);let e=e=>{E.current&&(e=d(e),A({x:I.current.x+e.clientX-I.current.mouseX,y:I.current.y+e.clientY-I.current.mouseY}))},t=()=>{g(!0),E.current&&(E.current=!1,T.current.focus(),T.current.blur(),A({x:0,y:0}))};document.addEventListener("mousemove",e),document.addEventListener("mouseup",t);let n=v(async e=>{let{info:t}=e;S(t.passThru)});return()=>{n(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[j.zoomScale]),(0,a.useEffect)(()=>{A({x:0,y:0})},[n,t]),(0,a.useEffect)(()=>{if(null!==i&&r){if(!O.current){O.current=!0;return}if(null!==T.current){let{x:e,y:t,width:n,height:l}=k.current.getBoundingClientRect();p(i,{points:b([e,t],[e+n,t+l],0)},!0)}}},[t,n,r,j.textFont,j.textSize]),(0,l.jsxs)(z,{ref:k,onMouseDown:e=>{e.target.closest(".drag")&&(e=d(e),g(!1),E.current=!0,I.current={mouseX:e.clientX,mouseY:e.clientY,x:y.x,y:y.y})},style:{top:t,left:n,opacity:o?.5:1,transform:"translate(".concat(y.x,"px, ").concat(y.y,"px)"),...w?{pointerEvents:"none"}:{}},children:[null===i||o?null:(0,l.jsx)(h.A,{className:"drag",children:(0,l.jsx)(C.A,{style:{fill:"#fff",filter:"drop-shadow(0 0 1px #000) drop-shadow(0 0 1px #000)"}})}),(0,l.jsx)(h.A,{tabIndex:0,className:"content",contentEditable:!0,suppressContentEditableWarning:!0,ref:T,role:"textbox","aria-multiline":"true","data-placeholder":"...",sx:{whiteSpace:"pre-wrap",textAlign:j.textAlignment,fontFamily:j.textFont},style:{...E.current?{outline:"none"}:{},color:o?"#000":j.textColor,fontSize:"".concat(j.textSize,"px"),lineHeight:"".concat(j.textSize,"px"),minHeight:"".concat(j.textSize+20,"px"),filter:o?null:"drop-shadow(0 0px 1px ".concat(j.textStrokeColor,") drop-shadow(0 0 1px ").concat(j.textStrokeColor,")")},onBlur:e=>{if(null===e.target)return;let l=e.target.innerText.trim().replace(/[\r\n]{2,}/g,"\n\n");e.target.innerText=l;let{x:r,y:o,width:s,height:a}=k.current.getBoundingClientRect(),c=b([r,o],[r+s,o+a],0),u={left:n+y.x,top:t+y.y,text:l,points:c};null===i?l&&x("text",u):l?p(i,u):m([i]),f()},onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain"),n=window.getSelection();if(!n.rangeCount)return;let l=n.getRangeAt(0);l.deleteContents(),l.insertNode(document.createTextNode(t)),l.collapse(!1),n.removeAllRanges(),n.addRange(l)},children:r})]},"".concat(t,"-").concat(n))},T=e=>{let{normalize:t=()=>{}}=e,{onHistory:n,onCanvasRollout:r,getTutorialStep:i,setTutorialStep:o}=(0,c.P)(),[s,u]=(0,a.useState)([]),[d,x]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=n(e=>{let{items:t}=e,n=[];for(let e of Object.keys(t))"text"===e.substring(0,e.indexOf("-"))&&n.push({...t[e],itemId:e});x(n)}),t=r(e=>{let{ids:t}=e;u(t)});return()=>{e(),t()}},[]),(0,a.useEffect)(()=>{d.length&&6===i()&&o(7)},[d]),(0,l.jsx)(l.Fragment,{children:d.map(e=>{let{itemId:n,top:r,left:i,text:o}=e;return(0,l.jsx)(E,{normalize:t,rolledOut:s.includes(n),id:n,top:r,left:i,text:o},n)})})},O=e=>{let{children:t}=e,{onCanvasDraw:n}=(0,c.P)(),[r,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=n(e=>{let{draw:t}=e;return i(t)});return()=>e()},[]),(0,l.jsx)(h.A,{style:{...r?{pointerEvents:"none"}:{}},children:t})},R=e=>{let{normalize:t=()=>{}}=e,{onCanvasText:n}=(0,c.P)(),[r,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=n(i);return()=>e()},[]),null!==r?(0,l.jsx)(E,{normalize:t,top:r.y,left:r.x,text:r.text,autoFocus:!0}):null},P=e=>{let{refTool:t}=e,{onHistory:n,canvasPointsReset:r,onCanvasRollout:i,onCanvasBox:o}=(0,c.P)(),{settings:d}=(0,s.t)(),[x,p]=(0,a.useState)(!0),[h,m]=(0,a.useState)(null),[f,g]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=n(e=>{let{items:t}=e;r();let n=null;for(let e of Object.keys(t)){let l=e.substring(0,e.indexOf("-"));u.A.tools.SPOTLIGHT===l&&(n={...t[e],itemId:e,itemType:l})}m(n)}),l=o(e=>{let{coords:n}=e;p(u.A.tools.SPOTLIGHT!==t.current||null===n)}),s=i(e=>{let{ids:t}=e;g(t)});return()=>{e(),l(),s()}},[]);let v=0;return x&&null!==h&&(v=d.spotlightRadius>=9999?Math.min(h.width,h.height)/2:d.spotlightRadius),x&&null!==h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("mask",{id:"spotlight-mask",children:[(0,l.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,l.jsx)("rect",{x:h.x,y:h.y,width:h.width,height:h.height,rx:v,ry:v,fill:"black"})]})}),(0,l.jsx)("rect",{width:"100%",height:"100%",fill:f.includes(h.itemId)?"#000000":d.spotlightColor,opacity:f.includes(h.itemId)?.25:1,mask:"url(#spotlight-mask)"})]}):null},N=e=>{let{refTool:t}=e,{onCanvasBox:n}=(0,c.P)(),{settings:r}=(0,s.t)(),[i,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=n(e=>{let{coords:n}=e;u.A.tools.SPOTLIGHT===t.current&&o(Array.isArray(n)&&2==n.length?w(n[0],n[1]):null)});return()=>e()},[]);let d=0;return null!==i&&(d=r.spotlightRadius>=9999?Math.min(i.width,i.height)/2:r.spotlightRadius),null!==i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("mask",{id:"tool-spotlight-mask",children:[(0,l.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,l.jsx)("rect",{x:i.x,y:i.y,width:i.width,height:i.height,rx:d,ry:d,fill:"black"})]})}),(0,l.jsx)("rect",{width:"100%",height:"100%",fill:r.spotlightColor,opacity:"0.5",mask:"url(#tool-spotlight-mask)"})]}):null};var M=n(24230);let L={data:{},get:(e,t)=>{let n="".concat(e,"-").concat(JSON.stringify(t));return"string"!=typeof L.data[n]&&(L.data[n]=y((0,M.$4)(e,t))),L.data[n]}},B=()=>{let{onHistory:e,canvasPointsReset:t,onCanvasRollout:n,getTutorialStep:r,setTutorialStep:i}=(0,c.P)(),{settings:o,getToolValue:d}=(0,s.t)(),[x,p]=(0,a.useState)([]),[h,m]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let l=e(e=>{let{items:n}=e;t();let l=[];for(let e of Object.keys(n)){let t=e.substring(0,e.indexOf("-"));[u.A.tools.PEN,u.A.tools.LINE,u.A.tools.BOX].includes(t)&&l.push({...n[e],itemId:e,itemType:t})}l.length||(L.data={}),m(l),7===r()&&i(8,!1)}),o=n(e=>{let{ids:t}=e;p(t)});return()=>{l(),o()}},[]),h.length?h.map(e=>{let{itemId:t,itemType:n,points:r,coords:i}=e;u.A.tools.BOX===n&&Array.isArray(i)&&(r=b(i[0],i[1],o.boxRadius));let s=(Array.isArray(r)?r:[]).length?L.get(r,{size:d(n,"size"),smoothing:d(n,"smoothing"),streamline:d(n,"streamline"),thinning:d(n,"thinning")}):"",c=u.A.tools.BOX===n&&(9!==o.boxFillColor.length||"00"!==o.boxFillColor.substring(7))?A(r):null,p=x.includes(t),h=p?"#000":d(n,"color"),m=p?.5:1;return s?(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)("path",{stroke:d(n,"stroke"),strokeWidth:2,strokeOpacity:+!p,strokeLinecap:"round",paintOrder:"stroke",fill:h,fillOpacity:m,d:s}),c?(0,l.jsx)("path",{fill:p?"#000":o.boxFillColor,fillOpacity:m,d:c}):null]},t):null}):null},D=()=>{let{settings:e,getToolValue:t}=(0,s.t)(),{onCanvasLaser:n}=(0,c.P)(),[r,i]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=n(e=>{let{items:t}=e,n=[];for(let e of Object.keys(t))n.push({itemId:e,points:t[e]});i(n)});return()=>{e()}},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"userSpaceOnUse",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"10",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),r.length?r.map(n=>{let{itemId:r,points:i}=n,o=(Array.isArray(i)?i:[]).length?y((0,M.$4)(i,{size:t(u.A.tools.LASER,"size"),smoothing:t(u.A.tools.LASER,"smoothing"),streamline:t(u.A.tools.LASER,"streamline"),thinning:t(u.A.tools.LASER,"thinning")})):"",s=e.laserColor;return o?(0,l.jsx)("path",{filter:"url(#glow)",fill:s,fillOpacity:1,d:o},r):null}):null]})},F=e=>{let{refTool:t}=e,{settings:n,getToolValue:r}=(0,s.t)(),{onCanvasPoints:i,onCanvasBox:o}=(0,c.P)(),[d,x]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=i(e=>{let{points:t}=e;x(t)}),l=o(e=>{let{coords:l}=e;u.A.tools.BOX===t.current&&x(Array.isArray(l)&&2==l.length?b(l[0],l[1],n.boxRadius):[])});return()=>{e(),l()}},[n.boxRadius]);let p=u.A.tools.ERASER===t.current?"#000":r(t.current,"color"),h=u.A.tools.ERASER===t.current?.5:1,m=+(u.A.tools.ERASER!==t.current),f=d.length?y((0,M.$4)(d,{size:r(t.current,"size"),smoothing:r(t.current,"smoothing"),streamline:r(t.current,"streamline"),thinning:r(t.current,"thinning")})):"",g=u.A.tools.BOX===t.current&&(9!==n.boxFillColor.length||"00"!==n.boxFillColor.substring(7))?A(d):null;return(0,l.jsxs)(l.Fragment,{children:[d.length?(0,l.jsx)("path",{stroke:r(t.current,"stroke"),strokeWidth:2,strokeOpacity:m,strokeLinecap:"round",paintOrder:"stroke",fill:p,fillOpacity:h,d:f}):null,g?(0,l.jsx)("path",{fill:u.A.tools.ERASER===t.current?"#000":n.boxFillColor,fillOpacity:h,d:g}):null]})},X=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{transition:"opacity 250ms linear",boxShadow:t.shadows[3],justifyContent:"center",pointerEvents:"none",alignItems:"center",position:"absolute",userSelect:"none",overflow:"hidden",display:"none",width:"auto",zIndex:2}}),Y=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{background:"url(/img/placeholder/stream.webp) repeat 0 0 transparent",transition:"opacity 250ms linear",backgroundSize:"auto",position:"absolute",overflow:"hidden",height:"100%",width:"100%",opacity:1,zIndex:2,top:0,left:0}}),U=(0,p.Ay)("video")(e=>{let{theme:t}=e;return{pointerEvents:"none",borderRadius:"20px",position:"relative",objectFit:"cover",userSelect:"none",overflow:"hidden",maxWidth:"100vw",aspectRatio:.5,height:"25vh",width:"auto",opacity:0,zIndex:1,left:0,top:0}}),K=e=>{var t,n,r,d,x,p,h,m;let{visible:f=!0}=e,{webcamSetList:g,onWebcamList:v,onWebcamConfigId:j,webcamGetConfigId:y,webcamSetConfigId:A,onDisplayInfo:b}=(0,c.P)(),{getStream:w,resetStream:S}=function(){let e=(0,a.useRef)({});return{getStream:async t=>{var n;return"string"!=typeof t||e.current[t]||(e.current[t]=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t}}})),null!=(n=e.current[t])?n:null},resetStream:t=>{for(let l of"string"==typeof t?[t]:Object.keys(e.current)){try{var n;"function"==typeof(null==(n=e.current[l])?void 0:n.getTracks)&&e.current[l].getTracks().forEach(e=>{"function"==typeof(null==e?void 0:e.stop)&&e.stop()})}catch(e){}delete e.current[l]}}}}(),{getWebcamValue:I}=(0,s.t)(),{i18n:k}=(0,i.B)(),[C,z]=(0,a.useState)(y()),[E,T]=(0,a.useState)(null),[O,R]=(0,a.useState)(!1),[P,N]=(0,a.useState)(!1),M=(0,a.useRef)(null),L=(0,a.useRef)(null),B=null!=(t=I(C,"id"))?t:"",D=null!=(n=I(C,"orientation"))?n:u.A.orientation.LANDSCAPE,F=null!=(r=I(C,"placement"))?r:"bottom-right",K=null!=(d=I(C,"marginX"))?d:5,W=null!=(x=I(C,"marginY"))?x:5,_=null!=(p=I(C,"height"))?p:25,H=null!=(h=I(C,"radius"))?h:20;(0,a.useEffect)(()=>{let e=b(async e=>{let{info:t}=e;R(t.passThru)});z(y());let t=j(e=>{let{configId:t}=e;return z(t)}),n=async()=>{try{let e=await navigator.mediaDevices.enumerateDevices();g(Array.isArray(e)?e.filter(e=>"videoinput"===(null==e?void 0:e.kind)).map(e=>e.toJSON()):[])}catch(e){}};return navigator.mediaDevices.addEventListener("devicechange",n),n(),()=>{e(),t(),navigator.mediaDevices.removeEventListener("devicechange",n)}},[]),(0,a.useEffect)(()=>{let e=performance.now();N(!1);let t=e=>{S(B),setTimeout(()=>{e&&o.o.error(e),A(null)},300)},n=v(async e=>{let{list:n}=e,l=n.map(e=>{var t;return null!=(t=null==e?void 0:e.deviceId)?t:null}).filter(e=>null!==e);"string"==typeof B&&B.length&&(l.includes(B)||t(k.t("Webcam disconnected")))});(async()=>{if(L.current&&"string"==typeof B&&B.length)try{if(M.current=await w(B),!M.current)throw Error(k.t("Invalid webcam stream"));L.current.srcObject=M.current,await L.current.play();let t=M.current.getVideoTracks()[0];if("function"==typeof(null==t?void 0:t.getSettings)){var n,l;t.enabled=!0,T(null!=(l=null==(n=t.getSettings())?void 0:n.aspectRatio)?l:null),setTimeout(()=>N(!0),performance.now()-e<300?300-(performance.now()-e):0)}}catch(n){let e="".concat(n.message||n);"OverconstrainedError"===n.name&&(e="deviceId"===n.constraint?k.t("Selected webcam is no longer available"):k.t("Invalid webcam constraint: {{item}}",{item:n.constraint})),t(e)}})();let l=setTimeout(()=>{L.current.srcObject||S()},5e3);return()=>{N(!1),n(),clearTimeout(l),(async()=>{var e,t;try{"function"==typeof(null==(e=L.current)?void 0:e.pause)&&(await L.current.pause(),L.current.srcObject=null,await L.current.load())}catch(e){}try{"function"==typeof(null==(t=M.current)?void 0:t.getTracks)&&M.current.getTracks().forEach(e=>{e.enabled=!1})}catch(e){}})()}},[B,C]);let V="".concat(H,"px"),G="".concat(_,"vh"),q=null!=(m=({"top-left":{left:"".concat(K,"vh"),top:"".concat(W,"vh")},top:{left:"50%",top:"".concat(W,"vh"),transform:"translate(-50%, 0)"},"top-right":{right:"".concat(K,"vh"),top:"".concat(W,"vh")},right:{right:"".concat(K,"vh"),top:"50%",transform:"translate(0, -50%)"},"bottom-right":{right:"".concat(K,"vh"),bottom:"".concat(W,"vh")},bottom:{left:"50%",bottom:"".concat(W,"vh"),transform:"translate(-50%, 0)"},"bottom-left":{left:"".concat(K,"vh"),bottom:"".concat(W,"vh")},left:{left:"".concat(K,"vh"),top:"50%",transform:"translate(0, -50%)"},center:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})[F])?m:{right:"".concat(K,"vh"),bottom:"".concat(W,"vh")};return(0,l.jsxs)(X,{style:{opacity:O?I(C,"passThruOpacity")/100:1,...f&&B?{display:"flex"}:{},...q,borderRadius:V,height:G},children:[(0,l.jsx)(Y,{style:{...B&&P?{opacity:0}:{},borderRadius:V}}),(0,l.jsx)(U,{style:{...function(e,t){let n=null;do{var l;if([u.A.orientation.PORTRAIT,u.A.orientation.LANDSCAPE].includes(e)){Number.isFinite(t)&&t>0&&(n=u.A.orientation.PORTRAIT===e&&t>1||u.A.orientation.LANDSCAPE===e&&t<1?1/t:t);break}n=null!=(l=({[u.A.orientation.R1_1]:1,[u.A.orientation.R16_9]:16/9,[u.A.orientation.R9_16]:9/16,[u.A.orientation.R21_9]:21/9,[u.A.orientation.R9_21]:9/21,[u.A.orientation.R32_9]:32/9,[u.A.orientation.R9_32]:9/32,[u.A.orientation.R45_9]:5,[u.A.orientation.R9_45]:.2})[e])?l:null}while(!1);return null!==n?{aspectRatio:n}:{}}(D,E),...B&&P?{opacity:1}:{},borderRadius:V,height:G},disablePictureInPicture:!0,disableRemotePlayback:!0,controls:!1,ref:L,playsInline:!0,autoPlay:!0,muted:!0})]})},W=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{transformOrigin:"0 0",pointerEvents:"auto",overflow:"hidden",position:"fixed",height:"100vh",width:"100vw",zIndex:2,left:0,top:0}}),_=(0,p.Ay)("svg")(e=>{let{theme:t}=e;return{position:"absolute",touchAction:"none",userSelect:"none",height:"100%",width:"100%",zIndex:4,left:0,top:0}}),H=(0,p.Ay)("svg")(e=>{let{theme:t}=e;return{position:"absolute",touchAction:"none",userSelect:"none",height:"100%",width:"100%",zIndex:2,left:0,top:0}}),V=(0,p.Ay)("canvas")(e=>{let{theme:t}=e;return{position:"absolute",touchAction:"none",userSelect:"none",height:"100%",width:"100%",zIndex:0,left:0,top:0}}),G=e=>{var t;let{refKeys:n}=e,{canvasDrawSet:i,canvasToolGet:d,canvasPointsSet:x,canvasPointsAdd:p,canvasPointsGet:h,canvasPointsReset:m,canvasRolloutAdd:f,canvasRolloutGet:g,canvasRolloutReset:v,canvasLaserAdd:j,canvasLaserStop:y,canvasLaserStart:A,canvasBoxGet:S,canvasBoxSetFrom:I,canvasBoxSetTo:C,canvasBoxReset:z,canvasTextAdd:E,historyCreate:M,historyDelete:L,historyRead:X,onDisplayInfo:Y,dialogSet:U,getDeviceInfo:G,getTutorialStep:q,setTutorialStep:Z,canvasSetTransparent:J}=(0,c.P)(),{settings:Q}=(0,s.t)(),$=(0,r.A)(),ee=(0,a.useRef)({time:0,x:0,y:0}),et=(0,a.useRef)(u.A.tools.PEN),en=(0,a.useRef)(null),el=(0,a.useRef)(!1),er=(0,a.useRef)(!1),ei=(0,a.useRef)(null),eo=(0,a.useRef)(null),[es,ea]=(0,a.useState)(!1),[ec,eu]=(0,a.useState)(null),ed=e=>{if(!er.current||null===eo.current)return e;let t=eo.current.getBoundingClientRect(),n=Q.zoomScale/100,l=Math.floor((e.clientX-t.left)/n),r=Math.floor((e.clientY-t.top)/n);return{...e,clientX:l,clientY:r}},ex=()=>!!er.current&&(er.current=!1,null!==ei.current&&setTimeout(()=>{ei.current.getContext("2d").clearRect(0,0,ei.current.width,ei.current.height)},Q.zoomDuration),J(!1),eu(null),!0),ep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pan:!1,absolute:!1},n=eo.current.getBoundingClientRect(),l=Q.zoomScale/100;t.pan&&(n={left:0,top:0,width:Math.floor(n.width/l),height:Math.floor(n.height/l)},t.absolute||(e=ed(e)));let r=(t.absolute?e.pageX:e.clientX)-n.left,i=(t.absolute?e.pageY:e.clientY)-n.top;r<100?r=0:r>n.width-100&&(r=n.width),i<100?i=0:i>n.height-100&&(i=n.height);let o=r*(1-l),s=i*(1-l),a=n.width*(1-l),c=n.height*(1-l),u=Math.min(0,Math.max(a,o)),d=Math.min(0,Math.max(c,s));J(!1),setTimeout(()=>eu({x:u,y:d}),50*!t.pan)};(0,a.useEffect)(()=>{let e=Y(async e=>{let{info:t}=e;ea(t.passThru),ex()});return()=>{e()}},[]),(0,a.useEffect)(()=>{var e;el.current=!!(null==(e=$.user)?void 0:e.computerEnabled)},[null==(t=$.user)?void 0:t.computerEnabled]),(0,a.useEffect)(()=>{er.current&&ep({pageX:0,pageY:0},{pan:!0,absolute:!0})},[Q.zoomScale]);let eh=async e=>{var t,l;if(!(8>q())&&!en.current){if(en.current=!0,setTimeout(()=>en.current=!1,Q.zoomDuration+400),e.deltaY>0)return void ex();if(er.current)return void ep(e,{pan:!0,absolute:null==n?void 0:n.current.shift});er.current=!0,J(!0),await new Promise(e=>setTimeout(e,200));try{let e=await (null==(t=window.sdk)?void 0:t.ipc.main.grabScreenshot());if("object"!=typeof e||null===e)return;let{data:n,width:l,height:r}=e;ei.current.width=l,ei.current.height=r,ei.current.getContext("2d").putImageData(new ImageData(n,l,r),0,0)}catch(e){o.o.error("".concat(null!=(l=e.message)?l:e));return}ep(e,{absolute:null==n?void 0:n.current.shift})}},em={transition:"transform ".concat(Q.zoomDuration,"ms linear")};return ec&&(em.transform="translate(".concat(ec.x,"px, ").concat(ec.y,"px) scale(").concat(Q.zoomScale/100,")")),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(W,{style:{...em},onWheel:eh,children:[(0,l.jsx)(V,{ref:ei}),(0,l.jsx)(k,{}),(0,l.jsxs)(H,{children:[(0,l.jsx)(P,{refTool:et}),(0,l.jsx)(N,{refTool:et})]}),(0,l.jsx)(K,{visible:!ec}),(0,l.jsxs)(_,{ref:eo,"data-use-cursor":es?null:"true",onPointerDown:e=>{if(!es){if(!el.current)return void U("dialog:subscription");if((e=>{if(!e.isPrimary||"mouse"===e.pointerType&&0!==e.button)return!1;e=ed(e);let t=performance.now(),{clientX:l,clientY:r}=e,i=ee.current,o=t-i.time,s=Math.hypot(l-i.x,r-i.y);if(o>0&&o<300&&s<15){ee.current.time=0;let e=null;if("macos"===G().os?null==n?void 0:n.current.meta:null==n?void 0:n.current.ctrl){let t=1,n=X();for(let e of Object.keys(n.items)){var a;if(0!==e.indexOf("text-")||"string"!=typeof(null==(a=n.items[e])?void 0:a.text))continue;let l=n.items[e].text.match(/^(\d+)(\W|$)/);if(!l)continue;let r=parseInt(l[1],10)+1;Number.isInteger(r)&&!(r<=t)&&(t=r)}e="".concat(t," ")}return E(l,r,e),!0}return ee.current={time:t,x:l,y:r},!1})(e))return void i(!1);if(e=ed(e),i(!0),e.target.setPointerCapture(e.pointerId),et.current=d(),m(!1),u.A.tools.PEN===et.current||u.A.tools.ERASER===et.current)return void p([e.clientX,e.clientY,e.pressure]);if(u.A.tools.LASER===et.current)return void A([e.clientX,e.clientY,e.pressure],Q.laserDelay);if(u.A.tools.LINE===et.current||u.A.tools.BOX===et.current||u.A.tools.SPOTLIGHT===et.current)return void I(e.clientX,e.clientY)}},onPointerMove:e=>{if(!es&&el.current&&1===e.buttons){if(e=ed(e),u.A.tools.PEN===et.current)return void p([e.clientX,e.clientY,e.pressure]);if(u.A.tools.ERASER===et.current){p([e.clientX,e.clientY,e.pressure]);let t=g().reduce((e,t)=>(e[t]=1,e),{}),n=function(e,t){if("object"!=typeof e||null===e||0===Object.keys(e).length||!Array.isArray(t)||t.length<2)return null;let n=(e,t,n)=>{let l=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===l?0:l>0?1:2},l=(e,t,n)=>t[0]>=Math.min(e[0],n[0])&&t[0]<=Math.max(e[0],n[0])&&t[1]>=Math.min(e[1],n[1])&&t[1]<=Math.max(e[1],n[1]),r=(e,t,r,i)=>{if(!(Math.max(e[0],t[0])>=Math.min(r[0],i[0])&&Math.max(r[0],i[0])>=Math.min(e[0],t[0])&&Math.max(e[1],t[1])>=Math.min(r[1],i[1])&&Math.max(r[1],i[1])>=Math.min(e[1],t[1])))return!1;let o=n(e,t,r),s=n(e,t,i),a=n(r,i,e),c=n(r,i,t);return!!(o!==s&&a!==c||0===o&&l(e,r,t)||0===s&&l(e,i,t)||0===a&&l(r,e,i)||0===c&&l(r,t,i))},i=[];for(let e=0;e<t.length-1;e++)i.push([t[e],t[e+1]]);for(let t of Object.keys(e)){var o;let n=null==(o=e[t])?void 0:o.points;if(Array.isArray(n)&&!(n.length<2)){for(let[e,l]of i)for(let i=0;i<n.length-1;i++)if(r(e,l,n[i],n[i+1]))return t}}return null}(g().length?Object.keys(X().items).reduce((e,n)=>(t[n]||(e[n]=X().items[n]),e),{}):X().items,h());null===n||t[n]||f(n);return}if(u.A.tools.LASER===et.current)return void j([e.clientX,e.clientY,e.pressure]);if(u.A.tools.LINE===et.current){C(e.clientX,e.clientY);let t=S();x(Array.isArray(t)?t:[]);return}if(u.A.tools.BOX===et.current||u.A.tools.SPOTLIGHT===et.current)return void C(e.clientX,e.clientY)}},onPointerUp:e=>{if(es||!el.current)return;e=ed(e),i(!1);let t=h();if(m(),u.A.tools.PEN===et.current){Array.isArray(t)&&t.length>=3&&(M(u.A.tools.PEN,{points:t}),1===q()&&Z(2));return}if(u.A.tools.ERASER===et.current){g().length&&(L(g()),v()),2===q()&&Z(3);return}if(u.A.tools.LASER===et.current){y(),3===q()&&Z(4);return}if(u.A.tools.LINE===et.current){let e=S();Array.isArray(e)&&(M(u.A.tools.LINE,{points:e}),z(),4===q()&&Z(5));return}if(u.A.tools.BOX===et.current){let e=S();Array.isArray(e)&&(M(u.A.tools.BOX,{coords:e,points:b(e[0],e[1],0)}),z(),5===q()&&Z(6));return}if(u.A.tools.SPOTLIGHT===et.current){let e=S();Array.isArray(e)&&(M(u.A.tools.SPOTLIGHT,{...w(e[0],e[1]),points:b(e[0],e[1],0)}),z());return}},children:[(0,l.jsx)(B,{}),(0,l.jsx)(F,{refTool:et}),(0,l.jsx)(D,{})]}),(0,l.jsxs)(O,{children:[(0,l.jsx)(T,{normalize:ed}),(0,l.jsx)(R,{normalize:ed})]})]}),(0,l.jsx)(K,{visible:!!ec})]})};var q=n(36740),Z=n(80218),J=n.n(Z),Q=n(67906),$=n(80553),ee=n(44395),et=n(35003),en=n(71733),el=n(50993),er=n(79270),ei=n(65754),eo=n(10240),es=n(50138),ea=n(72563),ec=n(35283),eu=n(47896),ed=n(72471),ex=n(23227),ep=n(27780),eh=n(216),em=n(88639),ef=n(54544),eg=n(32673),ev=n(22653),ej=n(66703),ey=n(6995);let eA=(0,p.Ay)(h.A)(e=>{let{theme:t,size:n="small"}=e;return{background:t.palette.background.paper,justifyContent:"center",alignItems:"center",display:"flex",boxShadow:t.shadows[3],borderRadius:"small"===n?"0.4rem":"1rem",fontSize:"small"===n?"0.85rem":"3rem",marginRight:"small"===n?"0px":"2px",marginLeft:"small"===n?"1px":"2px",height:"small"===n?"2rem":"5rem",width:"small"===n?"1.1rem":"3rem"}});function eb(e){let{subInfo:t={},sx:n={},small:r=!1}=e,i=(0,ej.A)(),o=(0,ey.A)(i.breakpoints.up("sm")),[s,c]=(0,a.useState)(null);("object"!=typeof n||null===n)&&(n={}),(0,a.useEffect)(()=>{let e=null;return Number.isInteger(t.pilotLeft)&&t.pilotLeft>0&&(c(t.pilotLeft),e=setInterval(()=>{c(e=>e-1)},1e3)),()=>null!==e&&clearInterval(e)},[t.pilotLeft]);let u=t.pilotLeft>0&&t.planComputersCount>0&&t.computersCount>t.planComputersCount,d=(o||!r?"00:00:00":"00:00").split("");return"number"==typeof s&&s>0&&(d=[Math.floor(s/3600),Math.floor(s%3600/60),...o||!r?[Math.floor(s%60)]:[]].map(e=>"".concat(e).padStart(2,"0")).join(":").split("")),t.active&&"pilot"===t.status||u?(0,l.jsx)(h.A,{sx:{display:"flex",justifyContent:"space-between",...n},children:d.map((e,t)=>(0,l.jsx)(eA,{size:r?"small":"large",children:e},t))}):null}let ew=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{position:"absolute",left:"-2rem",bottom:"-5rem",width:"25rem",height:"25rem",zIndex:1,opacity:.1,"&>svg":{position:"relative",width:"100%",height:"100%"}}}),eS=(0,p.Ay)("pre")(e=>{let{theme:t}=e;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,color:t.palette.text.primary,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}});function eI(e){var t,n,s,d,x,p;let{isOpen:m=!1,onClose:f=()=>{}}=e,{onSubscription:g,getSubscription:v,checkSubscription:j}=(0,c.P)(),{i18n:y}=(0,i.B)(),A=(0,q.A)(),b=(0,r.A)(),[w,S]=(0,a.useState)(null),[I,k]=(0,a.useState)({}),[C,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{j(b,!0),k(v());let e=g(e=>{let{info:t}=e;k(t)});return(async()=>{var e;S(await (null==(e=window.sdk)?void 0:e.ipc.device.getSerialNumber()))})(),z(!0),()=>e()},[]);let E=()=>{m&&"function"==typeof f&&f()},T=async e=>{o.o.info(y.t("Copied computer serial number to clipboard"),null,!1),A.copy(e)},O=async()=>{var e,t,n;E(),o.o.info(!I.active||(null==(e=b.user)?void 0:e.computerEnabled)?y.t("Navigating to billing page..."):y.t("Navigating to my computers..."),null,!1),await (null==(n=window.sdk)?void 0:n.ipc.device.openURL(!I.active||(null==(t=b.user)?void 0:t.computerEnabled)?"".concat(u.A.siteUrl,"/profile/#/tab:billing"):"".concat(u.A.siteUrl,"/#/tab:computers")))},R=[{key:"computersCount",labelSingular:y.t("computer"),labelPlural:y.t("computers"),count:I.computersCount,max:J().max.computersCount,boostedCount:I.planComputersCount,boostedTooltip:y.t("You can use this extra computer until the trial ends"),Icon:ef.A},{key:"updates",labelSingular:y.t("update"),labelPlural:y.t("updates"),count:1/0,max:0,boostedCount:0,boostedTooltip:null,Icon:eg.A}],P=I.pilotLeft>0&&I.planComputersCount>0&&I.computersCount>I.planComputersCount,N=!(null==(t=b.user)?void 0:t.computerEnabled)||!I.active||u.A.billing.subscriptionStatus.pastDue===I.status;return m&&C?(0,l.jsxs)(er.A,{open:!0,onClose:E,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,l.jsx)(ew,{className:"rotate",children:I.active?(null==(n=b.user)?void 0:n.computerEnabled)?"pilot"===I.status?(0,l.jsx)(ep.A,{color:"info"}):u.A.billing.subscriptionStatus.pastDue===I.status?(0,l.jsx)(eu.A,{color:"warning"}):P?(0,l.jsx)(ec.A,{color:"success"}):(0,l.jsx)(es.A,{color:"success"}):(0,l.jsx)(em.A,{}):(0,l.jsx)(ev.A,{color:"warning"})}),(0,l.jsx)(ee.A,{children:I.active?"pilot"===I.status?y.t("Free trial"):u.A.billing.subscriptionStatus.pastDue===I.status?y.t("Invoice past due"):"string"==typeof(null==(s=I.pricePlan)?void 0:s.interval)?y.t("Active subscription"):y.t("Lifetime subscription"):y.t("Payment required")}),(0,l.jsx)($.A,{sx:{my:6,position:"relative",zIndex:2},children:I.active?(null==(d=b.user)?void 0:d.computerEnabled)?(0,l.jsxs)(h.A,{children:["pilot"!==I.status&&u.A.billing.subscriptionStatus.pastDue===I.status?(0,l.jsx)(eo.A,{severity:"warning",sx:{mb:6},children:y.t("Invoice past due. Please fix this issue to avoid service interruption.")}):null,"pilot"===I.status?(0,l.jsxs)(h.A,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",userSelect:"none",mb:6},children:[(0,l.jsx)(eb,{subInfo:I,sx:{mb:6}}),(0,l.jsx)(et.A,{variant:"body2",children:y.t("Free trial limits expire soon")})]}):null,(0,l.jsx)(h.A,{sx:{display:"flex",justifyContent:"center",mt:3},children:R.map((e,t)=>(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",mb:3,ml:6*(0!==t)},children:[(0,l.jsx)(el.A,{placement:"top",title:P&&e.boostedCount>e.count?e.boostedTooltip:null,children:(0,l.jsx)(e.Icon,{sx:{fontSize:"3rem"},className:P&&e.boostedCount>e.count?"zoom-in":null,color:P&&e.boostedCount>e.count?"success":"inherit"})}),1/0===e.count?(0,l.jsx)(ex.A,{fontSize:"large",sx:{ml:4,mr:2}}):(0,l.jsx)(et.A,{variant:"h4",sx:{ml:4,mr:2},children:e.count}),(0,l.jsxs)(et.A,{variant:"h6",color:"text.secondary",children:[1/0===e.count?null:"x ",1===e.count?e.labelSingular:e.labelPlural]})]},e.key))})]}):(0,l.jsxs)(eo.A,{severity:"info",icon:(0,l.jsx)(em.A,{}),sx:{"&>.MuiAlert-message":{width:"100%"}},children:[(0,l.jsx)(et.A,{variant:"body2",sx:{color:"inherit",width:"100%"},children:y.t("Please go to your dashboard and enable computer with serial number:")}),(0,l.jsxs)(h.A,{display:"flex",sx:{width:"100%",justifyContent:"center",alignItems:"center",my:3},children:[(0,l.jsx)(el.A,{title:y.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard."),placement:"top",children:(0,l.jsx)(eS,{children:w})}),(0,l.jsx)(el.A,{title:y.t("Click to copy"),placement:"top",children:(0,l.jsx)(en.A,{onClick:()=>T(w),children:(0,l.jsx)(eh.A,{fontSize:"small"})})})]})]}):(0,l.jsx)(eo.A,{icon:(0,l.jsx)(ed.A,{}),severity:"warning",variant:"filled",children:y.t("To continue using the app, please upgrade to a paid plan.")})}),(0,l.jsxs)(Q.A,{sx:{position:"relative",zIndex:2},children:[(0,l.jsx)(ei.A,{startIcon:!I.active||(null==(x=b.user)?void 0:x.computerEnabled)?(0,l.jsx)(ea.A,{}):(0,l.jsx)(ef.A,{}),onClick:O,color:I.active?"primary":"warning",className:N?"pop":null,variant:"contained",children:!I.active||(null==(p=b.user)?void 0:p.computerEnabled)?y.t("Go to billing"):y.t("Go to my computers")}),(0,l.jsx)(ei.A,{color:"secondary",onClick:E,children:y.t("Close")})]})]}):null}var ek=n(71090),eC=n(88992);let ez=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{month:"long",day:"numeric",year:"numeric"};return e?new Intl.DateTimeFormat(t,n).format(new Date(e)):e};var eE=n(16084),eT=n(39091),eO=n(91040),eR=n(4728),eP=n(95389),eN=n(77648),eM=n(14353),eL=n(38111),eB=n(41316),eD=n(60595),eF=n(87080),eX=n(32136),eY=n(2665),eU=n(7827),eK=n(51018),eW=n(56792),e_=n(53608),eH=n(35250),eV=n(45559),eG=n(43400);let eq=(0,p.Ay)("img")(()=>({width:200,height:200})),eZ=e=>{let{uploadPath:t,getSrc:n,onChange:r=async()=>{},crop:s="fit",backgroundColor:c=null,borderColor:u=null,borderWidth:d=null,previewWidth:x=200,previewHeight:p=200,radius:m=5,alt:f="Logo",inputName:g="logo",label:v="Select logo",active:j=!1,width:y=256,height:A=256}=e;"function"!=typeof n&&(n=()=>"/img/logo/192.png");let b=(0,ej.A)(),[w,S]=(0,a.useState)(n()),[I,k]=(0,a.useState)(!1),{i18n:C}=(0,i.B)(),z=null!==u&&null!==d?"solid":null,{getRootProps:E,getInputProps:T}=(0,e_.VB)({multiple:!1,accept:{"image/png":[".png"],"image/jpg":[".jpg",".jpeg"],"image/webp":[".webp"]},onDrop:e=>{let n=document.createElement("img");n.onload=function(){k(!0),setTimeout(()=>{let e=n.width,l=n.height,i=0,o=0;e>l?"fill"===s?(l=A,e*=A/n.height,i=parseInt((y-e)/2,10)):(e=y,l*=y/n.width,o=parseInt((A-l)/2,10)):"fill"===s?(e=y,l*=y/n.width,o=parseInt((A-l)/2,10)):(l=A,e*=A/n.height,i=parseInt((y-e)/2,10));let a=document.createElement("canvas");a.width=y,a.height=A,a.getContext("2d").drawImage(n,i,o,e,l),a.toBlob(e=>{let n=new FormData;n.append(g,e),(async()=>{try{let l=await eO.A.post(t,n,{headers:{"Content-Type":"multipart/form-data"}});S(URL.createObjectURL(e)),"function"==typeof r&&await r(l.data,URL.createObjectURL(e)),k(!1)}catch(e){k(!1)}})()},"png"),a.remove(),n.remove()},eH.A.delay.request)},n.onerror=()=>{o.o.error(C.t("The selected file is not a valid image"),{duration:5e3,ariaProps:{role:"alert"}})},n.src=URL.createObjectURL(Object.assign(e[0]))},validator:()=>{}});return(0,l.jsx)(h.A,{children:I?(0,l.jsx)(h.A,{sx:{width:x,height:p,display:"flex",alignItems:"center",flexDirection:"column"},children:(0,l.jsx)(eG.A,{count:1,spacing:0,rounded:!0,sx:{p:5,width:x,height:p}})}):j?(0,l.jsxs)(h.A,{...E({className:"dropzone"}),sx:{position:"relative",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"},children:[(0,l.jsx)("input",{...T()}),(0,l.jsx)(eq,{src:w,alt:"logo",sx:{m:0,pointerEvents:"none",borderRadius:m,backgroundColor:c,borderStyle:z,borderWidth:d,borderColor:u,width:x,height:p}}),(0,l.jsxs)(h.A,{sx:{position:"absolute",width:"70%",height:"70%",background:"dark"===b.palette.mode?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.6)",borderRadius:"50%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","&:hover > p":{display:"none"},"&:hover > svg":{transform:"scale(2)"}},children:[(0,l.jsx)(eV.A,{}),(0,l.jsx)(et.A,{size:"large",color:"inherit",sx:{mt:2,textAlign:"center"},children:v})]})]}):(0,l.jsx)(h.A,{sx:{position:"relative",width:x,height:p,"&:before":{content:'""',display:"block",width:x,height:p,position:"absolute",top:0,left:0,zIndex:1,background:b.palette.background.paper,borderRadius:m}},children:(0,l.jsx)(eq,{src:w,sx:{position:"relative",zIndex:1,width:x,height:p,borderRadius:m,backgroundColor:"transparent",borderWidth:d,borderColor:u},alt:f})})})};function eJ(){let e=(0,m._)(["0% { opacity: 0 } 100% { opacity: 1 }"]);return eJ=function(){return e},e}function eQ(){let e=(0,m._)(["0% { opacity: 0; transform: scale(1.5); } 100% { opacity: 1; transform: scale(1); }"]);return eQ=function(){return e},e}let e$=(0,f.i7)(eJ()),e0=(0,f.i7)(eQ()),e1=(0,p.Ay)(h.A)(e=>{let{theme:t,color:n}=e;return{display:"flex",position:"absolute",justifyContent:"flex-end",alignItems:"end",top:0,left:0,width:"100%",height:200,zIndex:0,"&:before":{content:'""',display:"block",position:"absolute",background:n,width:"100%",height:"100%",opacity:0,animation:null!==n?"".concat(e$," 1250ms forwards linear"):"none"},"&:after":{content:'""',display:"block",position:"absolute",width:"100%",height:"100%",opacity:0,transform:"scale(1.5)",animation:null!==n?"".concat(e0," 250ms forwards linear"):"none",background:"url(/img/pages/circles-profile-".concat(t.palette.mode,".svg)"),backgroundSize:"auto",backgroundRepeat:"no-repeat",[t.breakpoints.up("xs")]:{backgroundPosition:"50% -600px",transformOrigin:"50% 100%"},[t.breakpoints.up("md")]:{backgroundPosition:"-680px -600px",transformOrigin:"100px 100%"}}}}),e2=e=>{var t,n;let{isOpen:o=!1,onOpen:c=()=>{},onClose:d=()=>{}}=e,{settings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),m=(0,r.A)(),f=(0,eE.G)(),g=(0,ej.A)(),v=f.getUserData(),[j,y]=(0,a.useState)(null),[A,b]=(0,a.useState)(!0),[w,S]=(0,a.useState)(!1),[I,k]=(0,a.useState)(null),[C,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o&&"function"==typeof c&&c()},[o]);let E=()=>{o&&"function"==typeof d&&d()},{control:T,setValue:O,handleSubmit:R,formState:{errors:P}}=(0,eC.mN)({defaultValues:{userName:null!=(t=null==v?void 0:v.userName)?t:p.t("User name")},mode:"onChange",resolver:(0,ek.t)(eT.Ik().shape({userName:eT.Yj().min(3,()=>p.t("Must be at least {{n}} characters long",{n:3})).max(64,()=>p.t("Must be at most {{n}} characters long",{n:64})).required()}))});(0,a.useEffect)(()=>{O("userName",null==v?void 0:v.userName),k(null);let e=setTimeout(async()=>{"string"==typeof g.palette.customColors.userColors.gradient[null==v?void 0:v.userColor]&&k(g.palette.customColors.userColors.gradient[null==v?void 0:v.userColor])},150);return()=>clearTimeout(e)},[x.mode,null==v?void 0:v.userColor,null==v?void 0:v.userName]);let N=e=>{"string"==typeof(null==e?void 0:e.userName)&&(O("userName",e.userName),m.setUser({...m.user,userName:e.userName,userColor:e.userColor,userAvatarId:e.userAvatarId}))},M=async()=>{z(!0)},L=async()=>{E(),m.logout()},B=async e=>{if(A){b(!1);try{var t;let n=await eO.A.post("account",e);N(null!=(t=null==n?void 0:n.data)?t:{})}catch(e){}b(!0),S(!1)}},D=async e=>{if(A){b(!1);try{var t;let n=await eO.A.post("account",{userColor:e});N(null!=(t=null==n?void 0:n.data)?t:{})}catch(e){}b(!0)}};return o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(er.A,{open:!0,onClose:E,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:750,p:0}},children:(0,l.jsx)(eB.Ay,{container:!0,spacing:6,children:(0,l.jsx)(eB.Ay,{item:!0,xs:12,children:(0,l.jsxs)(eD.A,{sx:{position:"relative"},children:[(0,l.jsx)(e1,{color:I}),(0,l.jsx)(eN.A,{sx:{zIndex:10,position:"relative"},action:(0,l.jsxs)(h.A,{sx:{display:"flex"},children:[w&&A?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(el.A,{title:p.t("Profile color"),children:(0,l.jsx)(en.A,{sx:{zIndex:10,background:"light"===g.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:g.palette.background.paper}},onClick:e=>y(e.currentTarget),children:(0,l.jsx)(eU.A,{color:"info"})})}),(0,l.jsx)(eF.A,{keepMounted:!0,anchorEl:j,open:!!j,onClose:()=>y(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{ml:"2px",mt:2},PaperProps:{style:{minWidth:20}},children:Object.keys(g.palette.customColors.userColors.solid).map(e=>(0,l.jsx)(eL.A,{selected:(null==v?void 0:v.userColor)==e,onClick:()=>{y(null),D(e)},children:(0,l.jsx)(h.A,{sx:{width:15,height:15,borderRadius:"50%",background:g.palette.customColors.userColors.solid[e]}})},"user-color-".concat(e)))})]}):null,(0,l.jsx)(el.A,{title:w?p.t("Exit edit mode"):p.t("Edit profile"),children:(0,l.jsx)(en.A,{sx:{ml:2,background:"light"===g.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:g.palette.background.paper}},variant:"contained",color:"inherit",onClick:()=>{if(!w)return void S(!0);O("userName",v.userName),S(!1)},children:w?(0,l.jsx)(eX.A,{}):(0,l.jsx)(eY.A,{})})})]})}),(0,l.jsxs)(eP.A,{sx:{zIndex:10},children:[(0,l.jsx)("form",{onSubmit:R(B),autoComplete:"off",children:(0,l.jsx)(eB.Ay,{container:!0,spacing:7,sx:{justifyContent:"left"},children:(0,l.jsx)(eB.Ay,{item:!0,xs:12,sx:{my:4,display:"flex"},children:(0,l.jsxs)(h.A,{sx:{display:"flex",width:"100%",alignItems:{xs:"center",md:"flex-end"},flexDirection:{xs:"column",md:"row"}},children:[(0,l.jsx)(eZ,{crop:"fill",borderColor:g.palette.background.paper,backgroundColor:g.palette.background.paper,inputName:"avatar",uploadPath:"account/avatar",active:w,label:p.t("Select avatar"),radius:"50%",onChange:async()=>{var e;let t=await eO.A.get("account");"string"==typeof(null==(e=t.data)?void 0:e.id)&&m.setUser(t.data)},alt:null!=(n=null==v?void 0:v.userName)?n:p.t("User name"),getSrc:()=>{var e;let t=new Date().toJSON().slice(0,10),n="".concat(u.A.s3Url,"/users/").concat(null==v?void 0:v.id,"/?cb=").concat(t);return(null==(e=m.user)?void 0:e.id)===(null==v?void 0:v.id)&&(n="string"==typeof(null==v?void 0:v.userAvatarId)?"".concat(u.A.s3Url,"/users/").concat(v.id,"/").concat(v.userAvatarId,".png"):"/img/placeholder/user.png"),n}}),(0,l.jsx)(h.A,{sx:{ml:{xs:0,md:6},width:"100%",position:"relative"},children:w?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.A,{sx:{width:"100%",display:"flex"},children:[(0,l.jsx)(eC.xI,{name:"userName",control:T,fullWidth:!0,rules:{required:!0},render:e=>{let{field:{value:t,onChange:n}}=e;return(0,l.jsx)(eM.A,{sx:{textAlign:"center"},fullWidth:!0,required:!0,spellCheck:!1,autoComplete:"off",autoFocus:!0,disabled:!A,value:t,label:p.t("User name"),onChange:n,placeholder:"John Doe"})}}),(0,l.jsx)(ei.A,{variant:"contained",startIcon:(0,l.jsx)(eW.A,{}),sx:{ml:3},type:"submit",disabled:!A,children:p.t("Save")})]}),P.userName&&(0,l.jsx)(eR.A,{sx:{color:"error.main",position:"absolute",bottom:-25},children:P.userName.message})]}):(0,l.jsx)(h.A,{sx:{display:"flex",alignItems:"center"},children:(0,l.jsx)(el.A,{title:(null==v?void 0:v.createdAt)?"".concat(p.t("Member since")," ").concat(ez(v.createdAt,x.lang,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})):null,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"start",flexDirection:"column"},children:[(0,l.jsx)(h.A,{sx:{display:"flex",alignItems:"center"},children:(0,l.jsx)(et.A,{variant:"h6",children:v.userName})}),(0,l.jsx)(et.A,{variant:"caption",children:null==v?void 0:v.userEmail})]})})})})]})})})}),(0,l.jsxs)(h.A,{sx:{display:"flex",justifyContent:"end",width:"100%",mt:2},children:[(0,l.jsx)(ei.A,{startIcon:(0,l.jsx)(eK.A,{}),onClick:M,color:"error",sx:{mr:2},children:p.t("Log out")}),(0,l.jsx)(ei.A,{color:"secondary",onClick:E,children:p.t("Close")})]})]})]})})})}),C?(0,l.jsxs)(er.A,{open:!0,onClose:()=>z(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,l.jsx)(ee.A,{children:p.t("Log out")}),(0,l.jsx)($.A,{children:(0,l.jsxs)(eo.A,{severity:"warning",children:[p.t("Are you sure you want to log out of this computer?"),(0,l.jsx)("br",{}),p.t("You can reconnect this computer to your account at any time.")]})}),(0,l.jsxs)(Q.A,{children:[(0,l.jsx)(ei.A,{color:"secondary",onClick:()=>z(!1),children:p.t("Cancel")}),(0,l.jsx)(ei.A,{variant:"text",color:"error",onClick:()=>L(),startIcon:(0,l.jsx)(eK.A,{}),children:p.t("Log out")})]})]}):null]}):null};var e5=n(29814),e3=n(7360),e4=n(34318),e9=n(4567),e6=n(215),e8=n(54582);let e7=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{border:"1px solid ".concat("dark"===t.palette.mode?t.palette.text.disabled:t.palette.divider),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),marginRight:t.spacing(2),marginTop:t.spacing(1),borderRadius:t.spacing(2),paddingBottom:t.spacing(1),minHeight:"30px",position:"relative","&:before":{content:'""',display:"block",position:"absolute",top:"-2px",left:"1px",width:"calc(100% - 2px)",height:"90%",border:"2px solid ".concat("dark"===t.palette.mode?t.palette.text.disabled:t.palette.divider),borderRadius:t.spacing(2)}}});function te(e){let{final:t=!1,children:n,sx:r={}}=e;return("object"!=typeof r||null===r)&&(r={}),(0,l.jsx)(e7,{sx:{...r},style:{...t?{marginRight:0}:{}},children:n})}function tt(e){let{sx:t={}}=e,{getDeviceInfo:n}=(0,c.P)();return("object"!=typeof t||null===t)&&(t={}),(0,l.jsxs)(h.A,{sx:{display:"flex",...t},children:["macos"===n().os?null:(0,l.jsx)(te,{children:(0,l.jsx)(e8.A,{fontSize:"small"})}),(0,l.jsx)(te,{children:(0,l.jsx)(e9.A,{fontSize:"small"})}),"macos"===n().os?(0,l.jsx)(te,{children:(0,l.jsx)(e4.A,{fontSize:"small"})}):null,(0,l.jsx)(te,{children:(0,l.jsx)(e6.A,{fontSize:"small"})})]})}var tn=n(18539),tl=n(2220),tr=n(38375),ti=n(75359);let to=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{position:"relative",width:360,height:240,perspective:"400px",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"10px","@keyframes cardB":{"0%,40%":{transform:"translate3d(0,20px,0)",zIndex:1},"45%":{transform:"translate3d(-115px,0,0)",zIndex:1},"45.1%":{zIndex:2},"50%,90%":{transform:"translate3d(0,-20px,40px)",zIndex:2},"95%":{transform:"translate3d(115px,0,0)",zIndex:2},"95.1%":{zIndex:1},"100%":{transform:"translate3d(0,20px,0)",zIndex:1}},"@keyframes cardA":{"0%,40%":{transform:"translate3d(0,-20px,40px)",zIndex:2},"45%":{transform:"translate3d(115px,0,0)",zIndex:2},"45.1%":{zIndex:1},"50%,90%":{transform:"translate3d(0,20px,0)",zIndex:1},"95%":{transform:"translate3d(-115px,0,0)",zIndex:1},"95.1%":{zIndex:2},"100%":{transform:"translate3d(0,-20px,40px)",zIndex:2}}}}),ts=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{position:"absolute",width:180,height:140,borderRadius:"16px",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",willChange:"transform"}}),ta=(0,p.Ay)(ts)(e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, rgba(140,90,255,0.55), rgba(60,130,255,0.45))",boxShadow:"0 18px 40px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.25)",animation:"cardA 4s linear infinite"}}),tc=(0,p.Ay)(ts)(e=>{let{theme:t}=e;return{background:"linear-gradient(135deg, rgba(80,140,255,0.55), rgba(30,70,160,0.45))",boxShadow:"0 22px 44px rgba(0,0,0,0.32), inset 0 1px 0 rgba(255,255,255,0.28)",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",padding:"10px",gap:"5px",alignContent:"center",justifyContent:"center",animation:"cardB 4s linear infinite"}}),tu=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}});function td(){return(0,l.jsxs)(to,{children:[(0,l.jsx)(ta,{children:(0,l.jsx)(ti.A,{})}),(0,l.jsxs)(tc,{children:[(0,l.jsx)(tu,{children:(0,l.jsx)(tn.A,{sx:{fontSize:"50px",fill:"#fff"}})}),(0,l.jsx)(tu,{children:(0,l.jsx)(tl.A,{sx:{fontSize:"50px",fill:"#fff"}})}),(0,l.jsx)(tu,{children:(0,l.jsx)(tr.A,{sx:{fontSize:"50px",fill:"#fff"}})})]})]})}let tx=e=>{let{isOpen:t=!1,onOpen:n=()=>{}}=e,{getDeviceInfo:r}=(0,c.P)(),{i18n:o}=(0,i.B)();(0,a.useEffect)(()=>{t&&"function"==typeof n&&n()},[t]);let s="".concat("macos"===r().os?"Shift ⌘ ":"Ctrl+Shift+","Backspace");return t?(0,l.jsxs)(er.A,{open:!0,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,l.jsx)(ee.A,{children:o.t("You shall pass!")}),(0,l.jsxs)($.A,{children:[(0,l.jsx)(eo.A,{icon:(0,l.jsx)(e3.A,{}),severity:"success",children:o.t("You are about to master using this application in a few seconds.")}),(0,l.jsx)(h.A,{sx:{mt:6,position:"relative"},className:"pop",children:(0,l.jsxs)(eo.A,{icon:(0,l.jsx)(e5.A,{className:"zoom-in"}),severity:"info",children:[o.t("Toggle pass-through with this shortcut:")," ",(0,l.jsx)("b",{children:s})]})}),(0,l.jsxs)(h.A,{sx:{mt:8,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",flexDirection:"column"},children:[(0,l.jsx)(td,{}),(0,l.jsx)(tt,{sx:{transform:"scale(1.5)",my:8}})]})]})]}):null};var tp=n(81041),th=n(60999),tm=n(66766),tf=n(61293),tg=n(79701),tv=n(95978),tj=n(46320),ty=n(71015),tA=n(20003);function tb(){let e=(0,m._)(["\n0%   { transform: scale(0.2); opacity: 0; }\n100% { transform: scale(1); opacity: 1; }"]);return tb=function(){return e},e}function tw(){let e=(0,m._)(["\n0%   { transform: scale(0.1) translateY(10rem); opacity: 0; }\n100% { transform: scale(1) translateY(0); opacity: 1; }"]);return tw=function(){return e},e}let tS=(0,f.i7)(tb()),tI=(0,f.i7)(tw()),tk=(0,p.Ay)(tj.A)(e=>{let{theme:t}=e;return{position:"absolute",right:"-10rem",bottom:"-10rem",width:"35rem",height:"35rem",zIndex:1,opacity:.1}}),tC=(0,p.Ay)("pre")(e=>{let{theme:t}=e;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}}),tz=(0,p.Ay)(ei.A)(e=>{let{theme:t,index:n=0}=e;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(tI," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}}),tE=(0,p.Ay)(tp.Ay)(e=>{let{theme:t,index:n=0}=e;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(tS," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}}),tT=e=>{var t,n,r,s,c;let{isOpen:d=!1,onOpen:x=()=>{},onClose:p=()=>{}}=e,{i18n:h}=(0,i.B)(),m=(0,q.A)(),[f,g]=(0,a.useState)({});(0,a.useEffect)(()=>{d&&"function"==typeof x&&x()},[d]),(0,a.useEffect)(()=>{let e=setTimeout(async()=>{var e,t;let n=u.A.version,l=await (null==(e=window.sdk)?void 0:e.ipc.main.getProcessVersions()),r=await (null==(t=window.sdk)?void 0:t.ipc.device.getSerialNumber());g({...l,app:n,serialNumber:r})},150);return()=>clearTimeout(e)},[]);let v=()=>{d&&"function"==typeof p&&p()},j=async()=>{var e;o.o.info(h.t("Navigating to licenses..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("https://github.com/oglama/dos/blob/main/NOTICE.md"))},y=async()=>{var e;o.o.info(h.t("Navigating to Terms of Service..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("".concat(u.A.siteUrl,"/terms-of-service/")))},A=async()=>{var e;o.o.info(h.t("Navigating to my computers..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("".concat(u.A.siteUrl,"/#/tab:computers")))},b=[{icon:(0,l.jsx)(ef.A,{color:"inherit",fontSize:"large"}),key:"serialNumber",name:h.t("Serial Number"),version:null!=(t=f.serialNumber)?t:null,tooltip:h.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard.")},{icon:(0,l.jsx)(tg.A,{color:"warning",fontSize:"large"}),key:"chrome",name:"Chromium",version:null!=(n=f.chrome)?n:null},{icon:(0,l.jsx)(tm.A,{color:"primary",fontSize:"large"}),key:"electron",name:"Electron.js",version:null!=(r=f.electron)?r:null},{icon:(0,l.jsx)(tA.A,{color:"success",fontSize:"large"}),key:"node",name:"Node.js",version:null!=(s=f.node)?s:null},{icon:(0,l.jsx)(ti.A,{size:35,animate:!0}),key:"dos",name:"Draw on Screen",version:null!=(c=f.app)?c:null}];return d?(0,l.jsxs)(er.A,{open:!0,onClose:v,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,l.jsx)(tk,{color:"action",className:"rotate"}),(0,l.jsx)(ee.A,{sx:{position:"relative",zIndex:2},children:h.t("About Draw on Screen")}),(0,l.jsx)($.A,{sx:{position:"relative",zIndex:2},children:(0,l.jsx)(th.A,{children:b.map((e,t)=>{var n;return(0,l.jsxs)(tE,{index:t,children:[e.icon,(0,l.jsx)(et.A,{variant:"body2",sx:{mx:2},children:e.name}),e.version?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(el.A,{title:null!=(n=e.tooltip)?n:null,placement:"top",children:(0,l.jsx)(tC,{children:e.version})}),(0,l.jsx)(el.A,{title:h.t("Click to copy"),placement:"top",children:(0,l.jsx)(en.A,{onClick:()=>((e,t,n)=>{o.o.info("serialNumber"===e?h.t("Copied computer serial number to clipboard"):h.t("Copied {{name}} version to clipboard",{name:t}),null,!1),m.copy("serialNumber"===e?n:"".concat(t," v").concat(n))})(e.key,e.name,e.version),children:(0,l.jsx)(eh.A,{fontSize:"small"})})}),"serialNumber"===e.key?(0,l.jsx)(el.A,{title:h.t("Go to my computers"),placement:"top",children:(0,l.jsx)(en.A,{onClick:()=>A(),children:(0,l.jsx)(ty.A,{fontSize:"small"})})}):null]}):(0,l.jsx)(eG.A,{sx:{width:"15rem",mt:2},spacing:0})]},"".concat(t,"-").concat(e.key))})})}),(0,l.jsxs)(Q.A,{sx:{position:"relative",zIndex:2},children:[(0,l.jsx)(tz,{index:5,onClick:j,startIcon:(0,l.jsx)(tv.A,{}),children:h.t("Licenses")}),(0,l.jsx)(tz,{index:7,onClick:y,startIcon:(0,l.jsx)(tf.A,{}),children:h.t("Terms")}),(0,l.jsx)(ei.A,{color:"secondary",onClick:v,children:h.t("Close")})]})]}):null},tO=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{position:"relative",pointerEvents:"auto",zIndex:4}}),tR=()=>{var e;let{onDisplayInfo:t,onDialog:n,dialogSet:i,getTutorialStep:o,setTutorialStep:s}=(0,c.P)(),[d,x]=(0,a.useState)(null),p=(0,r.A)(),h=()=>{i(null)};(0,a.useEffect)(()=>{let e=t(async e=>{let{info:t}=e;t.passThru&&h(),t.passThru&&t.onPassThru&&0===o()&&s(1)}),l=n(e=>x(e));return()=>{e(),l()}},[]),(0,a.useEffect)(()=>{var e;p.user&&u.A.irc.WINDOW_MAIN===(null==(e=window.sdk)?void 0:e.irc.winName)&&0===o()&&i("dialog:pass-thru")},[p.user]);let m=null!=(e=({"dialog:about":tT,"dialog:profile":e2,"dialog:pass-thru":tx,"dialog:subscription":eI})[d])?e:null;return(0,l.jsx)(tO,{children:m?(0,l.jsx)(m,{isOpen:!0,onClose:h}):null})};var tP=n(97578),tN=n(23820),tM=n(25999);let tL=(0,p.Ay)(h.A)(e=>{var t,n;let{theme:l,color:r}=e;return{backgroundColor:l.palette.background.paper,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,height:"100%",width:"30%",backgroundColor:null!=(n=null==(t=l.palette[r])?void 0:t.main)?n:l.palette.primary.main,animation:"progress 1.5s infinite",willChange:"transform"},"@keyframes progress":{"0%":{transform:"translateX(-100%) scaleX(1)"},"70%":{transform:"translateX(200%) scaleX(1.5)"},"100%":{transform:"translateX(350%) scaleX(1)"}}}}),tB=e=>{let{color:t="primary",variant:n="determinate",value:r=0,sx:i={}}=e;return("object"!=typeof i||null===i)&&(i={}),i={width:"100%",height:"4px",...i},["determinate","buffer"].includes(n)?(0,l.jsx)(tM.A,{sx:i,color:t,variant:n,value:r}):(0,l.jsx)(tL,{sx:i,color:t})},tD=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"250px",height:"40px",position:"relative",display:"flex",alignItems:"center",justifyContent:"start",paddingLeft:t.spacing(2),paddingRight:t.spacing(2),borderRadius:0,textTransform:"none",textAlign:"left"}}),tF=(0,p.Ay)(et.A)(e=>{let{theme:t}=e;return{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"180px"}}),tX=e=>{var t;let{children:n}=e,{onUpdaterInfo:r,getUpdaterInfo:s,onUpdaterStatus:u,getUpdaterStatus:d}=(0,c.P)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null),[f,g]=(0,a.useState)(null),[v,j]=(0,a.useState)(!1),[y,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{g(s());let e=r(e=>{let{info:t}=e;return g(t)});m(d());let t=u(e=>{let{status:t}=e;return m(t)});return(async()=>{var e;return A("linux"===await (null==(e=window.sdk)?void 0:e.ipc.device.getOS()))})(),()=>{e(),t()}},[]),(0,a.useEffect)(()=>{var e;null==(e=window.sdk)||e.ipc.updater.check()},[]),(0,a.useEffect)(()=>{!(null==p?void 0:p.working)&&(null==p?void 0:p.error)&&o.o.error("".concat(x.t("Update cancelled")," ").concat(p.error),{duration:5e3})},[p]);let b=async()=>{j(!0)},w=async()=>{var e;await (null==(e=window.sdk)?void 0:e.ipc.updater.install()),j(!1)};return(null==f?void 0:f.version)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(tD,{children:[!(null==f?void 0:f.filePath)||(null==p?void 0:p.working)?(0,l.jsx)(h.A,{sx:{ml:2,mr:4},children:(null==p?void 0:p.working)?(0,l.jsx)(tN.A,{className:"rotate-360"}):(0,l.jsx)(ev.A,{color:"primary"})}):null,(0,l.jsx)(h.A,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"start"},children:!(null==f?void 0:f.filePath)||(null==p?void 0:p.working)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tF,{variant:"caption",color:"inherit",children:(null==p?void 0:p.working)?x.t("Updating to v.{{version}}...",{version:f.version}):x.t("Downloading v.{{version}}...",{version:f.version})}),(0,l.jsx)(tB,{color:"primary",sx:{mt:1},variant:(null==p?void 0:p.working)?"indeterminate":"determinate",value:(null==p?void 0:p.working)?null:null!=(t=null==f?void 0:f.progress)?t:0})]}):(0,l.jsx)(el.A,{title:x.t("Update to version {{version}}",{version:f.version}),placement:"top",children:(0,l.jsx)(ei.A,{fullWidth:!0,size:"small",variant:"outlined",startIcon:(0,l.jsx)(ev.A,{}),onClick:()=>b(),children:x.t("Update")})})})]}),v?(0,l.jsxs)(er.A,{open:!0,onClose:()=>!(null==p?void 0:p.working)&&j(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:1}},children:[(0,l.jsx)(ee.A,{children:(0,l.jsx)(h.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(et.A,{variant:"h3",sx:{ml:4},children:(null==p?void 0:p.working)?x.t("Updating to v.{{version}}...",{version:f.version}):x.t("Install update")})})}),(0,l.jsx)($.A,{children:(null==p?void 0:p.working)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eo.A,{severity:"warning",sx:{mb:4},children:x.t("Please do not close this window until the update is complete.")}),(0,l.jsx)(eG.A,{sx:{mb:-4}})]}):(0,l.jsx)(eo.A,{severity:"info",icon:(0,l.jsx)(tP.A,{}),children:y?x.t("Updating to version {{version}} requires root privileges. Please enter your root password in the next dialog.",{version:f.version}):x.t("Update to version {{version}} and restart the application.",{version:f.version})})}),(null==p?void 0:p.working)?null:(0,l.jsxs)(Q.A,{children:[(0,l.jsx)(ei.A,{color:"secondary",variant:"text",onClick:()=>j(!1),children:x.t("Cancel")}),(0,l.jsx)(ei.A,{size:"small",className:"pop",startIcon:(0,l.jsx)(ev.A,{}),color:"primary",onClick:()=>w(),variant:"contained",children:x.t("Update and restart")})]})]}):null]}):n};var tY=n(68697);function tU(){let{webcamGetConfigId:e,onWebcamConfigId:t}=(0,c.P)(),{getWebcamValue:n}=(0,s.t)(),r=(0,ej.A)(),[i,o]=(0,a.useState)(e());return(0,a.useEffect)(()=>{o(e());let n=t(e=>{let{configId:t}=e;return o(t)});return()=>n()},[]),n(i,"id")?(0,l.jsx)(h.A,{sx:{position:"absolute",top:"-6px",right:"-6px",width:"15px",height:"15px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fontSize:"0.65rem",background:r.palette.background.default,border:"1px solid ".concat(r.palette.divider),zIndex:2},children:i}):null}var tK=n(63684),tW=n(95578),t_=n(51260),tH=n(99833),tV=n(19678),tG=n(81579),tq=n(32750),tZ=n(66786),tJ=n(31763),tQ=n(26304),t$=n(42401),t0=n(76543),t1=n(81793),t2=n(86914),t5=n(8111),t3=n(67601);let t4=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}}),t9=e=>{if(u.A.orientation.LANDSCAPE===e)return t2.A;if(u.A.orientation.PORTRAIT===e)return t1.A;let t="".concat(e).split(":").map(e=>parseInt(e,10)).filter(e=>Number.isInteger(e));return Array.isArray(t)&&2===t.length?t[0]===t[1]?t3.A:t[0]<t[1]?t1.A:t2.A:t5.A};function t6(e){var t;let{settingKey:n,title:r=null,sx:o={}}=e,{settings:c,saveSettings:d}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=c[n])?t:u.A.orientation.LANDSCAPE);("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(c[n]!==p&&d({[n]:p})),50);return()=>clearTimeout(e)},[p]);let f=Object.values(u.A.orientation),g=e=>u.A.orientation.LANDSCAPE===e?x.t("Wide"):u.A.orientation.PORTRAIT===e?x.t("Tall"):e;return(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e&&f.includes(e)){let t=t9(e);return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(t4,{children:(0,l.jsx)(t,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:g(e)})]})}return(0,l.jsx)(et.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:f.map(e=>{let t=t9(e);return(0,l.jsx)(eL.A,{value:e,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(t4,{children:(0,l.jsx)(t,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:g(e)})]})},e)})})})}var t8=n(19400),t7=n(15959),ne=n(80722),nt=n(73281),nn=n(91247),nl=n(40577),nr=n(28417),ni=n(61548),no=n(62592);let ns=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:t.spacing(.5),padding:t.spacing(1)}});function na(e){var t;let{settingKey:n,title:r=null,sx:o={}}=e,{onDisplayInfo:u,onToolbarVisible:d}=(0,c.P)(),{settings:x,saveSettings:p}=(0,s.t)(),{i18n:h}=(0,i.B)(),[m,f]=(0,a.useState)(null!=(t=x[n])?t:"bottom-right"),[g,v]=(0,a.useState)(null),j=()=>{x[n]!==m&&p({[n]:m})};(0,a.useEffect)(()=>{let e=u(()=>v(null)),t=d(()=>v(null));return()=>{e(),t()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(j,50);return()=>clearTimeout(e)},[m]);let y=[{value:"top-left",Icon:nt.A,label:h.t("Top-left")},{value:"top",Icon:no.A,label:h.t("Top")},{value:"top-right",Icon:ne.A,label:h.t("Top-right")},{value:"left",Icon:ni.A,label:h.t("Left")},{value:"center",Icon:nn.A,label:h.t("Center")},{value:"right",Icon:nl.A,label:h.t("Right")},{value:"bottom-left",Icon:t7.A,label:h.t("Bottom-left")},{value:"bottom",Icon:nr.A,label:h.t("Bottom")},{value:"bottom-right",Icon:t8.A,label:h.t("Bottom-right")}],A=y.find(e=>e.value===m);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(ei.A,{tabIndex:-1,size:"small",variant:"text",color:"inherit",onClick:e=>v(e.currentTarget),sx:{minWidth:0,textTransform:"none",...o},children:A?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.Icon,{fontSize:"small"}),(0,l.jsx)(et.A,{sx:{ml:2,fontSize:"0.8rem"},children:A.label})]}):(0,l.jsx)(et.A,{sx:{fontSize:"0.8rem"},children:h.t("Select an option")})})}),(0,l.jsx)(eF.A,{anchorEl:g,open:!!g,sx:{mt:-1},onClose:()=>v(null),transformOrigin:{vertical:"bottom",horizontal:"left"},anchorOrigin:{vertical:"top",horizontal:"left"},MenuListProps:{disablePadding:!0},children:(0,l.jsx)(ns,{children:y.map(e=>{let{value:t,Icon:n,label:r}=e;return(0,l.jsx)(el.A,{title:r,placement:"top",children:(0,l.jsx)(ei.A,{tabIndex:-1,onClick:()=>{f(t),v(null)},sx:{"&.MuiButton-root":{p:1},position:"relative",minWidth:"30px",flexGrow:0,m:1},variant:t===m?"contained":"text",color:t===m?"primary":"inherit",children:(0,l.jsx)(n,{fontSize:"small"})})},t)})})})]})}var nc=n(57105);let nu=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nd(e){var t;let{settingKey:n,title:r=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:d}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=u[n])?t:80);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(p)&&u[n]!==p&&d({[n]:p})),50);return()=>clearTimeout(e)},[p]);let f={o1:{value:10},o2:{value:20},o5:{value:50},o8:{value:80},o10:{value:100}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t)return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(nu,{children:(0,l.jsx)(nc.A,{})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:t.value>0?"".concat(t.value,"%"):x.t("Transparent")})]})}return(0,l.jsx)(et.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>(0,l.jsx)(eL.A,{value:e.value,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(nu,{children:(0,l.jsx)(nc.A,{})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:e.value>0?"".concat(e.value,"%"):x.t("Transparent")})]})},e.value))})})}function nx(e){var t;let{settingKey:n,configId:r=null,title:o=null,sx:u={}}=e,{onWebcamList:d,webcamGetList:x,webcamSetConfigId:p}=(0,c.P)(),{settings:m,saveSettings:f}=(0,s.t)(),{i18n:g}=(0,i.B)(),[v,j]=(0,a.useState)(x()),[y,A]=(0,a.useState)(null!=(t=m[n])?t:"");return("object"!=typeof u||null===u)&&(u={}),(0,a.useEffect)(()=>{j(x());let e=d(async e=>{let{list:t}=e;j(t)});return()=>{e()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(m[n]!==y&&(p(r),f({[n]:y}))),50);return()=>clearTimeout(e)},[y]),v.length?(0,l.jsx)(el.A,{title:o,placement:"bottom",children:(0,l.jsxs)(t0.A,{displayEmpty:!0,renderValue:e=>{if("string"==typeof e){let t=v.find(t=>t.deviceId===e);if(t)return(0,l.jsxs)(h.A,{display:"flex",alignItems:"center",children:[(0,l.jsx)(tY.A,{fontSize:"small",sx:{mr:3,ml:-2}}),(0,l.jsx)(el.A,{title:t.label,placement:"bottom",children:(0,l.jsx)(et.A,{variant:"caption",color:"inherit",sx:{display:"inline-block",maxWidth:"250px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.label})})]})}return(0,l.jsx)(et.A,{variant:"caption",sx:{pl:2},children:g.t("Select a webcam")})},value:y,sx:{"&.MuiInput-root:before":{display:"none"},px:0,borderRadius:1,height:"32px",...u},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>A(e.target.value),children:[v.map(e=>{let{deviceId:t,label:n}=e;return(0,l.jsxs)(eL.A,{value:t,children:[(0,l.jsx)(tY.A,{fontSize:"small",sx:{mr:2}}),(0,l.jsx)(et.A,{variant:"caption",color:"inherit",children:n})]},t)}),(0,l.jsxs)(eL.A,{value:"",children:[(0,l.jsx)(tq.A,{fontSize:"small",sx:{mr:2}}),(0,l.jsx)(et.A,{variant:"caption",color:"inherit",children:g.t("No webcam")})]})]})}):(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,l.jsx)(tq.A,{fontSize:"small",sx:{mr:2}}),(0,l.jsx)(et.A,{variant:"caption",children:g.t("No webcam available")})]})}var np=n(89879);function nh(e){var t;let{settingKey:n,title:r=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:d}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=u[n])?t:30);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(p)&&u[n]!==p&&d({[n]:p})),50);return()=>clearTimeout(e)},[p]);let f={xxs:{value:20},xs:{value:30},sm:{value:40},md:{value:50},lg:{value:60},xl:{value:70},"2xl":{value:80},"3xl":{value:90},"4xl":{value:100}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{value:e}=t;return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(np.A,{fontSize:"small"}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"H: ".concat(e,"%")})]})}}return(0,l.jsx)(et.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{value:t}=e;return(0,l.jsx)(eL.A,{value:t,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(np.A,{fontSize:"small"}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(t,"%")})]})},t)})})})}var nm=n(33907),nf=n(31821);let ng=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nv(e){var t;let{settingKey:n,horizontal:r=!1,title:o=null,options:c=null,sx:u={},disabled:d=!1}=e,{settings:x,saveSettings:p}=(0,s.t)(),{i18n:m}=(0,i.B)(),[f,g]=(0,a.useState)(null!=(t=x[n])?t:5);("object"!=typeof u||null===u)&&(u={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(f)&&x[n]!==f&&p({[n]:f})),50);return()=>clearTimeout(e)},[f]);let v={xs:{value:0},sm:{value:5},md:{value:10},lg:{value:15},xl:{value:20}},j="object"==typeof c&&null!==c&&Object.keys(c).length?Object.keys(c).map(e=>{let t=null;return"object"==typeof v[e]&&((t={...v[e]}).value=c[e]),t}).filter(e=>null!==e):Object.values(v);return(0,l.jsx)(el.A,{title:o,placement:"bottom",children:(0,l.jsx)(h.A,{children:(0,l.jsx)(t0.A,{disabled:d,displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(j).find(t=>t.value===e);if("object"==typeof t){let{value:e}=t;return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ng,{children:r?(0,l.jsx)(nm.A,{fontSize:"small"}):(0,l.jsx)(nf.A,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(r?"MX":"MY",": ").concat(e,"%")})]})}}return(0,l.jsx)(et.A,{variant:"caption",children:m.t("Select an option")})},value:f,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...u},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>g(e.target.value),children:j.map(e=>{let{value:t}=e;return(0,l.jsx)(eL.A,{value:t,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[r?(0,l.jsx)(nm.A,{fontSize:"small"}):(0,l.jsx)(nf.A,{fontSize:"small"}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(t,"%")})]})},t)})})})})}var nj=n(78376),ny=n(82175),nA=n(91251);let nb=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nw(e){var t;let{settingKey:n,title:r=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:d}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=u[n])?t:20);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(p)&&u[n]!==p&&d({[n]:p})),50);return()=>clearTimeout(e)},[p]);let f={none:{value:0},xs:{value:5},sm:{value:10},md:{value:20},lg:{value:40},xl:{value:80},pill:{value:9999}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t)return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(nb,{children:t.value>0?t.value>=9999?(0,l.jsx)(nA.A,{sx:{transform:"rotate(45deg)"}}):(0,l.jsx)(nj.A,{}):(0,l.jsx)(ny.A,{})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:t.value>0?t.value>=9999?x.t("Pill"):"\xd8 ".concat(t.value,"px"):x.t("Sharp corners")})]})}return(0,l.jsx)(et.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>(0,l.jsx)(eL.A,{value:e.value,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(nb,{children:e.value>0?e.value>=9999?(0,l.jsx)(nA.A,{sx:{transform:"rotate(45deg)"}}):(0,l.jsx)(nj.A,{}):(0,l.jsx)(ny.A,{})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:e.value>0?e.value>=9999?x.t("Pill"):"\xd8 ".concat(e.value,"px"):x.t("Sharp corners")})]})},e.value))})})}var nS=n(34785);function nI(){let e=(0,m._)(["\n0%   { transform: scale(0.1) translateY(10rem); opacity: 0; width: 0px; margin-left: 0px; }\n100% { transform: scale(1) translateY(0); opacity: 1; width: 30px; margin-left: 8px; }"]);return nI=function(){return e},e}function nk(){let e=(0,m._)(["\n0%   { transform: scale(0.1) translateY(2rem); opacity: 0; width: 0px; margin-left: 0px; }\n100% { transform: scale(1) translateY(0); opacity: 1; width: 60px; margin-left: 8px; }"]);return nk=function(){return e},e}let nC=(0,f.i7)(nI()),nz=(0,f.i7)(nk());function nE(e){let{title:t,Icon:n,children:r,index:i=0,chip:o=null,label:u=null,Bubble:d=null,double:x=!1,startIcon:p=null,disabled:m=!1,useCursor:f=!1,onClick:g=()=>{},anchorRight:v=!1,overflowVisible:j=!1}=e,{onDisplayInfo:y,onToolbarVisible:A,onWebcamList:b}=(0,c.P)(),{settings:w}=(0,s.t)(),S=(0,ej.A)(),[I,k]=(0,a.useState)(null),[C,z]=(0,a.useState)(!1);n||(n=nS.A),(0,a.useEffect)(()=>{let e=b(()=>k(null)),t=y(e=>{let{info:t}=e;k(null),z(t.passThru)}),n=A(()=>k(null));return()=>{e(),t(),n()}},[]);let E=e=>{k(r?e.currentTarget:null),"function"==typeof g&&g(e)},T=!C&&(t||o)?(0,l.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[o?(0,l.jsx)(h.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:o}):null,t?(0,l.jsx)(h.A,{sx:{...o?{mt:1}:{}},children:t}):null]}):null,O=w.animations?C:!C;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(el.A,{title:T,placement:"bottom",children:(0,l.jsx)(h.A,{children:(0,l.jsxs)(h.A,{"data-use-cursor":f?"true":null,sx:{...w.animations?{animation:"".concat(x?nz:nC," ").concat(x?350:750,"ms ease-in-out forwards"),animationDelay:"".concat(i*(x?50:100),"ms")}:{},justifyContent:"center",transformOrigin:"50%",flexDirection:"row",position:"relative",display:"flex"},style:{animationDirection:O?"reverse":"normal",marginLeft:O?"8px":0,opacity:+!!O,width:O?x?60:30:0},children:[null!==d?(0,l.jsx)(d,{}):null,r?(0,l.jsx)(ei.A,{tabIndex:-1,"aria-label":"button-".concat(i),startIcon:p,onClick:E,variant:I?"contained":"outlined",color:I?"primary":"inherit",disabled:m,size:"small",sx:{borderColor:S.palette.divider,"&.MuiButton-root":{p:1},position:"relative",minWidth:"30px",flexGrow:0,zIndex:1},children:(0,l.jsx)(n,{fontSize:"small",color:"inherit"})}):(0,l.jsx)(en.A,{tabIndex:-1,"aria-label":"button-".concat(i),onClick:r?e=>k(e.currentTarget):E,disabled:m,color:"inherit",size:"small",sx:{"&:hover":{transform:"scale(1.1)"},transition:"transform 100ms linear",position:"relative",zIndex:1},children:(0,l.jsx)(n,{fontSize:"small",color:"inherit"})})]},"".concat(C))})}),r?(0,l.jsx)(eF.A,{transformOrigin:{vertical:"bottom",horizontal:v?"right":"left"},anchorOrigin:{vertical:"top",horizontal:v?"right":"left"},onClose:()=>k(null),open:!!I,anchorEl:I,sx:{mt:x?-3:-4,...j?{"& .MuiPaper-root":{overflow:"visible",maxHeight:"none"}}:{}},children:(0,l.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",px:3,py:1},children:[null!==u?(0,l.jsx)(h.A,{sx:{mb:2},children:(0,l.jsx)(et.A,{variant:"caption",sx:{textTransform:"uppercase"},children:u})}):null,(0,l.jsx)(h.A,{sx:{justifyContent:"start",position:"relative",alignItems:"center",display:"flex"},children:r})]})}):null]})}function nT(e){var t,n,r;let{configId:o,sx:u={}}=e,{webcamGetList:d,onWebcamList:x,webcamSetConfigId:p,onWebcamConfigId:m,webcamGetConfigId:f}=(0,c.P)(),{getWebcamKey:g,getWebcamValue:v}=(0,s.t)(),{i18n:j}=(0,i.B)(),[y,A]=(0,a.useState)(d()),[b,w]=(0,a.useState)(f()),S=v(o,"placement"),I=v(o,"id");("object"!=typeof u||null===u)&&(u={}),(0,a.useEffect)(()=>{A(d());let e=x(async e=>{let{list:t}=e;A(t)});w(f());let t=m(e=>{let{configId:t}=e;return w(t)});return()=>{e(),t()}},[]);let k=null!=(t=({1:tZ.A,2:tJ.A,3:tQ.A,4:t$.A})[o])?t:tZ.A,C=null!=(n=({1:t_.A,2:tH.A,3:tV.A,4:tG.A})[o])?n:t_.A,z=(0,l.jsx)(te,{final:!0,children:(0,l.jsx)(C,{fontSize:"small"})}),E=I?b===o?(0,l.jsx)(tK.A,{sx:{ml:1}}):(0,l.jsx)(tW.A,{sx:{ml:1}}):(0,l.jsx)(tq.A,{sx:{ml:1}}),T=null!=(r=({1:j.t("Toggle 1st configuration"),2:j.t("Toggle 2nd configuration"),3:j.t("Toggle 3rd configuration"),4:j.t("Toggle 4th configuration")})[o])?r:j.t("Toggle configuration"),O=-1!==S.indexOf("left")||-1!==S.indexOf("right"),R=-1!==S.indexOf("top")||-1!==S.indexOf("bottom");return(0,l.jsx)(nE,{anchorRight:!0,onClick:()=>p(o),title:"".concat(T," (F").concat(o,")"),startIcon:E,index:o-1,chip:z,Icon:k,double:!0,children:(0,l.jsxs)(h.A,{display:"flex",flexDirection:"column",children:[(0,l.jsx)(h.A,{sx:{mb:3},children:(0,l.jsx)(et.A,{variant:"caption",sx:{textTransform:"uppercase"},children:j.t("Webcam configuration #{{configId}}",{configId:o})})}),(0,l.jsx)(nx,{configId:o,settingKey:g(o,"id")}),y.length&&I?(0,l.jsxs)(h.A,{display:"flex",sx:{mt:3},children:[(0,l.jsx)(na,{sx:{ml:0},settingKey:g(o,"placement"),title:j.t("Placement")}),(0,l.jsx)(nh,{settingKey:g(o,"height"),title:j.t("Height")}),(0,l.jsx)(t6,{settingKey:g(o,"orientation"),title:j.t("Aspect ratio")}),(0,l.jsx)(nd,{settingKey:g(o,"passThruOpacity"),title:j.t("Opacity during pass-through")})]}):null,y.length&&I?(0,l.jsxs)(h.A,{display:"flex",sx:{mt:3},children:[(0,l.jsx)(nv,{sx:{ml:0},disabled:!O,settingKey:g(o,"marginX"),title:j.t("Horizontal margins"),horizontal:!0}),(0,l.jsx)(nv,{disabled:!R,settingKey:g(o,"marginY"),title:j.t("Vertical margins")}),(0,l.jsx)(nw,{settingKey:g(o,"radius"),title:j.t("Corner radius")})]}):null]})})}function nO(){let{i18n:e}=(0,i.B)();return(0,l.jsx)(nE,{index:7,Icon:tY.A,overflowVisible:!0,Bubble:tU,label:e.t("Webcam configurations"),title:"".concat(e.t("Webcam configurations")),children:(0,l.jsx)(h.A,{display:"flex",sx:{ml:-3,mt:1},children:[1,2,3,4].map(e=>(0,l.jsx)(nT,{configId:e,sx:{...1===e?{ml:0}:{}}},e))})})}var nR=n(28137),nP=n(99804),nN=n(89612),nM=n(99985);let nL=(0,p.Ay)(ei.A)(e=>{let{theme:t}=e;return{zIndex:1,position:"relative",minWidth:"fit-content",flexGrow:0,border:"1px solid ".concat("light"===t.palette.mode?"#ccc":"#333"),backgroundColor:"#ffffff",backgroundImage:"linear-gradient(45deg, #cccccc 25%, transparent 25%), linear-gradient(-45deg, #cccccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #cccccc 75%), linear-gradient(-45deg, transparent 75%, #cccccc 75%)",backgroundSize:"10px 10px",backgroundPosition:"0 0, 0 5px, 5px -5px, -5px 0px","&.MuiButton-root":{padding:0},"&>div":{width:"24px",height:"24px",borderRadius:"4px"},"&>div>div":{position:"absolute",top:"-6px",right:"-6px",width:"15px",height:"15px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fontSize:"0.65rem",background:t.palette.background.paper,border:"1px solid ".concat(t.palette.divider),zIndex:2}}});function nB(e){var t;let{settingKey:n,title:r=null,letter:i=null,sx:o={}}=e,{onDisplayInfo:u,onToolbarVisible:d}=(0,c.P)(),{settings:x,saveSettings:p}=(0,s.t)(),m=(0,ej.A)(),[f,g]=(0,a.useState)(null!=(t=x[n])?t:"#fff"),[v,j]=(0,a.useState)(null);("object"!=typeof o||null===o)&&(o={});let y=()=>{"string"==typeof n&&"string"==typeof f&&[4,7,9].includes(f.length)&&f.match(/^#[\da-f]+$/i)&&x[n]!==f.toLowerCase()&&p({[n]:f.toLowerCase()})};return(0,a.useEffect)(()=>{let e=u(()=>j(null)),t=d(()=>j(null));return()=>{e(),t()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>y(),250);return()=>clearTimeout(e)},[f]),(0,l.jsxs)(h.A,{sx:{position:"relative"},children:[(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(nL,{sx:{...o},color:"inherit",onClick:e=>j(e.currentTarget),variant:"outlined",children:(0,l.jsx)("div",{style:{backgroundColor:f},children:"string"==typeof i&&i.length?(0,l.jsx)("div",{children:i[0]}):null})})}),(0,l.jsx)(eF.A,{anchorEl:v,open:!!v,onClose:()=>void(j(null),y()),anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:{mt:-1},children:(0,l.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",px:5,py:3},children:[r?(0,l.jsx)(et.A,{variant:"caption",sx:{textTransform:"uppercase",mb:3},children:r}):null,(0,l.jsx)(nM.dp,{onChange:g,color:f}),(0,l.jsx)(nM.HC,{color:f,onChange:g,alpha:!0,style:{background:m.palette.background.default,color:m.palette.text.primary,border:"1px solid ".concat(m.palette.divider),minWidth:"50px",width:"200px",padding:"10px",fontSize:"1rem",marginTop:"15px",borderRadius:"10px"}})]})})]})}function nD(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Space ":"Space+").concat(t.t("Swipe"));return(0,l.jsxs)(nE,{index:6,title:"".concat(t.t("Spotlight")," (").concat(n,")"),label:t.t("Spotlight settings"),Icon:nP.A,chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(te,{children:(0,l.jsx)(nR.A,{fontSize:"small"})}),(0,l.jsx)(nN.A,{fontSize:"small"})]}),children:[(0,l.jsx)(nB,{settingKey:"spotlightColor",title:t.t("Spotlight color")}),(0,l.jsx)(nw,{settingKey:"spotlightRadius",title:t.t("Corner radius")})]})}var nF=n(70715);let nX=Object.keys(u.A.cursor.sizes).map(e=>parseInt(e,10));function nY(){let{settings:e,saveSettings:t}=(0,s.t)(),{i18n:n}=(0,i.B)();return(0,l.jsx)(nE,{index:0,useCursor:!0,title:n.t("Cursor size"),Icon:nF.A,onClick:()=>{let n=nX.indexOf(e.cursor);++n>=nX.length&&(n=0),t({cursor:nX[n]})}})}var nU=n(13125),nK=n(1954),nW=n(20191);let n_=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nH(e){var t;let{settingKey:n,title:r=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:d}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=u[n])?t:"");("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(p)&&u[n]!==p&&d({[n]:p})),50);return()=>clearTimeout(e)},[p]);let f={xs:{icon:(0,l.jsx)(nW.A,{fontSize:"small"}),value:2,label:x.t("Extra thin")},sm:{icon:(0,l.jsx)(nW.A,{fontSize:"medium"}),value:4,label:x.t("Thin")},md:{icon:(0,l.jsx)(nW.A,{fontSize:"large"}),value:8,label:x.t("Midweight")},lg:{icon:(0,l.jsx)(nn.A,{fontSize:"small"}),value:12,label:x.t("Thick")},xl:{icon:(0,l.jsx)(nn.A,{fontSize:"medium"}),value:16,label:x.t("Extra thick")},xxl:{icon:(0,l.jsx)(nn.A,{fontSize:"large"}),value:24,label:x.t("Chunky")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{icon:e,label:n}=t;return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[e?(0,l.jsx)(n_,{children:e}):null,(0,l.jsx)(et.A,{sx:{ml:2*!!e},variant:"body2",color:"inherit",children:n})]})}}return(0,l.jsx)(et.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{icon:t,value:n,label:r}=e;return(0,l.jsx)(eL.A,{value:n,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[t?(0,l.jsx)(n_,{children:t}):null,(0,l.jsx)(et.A,{sx:{ml:2*!!t},variant:"body2",color:"inherit",children:r})]})},n)})})})}var nV=n(54098),nG=n(19563),nq=n(25261);let nZ=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nJ(e){var t;let{settingKey:n,title:r=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:d}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=u[n])?t:0);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isFinite(p)&&u[n]!==p&&d({[n]:p})),50);return()=>clearTimeout(e)},[p]);let f={no:{Icon:nV.A,value:0,label:x.t("No thinning")},sm:{Icon:nq.A,value:.3,label:x.t("Slight thinning")},lg:{Icon:nG.A,value:.6,label:x.t("Heavy thinning")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(nZ,{children:(0,l.jsx)(e,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,l.jsx)(et.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{Icon:t,value:n,label:r}=e;return(0,l.jsx)(eL.A,{value:n,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(nZ,{children:(0,l.jsx)(t,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:r})]})},n)})})})}function nQ(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Esc ":"Esc+").concat(t.t("Swipe"));return(0,l.jsxs)(nE,{index:1,title:"".concat(t.t("Eraser")," (").concat(n,")"),label:t.t("Eraser settings"),Icon:nU.A,chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(te,{children:(0,l.jsx)(nK.A,{fontSize:"small"})}),(0,l.jsx)(nN.A,{fontSize:"small"})]}),children:[(0,l.jsx)(nH,{settingKey:"eraserThickness",title:t.t("Eraser thickness")}),(0,l.jsx)(nJ,{settingKey:"eraserThinning",title:t.t("Eraser thinning")})]})}var n$=n(40756),n0=n(56086),n1=n(692),n2=n(78813),n5=n(5844),n3=n(49645);let n4=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function n9(e){var t;let{settingKey:n,title:r=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:d}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=u[n])?t:80);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(p)&&u[n]!==p&&d({[n]:p})),50);return()=>clearTimeout(e)},[p]);let f={vslow:{Icon:n3.A,value:160,label:x.t("Very slow")},slow:{Icon:n1.A,value:80,label:x.t("Slow")},normal:{Icon:n0.A,value:40,label:x.t("Normal speed")},fast:{Icon:n2.A,value:30,label:x.t("Fast")},vfast:{Icon:n5.A,value:25,label:x.t("Very fast")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,l.jsx)(el.A,{title:r,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(n4,{children:(0,l.jsx)(e,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,l.jsx)(et.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:g.map(e=>{let{Icon:t,value:n,label:r}=e;return(0,l.jsx)(eL.A,{value:n,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(n4,{children:(0,l.jsx)(t,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:r})]})},n)})})})}function n6(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Shift ":"Shift+").concat(t.t("Swipe"));return(0,l.jsxs)(nE,{index:2,title:"".concat(t.t("Laser")," (").concat(n,")"),label:t.t("Laser settings"),Icon:n$.A,chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(te,{children:(0,l.jsx)(e9.A,{fontSize:"small"})}),(0,l.jsx)(nN.A,{fontSize:"small"})]}),children:[(0,l.jsx)(nB,{settingKey:"laserColor",title:t.t("Laser color")}),(0,l.jsx)(nH,{settingKey:"laserThickness",title:t.t("Laser thickness")}),(0,l.jsx)(nJ,{settingKey:"laserThinning",title:t.t("Laser thinning")}),(0,l.jsx)(n9,{settingKey:"laserDelay",title:t.t("Laser fading speed")})]})}var n8=n(92828),n7=n(54895);function le(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n={ctrlComma:"(".concat("macos"===e().os?"⌘ ":"Ctrl+",",)"),ctrlQ:"(".concat("macos"===e().os?"⌘ ":"Ctrl+","Q)")};return(0,l.jsx)(nE,{index:0,title:t.t("Toggle toolbar {{ctrlComma}}",n),Icon:n8.A,onClick:()=>{var e;null==(e=window.sdk)||e.ipc.main.setToolbar(!1),o.o.info(t.t("Press {{ctrlComma}} to toggle toolbar, {{ctrlQ}} to quit",n),{duration:4e3})},chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(te,{children:"macos"===e().os?(0,l.jsx)(e4.A,{fontSize:"small"}):(0,l.jsx)(e8.A,{fontSize:"small"})}),(0,l.jsx)(te,{final:!0,children:(0,l.jsx)(n7.A,{fontSize:"small"})})]})})}var lt=n(23975),ln=n(63150);function ll(){let{getDeviceInfo:e,historyUndo:t,onHistory:n}=(0,c.P)(),{i18n:r}=(0,i.B)(),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=n(e=>{let{index:t,total:n}=e;s(n<=0||t<0)});return()=>e()},[]),(0,l.jsx)(nE,{index:0,disabled:o,title:"".concat(r.t("Undo")," (").concat("macos"===e().os?"⌘ ":"Ctrl+","Z)"),Icon:lt.A,onClick:t,chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(te,{children:"macos"===e().os?(0,l.jsx)(e4.A,{fontSize:"small"}):(0,l.jsx)(e8.A,{fontSize:"small"})}),(0,l.jsx)(te,{final:!0,children:(0,l.jsx)(ln.A,{fontSize:"small"})})]})})}var lr=n(70673);function li(){let{getDeviceInfo:e,historyRedo:t,onHistory:n}=(0,c.P)(),{i18n:r}=(0,i.B)(),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=n(e=>{let{index:t,total:n}=e;s(n<=0||t>=n-1)});return()=>e()},[]),(0,l.jsx)(nE,{index:1,disabled:o,title:"".concat(r.t("Redo")," (").concat("macos"===e().os?"Shift ⌘ ":"Ctrl+Shift+","Z)"),Icon:lr.A,onClick:t,chip:(0,l.jsxs)(l.Fragment,{children:["macos"===e().os?null:(0,l.jsx)(te,{children:(0,l.jsx)(e8.A,{fontSize:"small"})}),(0,l.jsx)(te,{children:(0,l.jsx)(e9.A,{fontSize:"small"})}),"macos"===e().os?(0,l.jsx)(te,{children:(0,l.jsx)(e4.A,{fontSize:"small"})}):null,(0,l.jsx)(te,{final:!0,children:(0,l.jsx)(ln.A,{fontSize:"small"})})]})})}var lo=n(24360),ls=n(1810);function la(e){var t;let{title:n=null,sx:r={}}=e,{settings:o,saveSettings:c}=(0,s.t)(),{i18n:u}=(0,i.B)(),[d,x]=(0,a.useState)(null!=(t=o.textFont)?t:"Rancho");("object"!=typeof r||null===r)&&(r={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(o.textFont!==d&&c({textFont:d})),50);return()=>clearTimeout(e)},[d]);let p=["Inconsolata","Inter","Yaldevi","Libre Baskerville","Comic Relief","Pacifico","Dancing Script","Satisfy","Caveat","Rancho","Mansalva","Henny Penny","Permanent Marker"];return(0,l.jsx)(el.A,{title:n,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>"string"==typeof e&&p.includes(e)?(0,l.jsx)(et.A,{sx:{fontFamily:e,pl:2},variant:"body1",color:"inherit",children:e}):(0,l.jsx)(et.A,{variant:"caption",children:u.t("Select an option")}),value:d,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...r},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>x(e.target.value),children:p.map(e=>(0,l.jsx)(eL.A,{value:e,children:(0,l.jsx)(et.A,{sx:{fontFamily:e},variant:"body1",color:"inherit",children:e})},e))})})}var lc=n(80037),lu=n(29437);let ld=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function lx(e){var t;let{title:n=null,sx:r={}}=e,{settings:o,saveSettings:c}=(0,s.t)(),{i18n:u}=(0,i.B)(),[d,x]=(0,a.useState)(null!=(t=o.textAlignment)?t:"center");("object"!=typeof r||null===r)&&(r={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(o.textAlignment!==d&&c({textAlignment:d})),50);return()=>clearTimeout(e)},[d]);let p=[{Icon:lu.A,value:"left",label:u.t("Left")},{Icon:lc.A,value:"center",label:u.t("Center")},{Icon:lc.A,value:"right",label:u.t("Right")}];return(0,l.jsx)(el.A,{title:n,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=p.find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ld,{children:(0,l.jsx)(e,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,l.jsx)(et.A,{variant:"caption",children:u.t("Select an option")})},value:d,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...r},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>x(e.target.value),children:p.map(e=>{let{Icon:t,value:n,label:r}=e;return(0,l.jsx)(eL.A,{value:n,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ld,{children:(0,l.jsx)(t,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:r})]})},n)})})})}var lp=n(24996),lh=n(38261),lm=n(58086),lf=n(74088),lg=n(83931);let lv=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function lj(e){var t;let{title:n=null,options:r=null,sx:o={}}=e,{settings:c,saveSettings:u}=(0,s.t)(),{i18n:d}=(0,i.B)(),[x,p]=(0,a.useState)(null!=(t=c.textSize)?t:54);("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(Number.isInteger(x)&&c.textSize!==x&&u({textSize:x})),50);return()=>clearTimeout(e)},[x]);let m={xs:{Icon:lp.A,value:20,label:d.t("Tiny")},sm:{Icon:lm.A,value:36,label:d.t("Small")},md:{Icon:lf.A,value:54,label:d.t("Midsize")},lg:{Icon:lg.A,value:90,label:d.t("Large")},xl:{Icon:lh.A,value:144,label:d.t("Huge")}},f="object"==typeof r&&null!==r&&Object.keys(r).length?Object.keys(r).map(e=>{let t=null;return"object"==typeof m[e]&&((t={...m[e]}).value=r[e]),t}).filter(e=>null!==e):Object.values(m);return(0,l.jsx)(el.A,{title:n,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(f).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(lv,{children:(0,l.jsx)(e,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,l.jsx)(et.A,{variant:"caption",children:d.t("Select an option")})},value:x,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>p(e.target.value),children:f.map(e=>{let{Icon:t,value:n,label:r}=e;return(0,l.jsx)(eL.A,{value:n,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(lv,{children:(0,l.jsx)(t,{fontSize:"small"})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:r})]})},n)})})})}function ly(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"⌘ ":"Ctrl+").concat(t.t("Double-tap"));return(0,l.jsxs)(nE,{index:5,title:(0,l.jsxs)(h.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},children:["".concat(t.t("Text")," (").concat(t.t("Double-tap"),")"),(0,l.jsx)("br",{}),"".concat(t.t("Sequence")," (").concat(n,")")]}),label:t.t("Text settings"),Icon:ls.A,chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(et.A,{color:"inherit",children:"2x"}),(0,l.jsx)(lo.A,{fontSize:"small"})]}),children:[(0,l.jsx)(nB,{settingKey:"textColor",title:t.t("Text color")}),(0,l.jsx)(nB,{settingKey:"textStrokeColor",title:t.t("Stroke color"),letter:"S",sx:{ml:2}}),(0,l.jsx)(la,{title:t.t("Font family")}),(0,l.jsx)(lj,{title:t.t("Text size")}),(0,l.jsx)(lx,{title:t.t("Justification")})]})}var lA=n(21865);function lb(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"⌘ ":"Ctrl+").concat(t.t("Swipe"));return(0,l.jsxs)(nE,{index:3,title:"".concat(t.t("Line")," (").concat(n,")"),label:t.t("Line settings"),Icon:lA.A,chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(te,{children:"macos"===e().os?(0,l.jsx)(e4.A,{fontSize:"small"}):(0,l.jsx)(e8.A,{fontSize:"small"})}),(0,l.jsx)(nN.A,{fontSize:"small"})]}),children:[(0,l.jsx)(nB,{settingKey:"lineColor",title:t.t("Line color")}),(0,l.jsx)(nB,{settingKey:"lineStrokeColor",title:t.t("Line stroke color"),letter:"S",sx:{ml:2}}),(0,l.jsx)(nH,{settingKey:"lineThickness",title:t.t("Line thickness")})]})}var lw=n(89099),lS=n(7579),lI=n(72295),lk=n(71608),lC=n(34822),lz=n(23842),lE=n(82491),lT=n(72066),lO=n(91050),lR=n(49404),lP=n(91054),lN=n(1879),lM=n(6585);function lL(){let{onDisplayInfo:e,getDisplayInfo:t,getDeviceInfo:n,dialogSet:r,onToolbarVisible:u,setTutorialStep:d}=(0,c.P)(),{settings:x,saveSettings:p}=(0,s.t)(),{i18n:h}=(0,i.B)(),m=(0,lw.useRouter)(),[f,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{let t=e(()=>g(null)),n=u(()=>g(null));return()=>{t(),n()}},[]);let v="".concat("macos"===n().os?"⌘ ":"Ctrl+","D"),j=[{action:()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.switchDisplay()},label:"".concat(t().total>1?h.t("Switch display"):h.t("Identify display")," (").concat(v,")"),Icon:lO.A},{action:()=>{o.o.info(h.t("Restarting tutorial..."),{},!1),d(0,!1),setTimeout(()=>m.reload(),400)},label:h.t("Restart tutorial"),Icon:lC.A},null,{action:()=>r("dialog:subscription"),label:h.t("Subscription"),Icon:ea.A},{action:()=>r("dialog:profile"),label:h.t("Profile"),Icon:lI.A},{action:()=>r("dialog:about"),label:h.t("About"),Icon:lk.A},null,{action:()=>{p({animations:!x.animations}),o.o.success(x.animations?h.t("Animations disabled"):h.t("Animations enabled"),{},!1)},label:x.animations?h.t("Animations on"):h.t("Animations off"),Icon:x.animations?lM.A:lP.A},{action:()=>p({mode:"dark"===x.mode?"light":"dark"}),label:"dark"===x.mode?h.t("Dark mode"):h.t("Light mode"),Icon:"dark"===x.mode?lT.A:lE.A},{action:()=>{p({sound:!x.sound}),o.o.info(x.sound?h.t("Sound effects disabled"):h.t("Sound effects enabled")),p({sound:!x.sound})},label:x.sound?h.t("Sound on"):h.t("Sound off"),Icon:x.sound?lN.A:lR.A}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(nE,{index:2,title:h.t("More"),Icon:lz.A,onClick:e=>{g(e.currentTarget)}}),(0,l.jsx)(eF.A,{transformOrigin:{vertical:"bottom",horizontal:"left"},anchorOrigin:{vertical:"top",horizontal:"left"},onClose:()=>g(null),open:!!f,anchorEl:f,sx:{mt:-4},children:j.map((e,t)=>"function"==typeof(null==e?void 0:e.action)?(0,l.jsxs)(eL.A,{sx:{alignItems:"center"},onClick:()=>{e.action(),g(null)},children:[e.Icon?(0,l.jsx)(e.Icon,{fontSize:"small",sx:{mr:3}}):null,(0,l.jsx)(et.A,{variant:"body2",sx:{color:"inherit"},children:e.label})]},t):(0,l.jsx)(lS.A,{},t))})]})}function lB(){let{onDisplayInfo:e,getDeviceInfo:t}=(0,c.P)(),{i18n:n}=(0,i.B)(),r=(0,ej.A)(),[o,s]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=e(async e=>{let{info:t}=e;return s(t.passThru)});return()=>{t()}},[]);let u="".concat("macos"===t().os?"Shift ⌘ ":"Ctrl+Shift+","Backspace"),d=(0,l.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,l.jsx)(h.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,l.jsx)(tt,{})}),(0,l.jsx)(h.A,{sx:{mt:1},children:"".concat(n.t("Toggle pass-through")," (").concat(u,")")})]});return(0,l.jsx)(el.A,{title:o?null:d,children:(0,l.jsx)(h.A,{className:o?null:"drag",style:{...o?{pointerEvents:"none"}:{}},children:(0,l.jsx)(ti.A,{delay:50,size:70,grey:o,animate:!0},r.palette.mode)})})}var lD=n(16117),lF=n(83374),lX=n(29715);let lY=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function lU(e){var t;let{title:n=null,options:r=null,sx:o={}}=e,{settings:c,saveSettings:u}=(0,s.t)(),{i18n:d}=(0,i.B)(),[x,p]=(0,a.useState)(null!=(t=c.zoomScale)?t:125);("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(Number.isInteger(x)&&c.zoomScale!==x&&u({zoomScale:x})),50);return()=>clearTimeout(e)},[x]);let m={l1:{value:110},l2:{value:125},l3:{value:150},l4:{value:175},l5:{value:200},l6:{value:250},l7:{value:300},l8:{value:350},l9:{value:400}},f="object"==typeof r&&null!==r&&Object.keys(r).length?Object.keys(r).map(e=>{let t=null;return"object"==typeof m[e]&&((t={...m[e]}).value=r[e]),t}).filter(e=>null!==e):Object.values(m);return(0,l.jsx)(el.A,{title:n,placement:"bottom",children:(0,l.jsx)(t0.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(f).find(t=>t.value===e);if("object"==typeof t)return(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(lY,{children:(0,l.jsx)(lX.A,{})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(t.value,"%")})]})}return(0,l.jsx)(et.A,{variant:"caption",children:d.t("Select an option")})},value:x,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>p(e.target.value),children:f.map(e=>(0,l.jsx)(eL.A,{value:e.value,children:(0,l.jsxs)(h.A,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(lY,{children:(0,l.jsx)(lX.A,{})}),(0,l.jsx)(et.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(e.value,"%")})]})},e.value))})})}function lK(){let{i18n:e}=(0,i.B)(),t="".concat(e.t("Scroll up"));return(0,l.jsxs)(nE,{index:1,title:"".concat(e.t("Zoom")," (").concat(t,")"),label:e.t("Zoom settings"),Icon:lF.A,chip:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(lD.A,{fontSize:"small"})}),children:[(0,l.jsx)(lU,{title:e.t("Scale when zoomed"),sx:{ml:0}}),(0,l.jsx)(n9,{settingKey:"zoomDuration",title:e.t("Zooming speed"),options:{vslow:800,slow:400,normal:200,fast:100,vfast:50}})]})}var lW=n(81451);function l_(){let{i18n:e}=(0,i.B)(),t=e.t("Swipe");return(0,l.jsxs)(nE,{index:0,title:"".concat(e.t("Pen")," (").concat(t,")"),label:e.t("Pen settings"),Icon:lW.A,chip:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(nN.A,{fontSize:"small"})}),children:[(0,l.jsx)(nB,{settingKey:"penColor",title:e.t("Pen color")}),(0,l.jsx)(nB,{settingKey:"penStrokeColor",title:e.t("Pen stroke color"),letter:"S",sx:{ml:2}}),(0,l.jsx)(nH,{settingKey:"penThickness",title:e.t("Pen thickness")}),(0,l.jsx)(nJ,{settingKey:"penThinning",title:e.t("Pen thinning")})]})}var lH=n(13754),lV=n(25596);function lG(){let{getDeviceInfo:e,historyClear:t}=(0,c.P)(),{i18n:n}=(0,i.B)();return(0,l.jsx)(nE,{index:2,title:"".concat(n.t("New")," (").concat("macos"===e().os?"⌘ ":"Ctrl+","N)"),Icon:lV.A,onClick:()=>t(),chip:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(te,{children:"macos"===e().os?(0,l.jsx)(e4.A,{fontSize:"small"}):(0,l.jsx)(e8.A,{fontSize:"small"})}),(0,l.jsx)(te,{final:!0,children:(0,l.jsx)(lH.A,{fontSize:"small"})})]})})}var lq=n(25452);function lZ(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Shift ⌘ ":"Ctrl+Shift+").concat(t.t("Swipe"));return(0,l.jsxs)(nE,{index:4,title:"".concat(t.t("Box")," (").concat(n,")"),label:t.t("Box settings"),Icon:lq.A,chip:(0,l.jsxs)(l.Fragment,{children:["macos"===e().os?null:(0,l.jsx)(te,{children:(0,l.jsx)(e8.A,{fontSize:"small"})}),(0,l.jsx)(te,{children:(0,l.jsx)(e9.A,{fontSize:"small"})}),"macos"===e().os?(0,l.jsx)(te,{children:(0,l.jsx)(e4.A,{fontSize:"small"})}):null,(0,l.jsx)(nN.A,{fontSize:"small"})]}),children:[(0,l.jsx)(nB,{settingKey:"boxColor",title:t.t("Border color")}),(0,l.jsx)(nB,{settingKey:"boxStrokeColor",title:t.t("Stroke color"),letter:"S",sx:{ml:2}}),(0,l.jsx)(nB,{settingKey:"boxFillColor",title:t.t("Fill color"),letter:"F",sx:{ml:2}}),(0,l.jsx)(nH,{settingKey:"boxThickness",title:t.t("Border thickness")}),(0,l.jsx)(nw,{settingKey:"boxRadius",title:t.t("Corner radius"),options:{xs:5,sm:10,md:20,lg:40,xl:80,pill:9999}})]})}let lJ=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{transition:"width 750ms linear, opacity 250ms linear",marginLeft:t.spacing(1),marginTop:t.spacing(-1),justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden",display:"flex",height:"100%",opacity:0,width:0}});function lQ(){let{onDisplayInfo:e,getUpdaterInfo:t,onUpdaterInfo:n,upPassThruXP:r,getPassThruXP:i,onPassThruXP:o}=(0,c.P)(),[s,u]=(0,a.useState)(i()),[d,x]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let l=e(async e=>{let{info:t}=e;x(t.passThru),t.onPassThru&&t.passThru&&r()});h(t());let s=n(e=>{let{info:t}=e;return h(t)});u(i());let a=o(e=>{let{xp:t}=e;u(t)});return()=>{l(),s(),a()}},[]),(null==p?void 0:p.version)||s>=J().max.passThruHints?null:(0,l.jsx)(lJ,{style:{width:d?"140px":"0px",opacity:+!!d},children:(0,l.jsx)(tt,{})})}function l$(){let e=(0,m._)(["\n0%   { opacity: 0; margin-left: 0px; }\n100% { opacity: 1; margin-left: 8px; }"]);return l$=function(){return e},e}let l0=(0,f.i7)(l$());function l1(){let{onDisplayInfo:e}=(0,c.P)(),{settings:t}=(0,s.t)(),[n,r]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=e(async e=>{let{info:t}=e;r(t.passThru)});return()=>{t()}},[]);let i=t.animations?n:!n;return(0,l.jsx)(lS.A,{orientation:"vertical",sx:{...t.animations?{animation:"".concat(l0," 750ms ease-in-out forwards")}:{},position:"relative",height:"20px",zIndex:1},style:{animationDirection:i?"reverse":"normal",marginLeft:i?"8px":0,opacity:+!!i}},"".concat(n))}let l2=(0,p.Ay)(eD.A)(e=>{let{theme:t}=e;return{userSelect:"none",position:"relative",zIndex:5,bottom:"25px",overflow:"visible",display:"flex",flexDirection:"row",alignItems:"end",height:"45px",boxShadow:t.shadows[3],"& .drag":{transition:"transform 100ms linear",transformOrigin:"50% 100%",position:"relative","& .dots":{position:"absolute",top:22,right:15,zIndex:11,opacity:0,transition:"opacity 100ms linear"},"&:hover":{transform:"scale(1.1)","& .dots":{opacity:1}}},transition:"opacity 250ms linear, border-radius 500ms linear",paddingLeft:t.spacing(2),paddingRight:t.spacing(2)}});function l5(){var e;let{onDisplayInfo:t,onToolbarVisible:n,canvasEnable:o,dialogSet:u}=(0,c.P)(),{i18n:d}=(0,i.B)(),{settings:x}=(0,s.t)(),p=(0,r.A)(),[m,f]=(0,a.useState)({x:0,y:0}),[g,v]=(0,a.useState)(!0),[j,y]=(0,a.useState)(!1),[A,b]=(0,a.useState)(!0),w=(0,a.useRef)({mouseX:0,mouseY:0,x:0,y:0}),S=(0,a.useRef)(!1);(0,a.useEffect)(()=>{let e=e=>{if(!S.current)return;let t=e.clientX-w.current.mouseX,n=e.clientY-w.current.mouseY;f({x:w.current.x+t,y:w.current.y+n})},l=()=>{o(!0),S.current&&(S.current=!1)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",l);let r=t(async e=>{let{info:t}=e;t.onPassThru||f({x:0,y:0}),y(t.passThru)}),i=n(async e=>{let{visible:t}=e;b(t)});return()=>{r(),i(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",l)}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>v(A&&!j),250);return()=>clearTimeout(e)},[A,j]);let I=A&&!j;return(0,l.jsxs)(l2,{onMouseDown:e=>{e.target.closest(".drag")&&(o(!1),S.current=!0,w.current={mouseX:e.clientX,mouseY:e.clientY,x:m.x,y:m.y})},style:{transform:"translate(".concat(m.x,"px, ").concat(m.y,"px)"),opacity:A?j?.5:1:0,...g?{}:{pointerEvents:"none"},...I?{}:{borderRadius:"25px"},...x.animations?{}:{transition:"none"}},children:[(0,l.jsx)(lB,{}),(0,l.jsx)(h.A,{sx:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},children:(null==(e=p.user)?void 0:e.computerEnabled)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lQ,{}),(0,l.jsx)(ll,{}),(0,l.jsx)(li,{}),(0,l.jsx)(lG,{}),(0,l.jsx)(l1,{}),(0,l.jsxs)(tX,{children:[(0,l.jsx)(l_,{}),(0,l.jsx)(nQ,{}),(0,l.jsx)(n6,{}),(0,l.jsx)(lb,{}),(0,l.jsx)(lZ,{}),(0,l.jsx)(ly,{}),(0,l.jsx)(nD,{}),(0,l.jsx)(nO,{}),(0,l.jsx)(lK,{})]}),(0,l.jsx)(l1,{}),(0,l.jsx)(nY,{}),(0,l.jsx)(lL,{}),(0,l.jsx)(le,{})]}):(0,l.jsx)(ei.A,{sx:{ml:2},startIcon:(0,l.jsx)(em.A,{}),color:"warning",size:"small",onClick:()=>u("dialog:subscription"),children:d.t("Computer disabled")})})]})}let l3=(0,p.Ay)(h.A)(e=>{let{theme:t}=e;return{flexDirection:"column",justifyContent:"end",position:"relative",alignItems:"center",display:"flex",width:"100vw",height:"100vh"}}),l4=()=>{let{onCanvasTransparent:e}=(0,c.P)();!function(){let{getDeviceInfo:e,getToolbarVisible:t,historyUndo:n,historyRedo:l,historyClear:r,webcamGetConfigId:u,webcamSetConfigId:d}=(0,c.P)(),{settings:x,getWebcamValue:p}=(0,s.t)(),{i18n:h}=(0,i.B)(),m=(0,a.useRef)(null),f=e=>e===u()?void d(null):p(e,"id")?void d(e):void o.o.error(h.t("No webcam selected for configuration #{{configId}}",{configId:e})),g={F1:()=>f(1),F2:()=>f(2),F3:()=>f(3),F4:()=>f(4),"CommandOrControl+D":()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.switchDisplay()},"CommandOrControl+,":()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.setToolbar(!t())},"CommandOrControl+Z":()=>n(),"CommandOrControl+Y":()=>l(),"CommandOrControl+Shift+Z":()=>l(),"CommandOrControl+N":()=>r(),"CommandOrControl+Q":()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.quit()}};(0,a.useEffect)(()=>{let t=t=>{if(!t.isTrusted)return;let n=[];("macos"===e().os?t.metaKey:t.ctrlKey)&&n.push("CommandOrControl"),t.altKey&&n.push("Alt"),t.shiftKey&&n.push("Shift"),["Command","Control","Alt","Shift"].includes(t.key)||n.push(1==="".concat(t.key).length?"".concat(t.key).toUpperCase():t.key);let l=n.join("+");l!==m.current&&(m.current=l,"function"==typeof g[l]&&(g[l](),m.current=null))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[x])}();let t=(0,a.useRef)(null),n=function(e){let{getDeviceInfo:t,onDisplayInfo:n,canvasToolSet:l}=(0,c.P)(),{settings:r}=(0,s.t)(),i=(0,a.useRef)({mouseDown:!1,escape:!1,space:!1,shift:!1,ctrl:!1,meta:!1}),o="string"==typeof u.A.cursor.sizes[r.cursor]?r.cursor:u.A.cursor.default,p=u.A.cursor.sizes[o],h=t=>{if(!(null==e?void 0:e.current))return;l(t);let n="".concat(o,"/").concat(t).concat(i.current.mouseDown?"-down":""),r='url("/img/cursor/'.concat(n,'.png") ').concat(p,", auto");e.current.style.getPropertyValue("--cursor")!==r&&e.current.style.setProperty("--cursor",r)},m=()=>{let e="macos"===t().os?i.current.meta:i.current.ctrl;do{if(i.current.escape){h(u.A.tools.ERASER);break}if(i.current.space){h(u.A.tools.SPOTLIGHT);break}if(i.current.shift&&e){h(u.A.tools.BOX);break}if(e){h(u.A.tools.LINE);break}if(i.current.shift){h(u.A.tools.LASER);break}h(u.A.tools.PEN)}while(!1)},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=0;Object.values(u.A.tools).map((n,l)=>{setTimeout(()=>{new Image().src="/img/cursor/".concat(r.cursor,"/").concat(n,".png")},10*t),setTimeout(()=>{let t=new Image;0===l&&(t.onload=()=>"function"==typeof e&&e()),t.src="/img/cursor/".concat(r.cursor,"/").concat(n,"-down.png")},(t+1)*10),t+=2})};return(0,a.useEffect)(()=>{f(m);let e=e=>{i.current.mouseDown=!0,m()},t=()=>{i.current.mouseDown=!1,m()},l=e=>{let t=!1;for(let n of Object.keys(d))d[n]!==e.code||i.current[n]||(t=!0,i.current[n]=!0);for(let n of Object.keys(x))x[n]!==e.key||i.current[n]||(t=!0,i.current[n]=!0);t&&m()},r=e=>{let t=!1;for(let n of Object.keys(d))d[n]===e.code&&i.current[n]&&(t=!0,i.current[n]=!1);for(let n of Object.keys(x))x[n]===e.key&&i.current[n]&&(t=!0,i.current[n]=!1);t&&m()};window.addEventListener("mousedown",e),window.addEventListener("mouseup",t),window.addEventListener("keydown",l),window.addEventListener("keyup",r);let o=n(async()=>{Object.keys(i.current).map(e=>{i.current[e]=!1}),h(u.A.tools.PEN),m()});return()=>{o(),window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",t),window.removeEventListener("keydown",l),window.removeEventListener("keyup",r)}},[r.cursor]),i}(t),[r,p]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=e(e=>{let{transparent:t}=e;p(t)});return()=>{t()}},[]),(0,l.jsxs)(l3,{ref:t,style:{...r?{opacity:0}:{}},children:[(0,l.jsx)(G,{refKeys:n}),(0,l.jsx)(j,{}),(0,l.jsx)(tR,{}),(0,l.jsx)(l5,{})]})};var l9=n(72568);let l6=()=>(0,r.A)().user?(0,l.jsx)(l4,{}):(0,l.jsx)(l9.A,{});l6.guestGuard=!0;let l8=l6},36740:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var l=n(14232),r=n(71507),i=n.n(r);let o=e=>e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.useRef)(null),n=()=>{e.onSuccess&&e.onSuccess(),e.selectOnCopy&&o(t.current)&&t.current.select()},r=()=>{e.onError&&e.onError(),!1!==e.selectOnError&&o(t.current)&&t.current.select()},s=e=>{i()(e).then(n).catch(r)};return{copy:(0,l.useCallback)(e=>{"string"==typeof e?s(e):t.current&&s(t.current.value)},[]),target:t}}},42936:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9156)}])},43400:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(37876),r=n(14232),i=n(89037);let o=function(e){var t;let{className:n,sx:o,count:s=1,columns:a=1,spacing:c=20,justify:u="start",rounded:d=!1,rowHeight:x=null}=e,p=[],h=Math.ceil(s);a=null!=(t=Math.abs(parseInt(a,10)))?t:1,c=Math.abs(parseInt(c,10)),u=-1===["start","center","end","space-between"].indexOf(u)?"start":u;for(let e=0;e<h;e++){let t=h>s&&e===h-1?s%1*100:100,n=[];if(a>1)for(let e=1;e<=a;e++){let l=t-100/a*(e-1);n.push(l<100/a?l>0?l:0:100/a)}else n.push(t);p.push((0,l.jsx)(r.Fragment,{children:n.map((t,n)=>{let r=0===c?"".concat(t,"%"):"calc(".concat(t,"% - ").concat(c,"px)"),i=0===c?null:"".concat(c,"px"),o={width:r,marginLeft:i,marginTop:i};return d&&(o.borderRadius="50%"),null!==x&&(o.height=x),(0,l.jsx)("div",{className:"skeleton",style:o,children:"‌"},"".concat(e,"-").concat(n))})},e))}let m=0===c?null:"".concat(c,"px");return(0,l.jsx)(i.A,{sx:{...o},className:n,children:(0,l.jsx)("div",{"aria-live":"polite","aria-busy":!0,style:{paddingRight:m,paddingBottom:m,display:"inline-flex",flexFlow:"wrap",width:"100%",height:"100%",top:"-3px",position:"relative",zIndex:0,justifyContent:u},children:p})})}}},e=>{e.O(0,[931,270,636,593,792],()=>e(e.s=42936)),_N_E=e.O()}]);