/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright © 2026 Oglama (https://oglama.com)
 * 
 * Licensed under the Oglama™ Source-Available License, Version 1.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     https://github.com/oglama/dos/blob/main/LICENSE.txt
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{42936:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(84779)}])},43400:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(37876),l=n(14232),i=n(89037);let o=function(e){var t;let{className:n,sx:o,count:s=1,columns:a=1,spacing:c=20,justify:u="start",rounded:d=!1,rowHeight:x=null}=e,p=[],m=Math.ceil(s);a=null!=(t=Math.abs(parseInt(a,10)))?t:1,c=Math.abs(parseInt(c,10)),u=-1===["start","center","end","space-between"].indexOf(u)?"start":u;for(let e=0;e<m;e++){let t=m>s&&e===m-1?s%1*100:100,n=[];if(a>1)for(let e=1;e<=a;e++){let r=t-100/a*(e-1);n.push(r<100/a?r>0?r:0:100/a)}else n.push(t);p.push((0,r.jsx)(l.Fragment,{children:n.map((t,n)=>{let l=0===c?"".concat(t,"%"):"calc(".concat(t,"% - ").concat(c,"px)"),i=0===c?null:"".concat(c,"px"),o={width:l,marginLeft:i,marginTop:i};return d&&(o.borderRadius="50%"),null!==x&&(o.height=x),(0,r.jsx)("div",{className:"skeleton",style:o,children:"‌"},"".concat(e,"-").concat(n))})},e))}let h=0===c?null:"".concat(c,"px");return(0,r.jsx)(i.A,{sx:{...o},className:n,children:(0,r.jsx)("div",{"aria-live":"polite","aria-busy":!0,style:{paddingRight:h,paddingBottom:h,display:"inline-flex",flexFlow:"wrap",width:"100%",height:"100%",top:"-3px",position:"relative",zIndex:0,justifyContent:u},children:p})})}},84779:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rS});var r=n(37876),l=n(8628),i=n(7156),o=n(41619),s=n(74787),a=n(14232),c=n(81373),u=n(35268),d=n(38388),x=n(28888),p=n(38993);function m(){let e=(0,x._)(["\n0%   { transform: translateX(-","vw); }\n100% { transform: translateX(100vw); }"]);return m=function(){return e},e}function h(){let e=(0,x._)(["\n0%   { transform: translateX(0); }\n100% { transform: translateX(-","vw); }"]);return h=function(){return e},e}let f=e=>{let{width:t=25,duration:n=1200}=e;t=Number.isInteger(t)?t<0?1:t>100?100:t:25,n=Number.isInteger(n)?n<100?100:n>1e4?1e4:n:1200;let{onDisplayInfo:l}=(0,c.P)(),{i18n:s}=(0,i.B)(),[u,x]=(0,a.useState)(null),f=(0,a.useRef)(!1),g=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=l(async e=>{let{info:t}=e;f.current=t.passThru,t.onPassThru?o.o.info(t.passThru?s.t("Pass-through enabled"):s.t("Pass-through disabled"),{},!1):o.o.info(t.total>1?s.t("Display {{number}}/{{total}} ({{dimensions}})",{number:t.index+1,total:t.total,dimensions:"".concat(t.workArea.width,"x").concat(t.workArea.height)}):s.t("Main display ({{dimensions}})",{dimensions:"".concat(t.workArea.width,"x").concat(t.workArea.height)})),null!==g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{x("".concat(performance.now(),"-").concat(+!!t.passThru)),g.current=null},150)});return()=>{e()}},[]);let j=(0,p.i7)(m(),t),v=(0,p.i7)(h(),t+100);return(0,r.jsx)(d.A,{style:{left:f.current?60:30},sx:{position:"fixed",zIndex:3,top:0,pointerEvents:"none",userSelect:"none",width:"".concat(t,"vw"),height:"100vh",transition:"none",overflow:"hidden",maskImage:"linear-gradient(to right, transparent 0%, black 50%, black 50%, transparent 100%)",transform:"translateX(-".concat(t,"vw)"),animation:"".concat(j," ").concat(n,"ms linear forwards"),"&:before":{content:'""',position:"fixed",top:0,left:0,width:"".concat(t+100,"vw"),height:"100vh",pointerEvents:"none",userSelect:"none",transform:"translateX(0)",animation:"".concat(v," ").concat(n,"ms linear forwards"),background:"url(/img/".concat(f.current?"symbol-in":"symbol-out",".png) repeat 0 0 transparent"),backgroundAttachment:"fixed"}}},u)};function g(e){if(!Array.isArray(e)||!e.length)return"";let t=e.reduce((e,t,n,r)=>{let[l,i]=t,[o,s]=r[(n+1)%r.length];return e.push(l,i,(l+o)/2,(i+s)/2),e},["M",...e[0],"Q"]);return t.push("Z"),t.join(" ")}function j(e){return Array.isArray(e)&&e.length?["M ".concat(e[0][0]," ").concat(e[0][1]),...e.slice(1).map(e=>{let[t,n]=e;return"L ".concat(t," ").concat(n)}),"Z"].join(" "):""}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,l=Math.min(e[0],t[0]),i=Math.max(e[0],t[0]),o=Math.min(e[1],t[1]),s=Math.max(e[1],t[1]);if((n=Math.min(Math.floor((i-l)/2),Math.floor((s-o)/2),n))<=0||r<2)return[[l,o],[i,o],[i,s],[l,s],[l,o]];let a=n,c=[];function u(e,t,n,l){let i=(l-n)/(r-1),o=[];for(let l=0;l<r;l++){let r=n+i*l;o.push([e+Math.cos(r)*a,t+Math.sin(r)*a])}return o}return c.push([l+a,o]),c.push([i-a,o]),c.push(...u(i-a,o+a,-Math.PI/2,0).slice(1)),c.push([i,s-a]),c.push(...u(i-a,s-a,0,Math.PI/2).slice(1)),c.push([l+a,s]),c.push(...u(l+a,s-a,Math.PI/2,Math.PI).slice(1)),c.push([l,o+a]),c.push(...u(l+a,o+a,Math.PI,1.5*Math.PI).slice(1)),c.push(c[0]),c.map(e=>[...e,0])}function A(e,t){let n=Math.min(e[0],t[0]),r=Math.max(e[0],t[0]),l=Math.min(e[1],t[1]);return{x:n,y:l,width:r-n,height:Math.max(e[1],t[1])-l}}var y=n(3362);let b={escape:"Escape",space:"Space"},w={shift:"Shift",ctrl:"Control",meta:"Meta"};var S=n(27996);let k=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{zIndex:4,display:"flex",position:"absolute",marginTop:"-22px",marginLeft:"-15px","& .drag":{position:"absolute",height:"40px",width:"40px",top:"50%",left:"-40px",marginTop:"-20px",display:"flex",transition:"opacity 100ms linear",justifyContent:"center",alignItems:"center",opacity:0},"&:hover .drag, & .drag:hover":{opacity:1},"& .content":{outline:"none",minWidth:45,"&:hover, &:focus":{outline:"2px dashed #fff"},padding:10,paddingLeft:15,paddingRight:15,borderRadius:10}}}),I=e=>{let{top:t,left:n,text:l=null,id:i=null,rolledOut:o=!1,autoFocus:u=!1}=e,{historyCreate:x,historyUpdate:p,historyDelete:m,canvasTextReset:h,canvasEnable:f,onDisplayInfo:g}=(0,c.P)(),{settings:j}=(0,s.t)(),[A,y]=(0,a.useState)({x:0,y:0}),[b,w]=(0,a.useState)(!1),I=(0,a.useRef)({mouseX:0,mouseY:0,x:0,y:0}),C=(0,a.useRef)(null),E=(0,a.useRef)(!1),z=(0,a.useRef)(null),O=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{u&&setTimeout(()=>{if(null===z.current)return;z.current.focus();let e=document.createRange(),t=window.getSelection();e.selectNodeContents(z.current),e.collapse(!1),t.removeAllRanges(),t.addRange(e)},250);let e=e=>{E.current&&y({x:I.current.x+e.clientX-I.current.mouseX,y:I.current.y+e.clientY-I.current.mouseY})},t=()=>{f(!0),E.current&&(E.current=!1,z.current.focus(),z.current.blur(),y({x:0,y:0}))};document.addEventListener("mousemove",e),document.addEventListener("mouseup",t);let n=g(async e=>{let{info:t}=e;w(t.passThru)});return()=>{n(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[]),(0,a.useEffect)(()=>{y({x:0,y:0})},[n,t]),(0,a.useEffect)(()=>{if(null!==i&&l){if(!O.current){O.current=!0;return}if(null!==z.current){let{x:e,y:t,width:n,height:r}=C.current.getBoundingClientRect();p(i,{points:v([e,t],[e+n,t+r],0)},!0)}}},[t,n,l,j.textFont,j.textSize]),(0,r.jsxs)(k,{ref:C,onMouseDown:e=>{e.target.closest(".drag")&&(f(!1),E.current=!0,I.current={mouseX:e.clientX,mouseY:e.clientY,x:A.x,y:A.y})},style:{top:t,left:n,opacity:o?.5:1,transform:"translate(".concat(A.x,"px, ").concat(A.y,"px)"),...b?{pointerEvents:"none"}:{}},children:[null===i||o?null:(0,r.jsx)(d.A,{className:"drag",children:(0,r.jsx)(S.A,{style:{fill:"#fff",filter:"drop-shadow(0 0 1px #000) drop-shadow(0 0 1px #000)"}})}),(0,r.jsx)(d.A,{tabIndex:0,className:"content",contentEditable:!0,suppressContentEditableWarning:!0,ref:z,role:"textbox","aria-multiline":"true","data-placeholder":"...",sx:{whiteSpace:"pre-wrap",textAlign:j.textAlignment,fontFamily:j.textFont},style:{...E.current?{outline:"none"}:{},color:o?"#000":j.textColor,fontSize:"".concat(j.textSize,"px"),lineHeight:"".concat(j.textSize,"px"),minHeight:"".concat(j.textSize+20,"px"),filter:o?null:"drop-shadow(0 0px 1px ".concat(j.textStrokeColor,") drop-shadow(0 0 1px ").concat(j.textStrokeColor,")")},onBlur:e=>{if(null===e.target)return;let r=e.target.innerText.trim().replace(/[\r\n]{2,}/g,"\n\n");e.target.innerText=r;let{x:l,y:o,width:s,height:a}=C.current.getBoundingClientRect(),c=v([l,o],[l+s,o+a],0),u={left:n+A.x,top:t+A.y,text:r,points:c};null===i?r&&x("text",u):r?p(i,u):m([i]),h()},onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain"),n=window.getSelection();if(!n.rangeCount)return;let r=n.getRangeAt(0);r.deleteContents(),r.insertNode(document.createTextNode(t)),r.collapse(!1),n.removeAllRanges(),n.addRange(r)},children:l})]},"".concat(t,"-").concat(n))},C=()=>{let{onHistory:e,onCanvasRollout:t}=(0,c.P)(),[n,l]=(0,a.useState)([]),[i,o]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let n=e(e=>{let{items:t}=e,n=[];for(let e of Object.keys(t))"text"===e.substring(0,e.indexOf("-"))&&n.push({...t[e],itemId:e});o(n)}),r=t(e=>{let{ids:t}=e;l(t)});return()=>{n(),r()}},[]),(0,r.jsx)(r.Fragment,{children:i.map(e=>{let{itemId:t,top:l,left:i,text:o}=e;return(0,r.jsx)(I,{rolledOut:n.includes(t),id:t,top:l,left:i,text:o},t)})})},E=e=>{let{children:t}=e,{onCanvasDraw:n}=(0,c.P)(),[l,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=n(e=>{let{draw:t}=e;return i(t)});return()=>e()},[]),(0,r.jsx)(d.A,{style:{...l?{pointerEvents:"none"}:{}},children:t})},z=()=>{let{onCanvasText:e}=(0,c.P)(),[t,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t=e(n);return()=>t()},[]),null!==t?(0,r.jsx)(I,{top:t.y,left:t.x,text:t.text,autoFocus:!0}):null},O=e=>{let{refTool:t}=e,{onCanvasBox:n}=(0,c.P)(),{settings:l}=(0,s.t)(),[i,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=n(e=>{let{coords:n}=e;y.A.tools.SPOTLIGHT===t.current&&o(Array.isArray(n)&&2==n.length?A(n[0],n[1]):null)});return()=>e()},[]),null!==i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("mask",{id:"tool-spotlight-mask",children:[(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,r.jsx)("rect",{x:i.x,y:i.y,width:i.width,height:i.height,rx:l.spotlightRadius,ry:l.spotlightRadius,fill:"black"})]})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:l.spotlightColor,opacity:"0.5",mask:"url(#tool-spotlight-mask)"})]}):null};var T=n(24230);let R={data:{},get:(e,t)=>{let n="".concat(e,"-").concat(JSON.stringify(t));return"string"!=typeof R.data[n]&&(R.data[n]=g((0,T.$4)(e,t))),R.data[n]}},P=e=>{let{refTool:t}=e,{onHistory:n,canvasPointsReset:l,onCanvasRollout:i,onCanvasBox:o}=(0,c.P)(),{settings:u,getToolValue:d}=(0,s.t)(),[x,p]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null),[f,g]=(0,a.useState)([]),[A,b]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=n(e=>{let{items:t}=e;l();let n=[],r=null;for(let e of Object.keys(t)){let l=e.substring(0,e.indexOf("-"));[y.A.tools.PEN,y.A.tools.LINE,y.A.tools.BOX].includes(l)&&n.push({...t[e],itemId:e,itemType:l}),y.A.tools.SPOTLIGHT===l&&(r={...t[e],itemId:e,itemType:l})}n.length||(R.data={}),b(n),h(r)}),r=o(e=>{let{coords:n}=e;p(y.A.tools.SPOTLIGHT!==t.current||null===n)}),s=i(e=>{let{ids:t}=e;g(t)});return()=>{e(),r(),s()}},[]),(0,r.jsxs)(r.Fragment,{children:[x&&null!==m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("mask",{id:"spotlight-mask",children:[(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,r.jsx)("rect",{x:m.x,y:m.y,width:m.width,height:m.height,rx:u.spotlightRadius,ry:u.spotlightRadius,fill:"black"})]})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:f.includes(m.itemId)?"#000000":u.spotlightColor,opacity:f.includes(m.itemId)?.25:1,mask:"url(#spotlight-mask)"})]}):null,A.length?A.map(e=>{let{itemId:t,itemType:n,points:l,coords:i}=e;y.A.tools.BOX===n&&Array.isArray(i)&&(l=v(i[0],i[1],u.boxRadius));let o=(Array.isArray(l)?l:[]).length?R.get(l,{size:d(n,"size"),smoothing:d(n,"smoothing"),streamline:d(n,"streamline"),thinning:d(n,"thinning")}):"",s=y.A.tools.BOX===n&&(9!==u.boxFillColor.length||"00"!==u.boxFillColor.substring(7))?j(l):null,c=f.includes(t),x=c?"#000":d(n,"color"),p=c?.5:1;return o?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("path",{stroke:d(n,"stroke"),strokeWidth:2,strokeOpacity:+!c,strokeLinecap:"round",paintOrder:"stroke",fill:x,fillOpacity:p,d:o}),s?(0,r.jsx)("path",{fill:c?"#000":u.boxFillColor,fillOpacity:p,d:s}):null]},t):null}):null]})},N=()=>{let{settings:e,getToolValue:t}=(0,s.t)(),{onCanvasLaser:n}=(0,c.P)(),[l,i]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=n(e=>{let{items:t}=e,n=[];for(let e of Object.keys(t))n.push({itemId:e,points:t[e]});i(n)});return()=>{e()}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"userSpaceOnUse",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"10",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),l.length?l.map(n=>{let{itemId:l,points:i}=n,o=(Array.isArray(i)?i:[]).length?g((0,T.$4)(i,{size:t(y.A.tools.LASER,"size"),smoothing:t(y.A.tools.LASER,"smoothing"),streamline:t(y.A.tools.LASER,"streamline"),thinning:t(y.A.tools.LASER,"thinning")})):"",s=e.laserColor;return o?(0,r.jsx)("path",{filter:"url(#glow)",fill:s,fillOpacity:1,d:o},l):null}):null]})},L=e=>{let{refTool:t}=e,{settings:n,getToolValue:l}=(0,s.t)(),{onCanvasPoints:i,onCanvasBox:o}=(0,c.P)(),[u,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=i(e=>{let{points:t}=e;d(t)}),r=o(e=>{let{coords:r}=e;y.A.tools.BOX===t.current&&d(Array.isArray(r)&&2==r.length?v(r[0],r[1],n.boxRadius):[])});return()=>{e(),r()}},[n.boxRadius]);let x=y.A.tools.ERASER===t.current?"#000":l(t.current,"color"),p=y.A.tools.ERASER===t.current?.5:1,m=+(y.A.tools.ERASER!==t.current),h=u.length?g((0,T.$4)(u,{size:l(t.current,"size"),smoothing:l(t.current,"smoothing"),streamline:l(t.current,"streamline"),thinning:l(t.current,"thinning")})):"",f=y.A.tools.BOX===t.current&&(9!==n.boxFillColor.length||"00"!==n.boxFillColor.substring(7))?j(u):null;return(0,r.jsxs)(r.Fragment,{children:[u.length?(0,r.jsx)("path",{stroke:l(t.current,"stroke"),strokeWidth:2,strokeOpacity:m,strokeLinecap:"round",paintOrder:"stroke",fill:x,fillOpacity:p,d:h}):null,f?(0,r.jsx)("path",{fill:y.A.tools.ERASER===t.current?"#000":n.boxFillColor,fillOpacity:p,d:f}):null]})},M=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{boxShadow:t.shadows[3],justifyContent:"center",pointerEvents:"none",alignItems:"center",position:"absolute",userSelect:"none",display:"none",width:"auto",zIndex:2}}),B=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{background:"url(/img/placeholder/stream.webp) repeat 0 0 transparent",transition:"opacity 400ms linear",backgroundSize:"auto",position:"absolute",height:"100%",width:"100%",opacity:1,zIndex:2,top:0,left:0}}),F=(0,u.Ay)("video")(e=>{let{theme:t}=e;return{pointerEvents:"none",borderRadius:"20px",position:"relative",objectFit:"cover",userSelect:"none",maxWidth:"100vw",aspectRatio:.5,height:"25vh",width:"auto",opacity:0,zIndex:1,left:0,top:0}}),D=()=>{var e,t,n,l,u,d,x,p;let{webcamSetList:m,onWebcamList:h,onWebcamConfigId:f,webcamGetConfigId:g,webcamSetConfigId:j}=(0,c.P)(),{getStream:v,resetStream:A}=function(){let e=(0,a.useRef)({});return{getStream:async t=>{var n;return"string"!=typeof t||e.current[t]||(e.current[t]=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t}}})),null!=(n=e.current[t])?n:null},resetStream:t=>{for(let r of"string"==typeof t?[t]:Object.keys(e.current)){try{var n;"function"==typeof(null==(n=e.current[r])?void 0:n.getTracks)&&e.current[r].getTracks().forEach(e=>{"function"==typeof(null==e?void 0:e.stop)&&e.stop()})}catch(e){}delete e.current[r]}}}}(),{getWebcamValue:b}=(0,s.t)(),{i18n:w}=(0,i.B)(),[S,k]=(0,a.useState)(g()),[I,C]=(0,a.useState)(null),[E,z]=(0,a.useState)(!1),O=(0,a.useRef)(null),T=(0,a.useRef)(null),R=null!=(e=b(S,"id"))?e:"",P=null!=(t=b(S,"orientation"))?t:y.A.orientation.LANDSCAPE,N=null!=(n=b(S,"placement"))?n:"bottom-right",L=null!=(l=b(S,"marginX"))?l:5,D=null!=(u=b(S,"marginY"))?u:5,X=null!=(d=b(S,"height"))?d:25,U=null!=(x=b(S,"radius"))?x:20;(0,a.useEffect)(()=>{k(g());let e=f(e=>{let{configId:t}=e;return k(t)}),t=async()=>{try{let e=await navigator.mediaDevices.enumerateDevices();m(Array.isArray(e)?e.filter(e=>"videoinput"===(null==e?void 0:e.kind)).map(e=>e.toJSON()):[])}catch(e){}};return navigator.mediaDevices.addEventListener("devicechange",t),t(),()=>{e(),navigator.mediaDevices.removeEventListener("devicechange",t)}},[]),(0,a.useEffect)(()=>{let e=performance.now();z(!1);let t=e=>{A(R),setTimeout(()=>{e&&o.o.error(e),j(null)},300)},n=h(async e=>{let{list:n}=e,r=n.map(e=>{var t;return null!=(t=null==e?void 0:e.deviceId)?t:null}).filter(e=>null!==e);"string"==typeof R&&R.length&&(r.includes(R)||t(w.t("Webcam disconnected")))});(async()=>{var n,r,l;if(T.current&&"string"==typeof R&&R.length)try{if(O.current=await v(R),!O.current)throw Error(w.t("Invalid webcam stream"));T.current.srcObject=O.current,await T.current.play();let t=O.current.getVideoTracks()[0];"function"==typeof(null==t?void 0:t.getSettings)&&(t.enabled=!0,C(null!=(r=null==(n=t.getSettings())?void 0:n.aspectRatio)?r:null),setTimeout(()=>z(!0),performance.now()-e<300?300-(performance.now()-e):0))}catch(e){t("".concat(null!=(l=null==e?void 0:e.message)?l:e))}})();let r=setTimeout(()=>{T.current.srcObject||A()},5e3);return()=>{z(!1),n(),clearTimeout(r),(async()=>{var e,t;try{"function"==typeof(null==(e=T.current)?void 0:e.pause)&&(await T.current.pause(),T.current.srcObject=null,await T.current.load())}catch(e){}try{"function"==typeof(null==(t=O.current)?void 0:t.getTracks)&&O.current.getTracks().forEach(e=>{e.enabled=!1})}catch(e){}})()}},[R,S]);let K="".concat(U,"px"),Y="".concat(X,"vh"),_=null!=(p=({"top-left":{left:"".concat(L,"vh"),top:"".concat(D,"vh")},top:{left:"50%",top:"".concat(D,"vh"),transform:"translate(-50%, 0)"},"top-right":{right:"".concat(L,"vh"),top:"".concat(D,"vh")},right:{right:"".concat(L,"vh"),top:"50%",transform:"translate(0, -50%)"},"bottom-right":{right:"".concat(L,"vh"),bottom:"".concat(D,"vh")},bottom:{left:"50%",bottom:"".concat(D,"vh"),transform:"translate(-50%, 0)"},"bottom-left":{left:"".concat(L,"vh"),bottom:"".concat(D,"vh")},left:{left:"".concat(L,"vh"),top:"50%",transform:"translate(0, -50%)"},center:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})[N])?p:{right:"".concat(L,"vh"),bottom:"".concat(D,"vh")};return(0,r.jsxs)(M,{style:{...R?{display:"flex"}:{},..._,borderRadius:K,height:Y},children:[(0,r.jsx)(B,{style:{...R&&E?{opacity:0}:{},borderRadius:K}}),(0,r.jsx)(F,{style:{...function(e,t){let n=null;do{var r;if([y.A.orientation.PORTRAIT,y.A.orientation.LANDSCAPE].includes(e)){Number.isFinite(t)&&t>0&&(n=y.A.orientation.PORTRAIT===e&&t>1||y.A.orientation.LANDSCAPE===e&&t<1?1/t:t);break}n=null!=(r=({[y.A.orientation.R1_1]:1,[y.A.orientation.R16_9]:16/9,[y.A.orientation.R9_16]:9/16,[y.A.orientation.R21_9]:21/9,[y.A.orientation.R9_21]:9/21,[y.A.orientation.R32_9]:32/9,[y.A.orientation.R9_32]:9/32,[y.A.orientation.R45_9]:5,[y.A.orientation.R9_45]:.2})[e])?r:null}while(!1);return null!==n?{aspectRatio:n}:{}}(P,I),...R&&E?{opacity:1}:{},borderRadius:K,height:Y},disablePictureInPicture:!0,disableRemotePlayback:!0,controls:!1,ref:T,playsInline:!0,autoPlay:!0,muted:!0})]})},X=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{top:0,left:0,width:"100vw",height:"100vh",position:"fixed",overflow:"hidden",pointerEvents:"auto",zIndex:2}}),U=(0,u.Ay)("svg")(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,width:"100%",height:"100%",touchAction:"none",zIndex:3}}),K=()=>{let{onSubscription:e,canvasDrawSet:t,canvasToolGet:n,canvasPointsSet:l,canvasPointsAdd:i,canvasPointsGet:o,canvasPointsReset:u,canvasRolloutAdd:d,canvasRolloutGet:x,canvasRolloutReset:p,canvasLaserAdd:m,canvasLaserStop:h,canvasLaserStart:f,canvasBoxGet:g,canvasBoxSetFrom:j,canvasBoxSetTo:S,canvasBoxReset:k,canvasTextAdd:I,historyCreate:T,historyDelete:R,historyRead:M,onDisplayInfo:B,dialogSet:F,getDeviceInfo:K}=(0,c.P)(),Y=function(){let{getDeviceInfo:e,onDisplayInfo:t,canvasToolSet:n}=(0,c.P)(),{settings:r}=(0,s.t)(),l=(0,a.useRef)({mouseDown:!1,escape:!1,space:!1,shift:!1,ctrl:!1,meta:!1}),i="string"==typeof y.A.cursor.sizes[r.cursor]?r.cursor:y.A.cursor.default,o=y.A.cursor.sizes[i],u=e=>{n(e);let t="".concat(i,"/").concat(e).concat(l.current.mouseDown?"-down":"");document.documentElement.style.setProperty("--cursor",'url("/img/cursor/'.concat(t,'.png") ').concat(o,", auto"))},d=()=>{let t="macos"===e().os?l.current.meta:l.current.ctrl;do{if(l.current.escape){u(y.A.tools.ERASER);break}if(l.current.space){u(y.A.tools.SPOTLIGHT);break}if(l.current.shift&&t){u(y.A.tools.BOX);break}if(t){u(y.A.tools.LINE);break}if(l.current.shift){u(y.A.tools.LASER);break}u(y.A.tools.PEN)}while(!1)},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=0;Object.values(y.A.tools).map((n,l)=>{setTimeout(()=>{new Image().src="/img/cursor/".concat(r.cursor,"/").concat(n,".png")},10*t),setTimeout(()=>{let t=new Image;0===l&&(t.onload=()=>"function"==typeof e&&e()),t.src="/img/cursor/".concat(r.cursor,"/").concat(n,"-down.png")},(t+1)*10),t+=2})};return(0,a.useEffect)(()=>{x(d);let e=e=>{l.current.mouseDown=!0,d()},n=()=>{l.current.mouseDown=!1,d()},r=e=>{let t=!1;for(let n of Object.keys(b))b[n]!==e.code||l.current[n]||(t=!0,l.current[n]=!0);for(let n of Object.keys(w))w[n]!==e.key||l.current[n]||(t=!0,l.current[n]=!0);t&&d()},i=e=>{let t=!1;for(let n of Object.keys(b))b[n]===e.code&&l.current[n]&&(t=!0,l.current[n]=!1);for(let n of Object.keys(w))w[n]===e.key&&l.current[n]&&(t=!0,l.current[n]=!1);t&&d()};window.addEventListener("mousedown",e),window.addEventListener("mouseup",n),window.addEventListener("keydown",r),window.addEventListener("keyup",i);let o=t(async()=>{Object.keys(l.current).map(e=>{l.current[e]=!1}),d()});return()=>{o(),window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",n),window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)}},[r.cursor]),l}(),{settings:_}=(0,s.t)(),W=(0,a.useRef)({time:0,x:0,y:0}),H=(0,a.useRef)(y.A.tools.PEN),G=(0,a.useRef)(!1),[V,q]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=B(async e=>{let{info:t}=e;q(t.passThru)}),n=e(e=>{let{info:t}=e;G.current=!!t.active});return()=>{t(),n()}},[]),(0,r.jsxs)(X,{children:[(0,r.jsx)(D,{}),(0,r.jsxs)(U,{"data-use-cursor":V?null:"true",onPointerDown:e=>{if(!V){if(!G.current)return void F("dialog:subscription");if((e=>{if(!e.isPrimary||"mouse"===e.pointerType&&0!==e.button)return!1;let t=performance.now(),{clientX:n,clientY:r}=e,l=W.current,i=t-l.time,o=Math.hypot(n-l.x,r-l.y);if(i>0&&i<300&&o<15){W.current.time=0;let e=null;if("macos"===K().os?Y.current.meta:Y.current.ctrl){let t=1,n=M();for(let e of Object.keys(n.items)){var s;if(0!==e.indexOf("text-")||"string"!=typeof(null==(s=n.items[e])?void 0:s.text))continue;let r=n.items[e].text.match(/^(\d+)(\W|$)/);if(!r)continue;let l=parseInt(r[1],10)+1;Number.isInteger(l)&&!(l<=t)&&(t=l)}e="".concat(t," ")}return I(n,r,e),!0}return W.current={time:t,x:n,y:r},!1})(e))return void t(!1);if(t(!0),e.target.setPointerCapture(e.pointerId),H.current=n(),u(!1),y.A.tools.PEN===H.current||y.A.tools.ERASER===H.current)return void i([e.pageX,e.pageY,e.pressure]);if(y.A.tools.LASER===H.current)return void f([e.pageX,e.pageY,e.pressure],_.laserDelay);if(y.A.tools.LINE===H.current||y.A.tools.BOX===H.current||y.A.tools.SPOTLIGHT===H.current)return void j(e.pageX,e.pageY)}},onPointerMove:e=>{if(!V&&G.current&&1===e.buttons){if(y.A.tools.PEN===H.current)return void i([e.pageX,e.pageY,e.pressure]);if(y.A.tools.ERASER===H.current){i([e.pageX,e.pageY,e.pressure]);let t=x().reduce((e,t)=>(e[t]=1,e),{}),n=function(e,t){if("object"!=typeof e||null===e||0===Object.keys(e).length||!Array.isArray(t)||t.length<2)return null;let n=(e,t,n)=>{let r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},r=(e,t,n)=>t[0]>=Math.min(e[0],n[0])&&t[0]<=Math.max(e[0],n[0])&&t[1]>=Math.min(e[1],n[1])&&t[1]<=Math.max(e[1],n[1]),l=(e,t,l,i)=>{if(!(Math.max(e[0],t[0])>=Math.min(l[0],i[0])&&Math.max(l[0],i[0])>=Math.min(e[0],t[0])&&Math.max(e[1],t[1])>=Math.min(l[1],i[1])&&Math.max(l[1],i[1])>=Math.min(e[1],t[1])))return!1;let o=n(e,t,l),s=n(e,t,i),a=n(l,i,e),c=n(l,i,t);return!!(o!==s&&a!==c||0===o&&r(e,l,t)||0===s&&r(e,i,t)||0===a&&r(l,e,i)||0===c&&r(l,t,i))},i=[];for(let e=0;e<t.length-1;e++)i.push([t[e],t[e+1]]);for(let t of Object.keys(e)){var o;let n=null==(o=e[t])?void 0:o.points;if(Array.isArray(n)&&!(n.length<2)){for(let[e,r]of i)for(let i=0;i<n.length-1;i++)if(l(e,r,n[i],n[i+1]))return t}}return null}(x().length?Object.keys(M().items).reduce((e,n)=>(t[n]||(e[n]=M().items[n]),e),{}):M().items,o());null===n||t[n]||d(n);return}if(y.A.tools.LASER===H.current)return void m([e.pageX,e.pageY,e.pressure]);if(y.A.tools.LINE===H.current){S(e.pageX,e.pageY);let t=g();l(Array.isArray(t)?t:[]);return}if(y.A.tools.BOX===H.current||y.A.tools.SPOTLIGHT===H.current)return void S(e.pageX,e.pageY)}},onPointerUp:e=>{if(V||!G.current)return;t(!1);let n=o();if(u(),y.A.tools.PEN===H.current){Array.isArray(n)&&n.length>=3&&T(y.A.tools.PEN,{points:n});return}if(y.A.tools.ERASER===H.current){x().length&&(R(x()),p());return}if(y.A.tools.LASER===H.current)return void h();if(y.A.tools.LINE===H.current){let e=g();Array.isArray(e)&&(T(y.A.tools.LINE,{points:e}),k());return}if(y.A.tools.BOX===H.current){let e=g();Array.isArray(e)&&(T(y.A.tools.BOX,{coords:e,points:v(e[0],e[1],0)}),k());return}if(y.A.tools.SPOTLIGHT===H.current){let e=g();Array.isArray(e)&&(T(y.A.tools.SPOTLIGHT,{...A(e[0],e[1]),points:v(e[0],e[1],0)}),k());return}},children:[(0,r.jsx)(O,{refTool:H}),(0,r.jsx)(P,{refTool:H}),(0,r.jsx)(L,{refTool:H}),(0,r.jsx)(N,{})]}),(0,r.jsxs)(E,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(z,{})]})]})};var Y=n(71507),_=n.n(Y);let W=e=>e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName),H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useRef)(null),n=()=>{e.onSuccess&&e.onSuccess(),e.selectOnCopy&&W(t.current)&&t.current.select()},r=()=>{e.onError&&e.onError(),!1!==e.selectOnError&&W(t.current)&&t.current.select()},l=e=>{_()(e).then(n).catch(r)};return{copy:(0,a.useCallback)(e=>{"string"==typeof e?l(e):t.current&&l(t.current.value)},[]),target:t}};var G=n(80218),V=n.n(G),q=n(67906),Z=n(80553),J=n(44395),Q=n(35003),$=n(71733),ee=n(50993),et=n(79270),en=n(65754),er=n(10240),el=n(50138),ei=n(72563),eo=n(35283),es=n(47896),ea=n(72471),ec=n(20191),eu=n(27780),ed=n(216),ex=n(88639),ep=n(54544),em=n(22653),eh=n(66703),ef=n(6995);let eg=(0,u.Ay)(d.A)(e=>{let{theme:t,size:n="small"}=e;return{background:t.palette.background.paper,justifyContent:"center",alignItems:"center",display:"flex",boxShadow:t.shadows[3],borderRadius:"small"===n?"0.4rem":"1rem",fontSize:"small"===n?"0.85rem":"3rem",marginRight:"small"===n?"0px":"2px",marginLeft:"small"===n?"1px":"2px",height:"small"===n?"2rem":"5rem",width:"small"===n?"1.1rem":"3rem"}});function ej(e){let{subInfo:t={},sx:n={},small:l=!1}=e,i=(0,eh.A)(),o=(0,ef.A)(i.breakpoints.up("sm")),[s,c]=(0,a.useState)(null);("object"!=typeof n||null===n)&&(n={}),(0,a.useEffect)(()=>{let e=null;return Number.isInteger(t.pilotLeft)&&t.pilotLeft>0&&(c(t.pilotLeft),e=setInterval(()=>{c(e=>e-1)},1e3)),()=>null!==e&&clearInterval(e)},[t.pilotLeft]);let u=t.pilotLeft>0&&t.planComputersCount>0&&t.computersCount>t.planComputersCount,x=(o||!l?"00:00:00":"00:00").split("");return"number"==typeof s&&s>0&&(x=[Math.floor(s/3600),Math.floor(s%3600/60),...o||!l?[Math.floor(s%60)]:[]].map(e=>"".concat(e).padStart(2,"0")).join(":").split("")),t.active&&"pilot"===t.status||u?(0,r.jsx)(d.A,{sx:{display:"flex",justifyContent:"space-between",...n},children:x.map((e,t)=>(0,r.jsx)(eg,{size:l?"small":"large",children:e},t))}):null}let ev=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{position:"absolute",left:"-2rem",bottom:"-5rem",width:"25rem",height:"25rem",zIndex:1,opacity:.1,"&>svg":{position:"relative",width:"100%",height:"100%"}}}),eA=(0,u.Ay)("pre")(e=>{let{theme:t}=e;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,color:t.palette.text.primary,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}});function ey(e){var t,n,s,u,x,p;let{isOpen:m=!1,onClose:h=()=>{}}=e,{onSubscription:f,getSubscription:g}=(0,c.P)(),{i18n:j}=(0,i.B)(),v=H(),A=(0,l.A)(),[b,w]=(0,a.useState)(null),[S,k]=(0,a.useState)({}),[I,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{k(g());let e=f(e=>{let{info:t}=e;k(t)});return(async()=>{var e;w(await (null==(e=window.sdk)?void 0:e.ipc.device.getSerialNumber()))})(),C(!0),()=>e()},[]);let E=()=>{m&&"function"==typeof h&&h()},z=async e=>{o.o.info(j.t("Copied computer serial number to clipboard"),null,!1),v.copy(e)},O=async()=>{var e,t,n;E(),o.o.info((null==(e=A.user)?void 0:e.computerEnabled)?j.t("Navigating to billing page..."):j.t("Navigating to my computers..."),null,!1),await (null==(n=window.sdk)?void 0:n.ipc.device.openURL((null==(t=A.user)?void 0:t.computerEnabled)?"".concat(y.A.siteUrl,"/profile/#/tab:billing"):"".concat(y.A.siteUrl,"/#/tab:computers")))},T=[{key:"computersCount",labelSingular:j.t("computer"),labelPlural:j.t("computers"),count:S.computersCount,max:V().max.computersCount,boostedCount:S.planComputersCount,boostedTooltip:j.t("You can use this extra computer until the trial ends"),Icon:ep.A}],R=V().max.computersCount,P=S.pilotLeft>0&&S.planComputersCount>0,N=!(null==(t=A.user)?void 0:t.computerEnabled)||!S.active||y.A.billing.subscriptionStatus.pastDue===S.status;return m&&I?(0,r.jsxs)(et.A,{open:!0,onClose:E,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,r.jsx)(ev,{className:"rotate",children:(null==(n=A.user)?void 0:n.computerEnabled)?S.active?"pilot"===S.status?(0,r.jsx)(eu.A,{color:"info"}):y.A.billing.subscriptionStatus.pastDue===S.status?(0,r.jsx)(es.A,{color:"warning"}):P?(0,r.jsx)(eo.A,{color:"success"}):(0,r.jsx)(el.A,{color:"success"}):(0,r.jsx)(em.A,{color:"warning"}):(0,r.jsx)(ex.A,{})}),(0,r.jsx)(J.A,{children:(null==(s=A.user)?void 0:s.computerEnabled)?S.active?"pilot"===S.status?j.t("Free trial"):y.A.billing.subscriptionStatus.pastDue===S.status?j.t("Invoice past due"):j.t("Active subscription"):j.t("Subscription required"):j.t("Computer disabled")}),(0,r.jsx)(Z.A,{sx:{my:6,position:"relative",zIndex:2},children:(null==(u=A.user)?void 0:u.computerEnabled)?S.active?(0,r.jsxs)(d.A,{children:["pilot"!==S.status&&y.A.billing.subscriptionStatus.pastDue===S.status?(0,r.jsx)(er.A,{severity:"warning",sx:{mb:6},children:j.t("Invoice past due. Please fix this issue to avoid service interruption.")}):null,"pilot"===S.status||P?(0,r.jsxs)(d.A,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",userSelect:"none",mb:6},children:[(0,r.jsx)(ej,{subInfo:S,sx:{mb:6}}),(0,r.jsx)(Q.A,{variant:"body2",children:j.t("Free trial limits expire soon")})]}):null,T.map(e=>(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:3},children:[(0,r.jsx)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",mr:6},children:[...Array(R).keys()].map(t=>{let n=P&&t>=e.boostedCount;return t<e.count?(0,r.jsx)(ee.A,{placement:"top",title:n?e.boostedTooltip:null,children:(0,r.jsx)(e.Icon,{className:n?"zoom-in":null,color:n?"success":"inherit"})},t):(0,r.jsx)(ec.A,{sx:{opacity:+(t<e.max)}},t)})}),(0,r.jsx)(d.A,{sx:{minWidth:"10rem",textAlign:"right"},children:(0,r.jsxs)(Q.A,{variant:"body2",color:"text.secondary",children:[(0,r.jsx)("b",{children:e.count})," ",1===e.count?e.labelSingular:e.labelPlural]})})]},e.key))]}):(0,r.jsx)(er.A,{icon:(0,r.jsx)(ea.A,{}),severity:"warning",variant:"filled",children:j.t("To continue using the software, please upgrade to a paid plan.")}):(0,r.jsxs)(er.A,{severity:"info",icon:(0,r.jsx)(ex.A,{}),sx:{"&>.MuiAlert-message":{width:"100%"}},children:[(0,r.jsx)(Q.A,{variant:"body2",sx:{color:"inherit",width:"100%"},children:j.t("Please go to your dashboard and enable computer with serial number:")}),(0,r.jsxs)(d.A,{display:"flex",sx:{width:"100%",justifyContent:"center",alignItems:"center",my:3},children:[(0,r.jsx)(ee.A,{title:j.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard."),placement:"top",children:(0,r.jsx)(eA,{children:b})}),(0,r.jsx)(ee.A,{title:j.t("Click to copy"),placement:"top",children:(0,r.jsx)($.A,{onClick:()=>z(b),children:(0,r.jsx)(ed.A,{fontSize:"small"})})})]})]})}),(0,r.jsxs)(q.A,{sx:{position:"relative",zIndex:2},children:[(0,r.jsx)(en.A,{startIcon:(null==(x=A.user)?void 0:x.computerEnabled)?(0,r.jsx)(ei.A,{}):(0,r.jsx)(ep.A,{}),onClick:O,color:S.active?"primary":"warning",className:N?"pop":null,variant:"contained",children:(null==(p=A.user)?void 0:p.computerEnabled)?j.t("Go to billing"):j.t("Go to my computers")}),(0,r.jsx)(en.A,{color:"secondary",onClick:E,children:j.t("Close")})]})]}):null}var eb=n(71090),ew=n(88992);let eS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{month:"long",day:"numeric",year:"numeric"};return e?new Intl.DateTimeFormat(t,n).format(new Date(e)):e};var ek=n(16084),eI=n(39091),eC=n(91040),eE=n(4728),ez=n(95389),eO=n(77648),eT=n(14353),eR=n(38111),eP=n(41316),eN=n(60595),eL=n(87080),eM=n(32136),eB=n(2665),eF=n(7827),eD=n(51018),eX=n(56792),eU=n(53608),eK=n(35250),eY=n(45559),e_=n(43400);let eW=(0,u.Ay)("img")(()=>({width:200,height:200})),eH=e=>{let{uploadPath:t,getSrc:n,onChange:l=async()=>{},crop:s="fit",backgroundColor:c=null,borderColor:u=null,borderWidth:x=null,previewWidth:p=200,previewHeight:m=200,radius:h=5,alt:f="Logo",inputName:g="logo",label:j="Select logo",active:v=!1,width:A=256,height:y=256}=e;"function"!=typeof n&&(n=()=>"/img/logo/192.png");let b=(0,eh.A)(),[w,S]=(0,a.useState)(n()),[k,I]=(0,a.useState)(!1),{i18n:C}=(0,i.B)(),E=null!==u&&null!==x?"solid":null,{getRootProps:z,getInputProps:O}=(0,eU.VB)({multiple:!1,accept:{"image/png":[".png"],"image/jpg":[".jpg",".jpeg"],"image/webp":[".webp"]},onDrop:e=>{let n=document.createElement("img");n.onload=function(){I(!0),setTimeout(()=>{let e=n.width,r=n.height,i=0,o=0;e>r?"fill"===s?(r=y,e*=y/n.height,i=parseInt((A-e)/2,10)):(e=A,r*=A/n.width,o=parseInt((y-r)/2,10)):"fill"===s?(e=A,r*=A/n.width,o=parseInt((y-r)/2,10)):(r=y,e*=y/n.height,i=parseInt((A-e)/2,10));let a=document.createElement("canvas");a.width=A,a.height=y,a.getContext("2d").drawImage(n,i,o,e,r),a.toBlob(e=>{let n=new FormData;n.append(g,e),(async()=>{try{let r=await eC.A.post(t,n,{headers:{"Content-Type":"multipart/form-data"}});S(URL.createObjectURL(e)),"function"==typeof l&&await l(r.data,URL.createObjectURL(e)),I(!1)}catch(e){I(!1)}})()},"png"),a.remove(),n.remove()},eK.A.delay.request)},n.onerror=()=>{o.o.error(C.t("The selected file is not a valid image"),{duration:5e3,ariaProps:{role:"alert"}})},n.src=URL.createObjectURL(Object.assign(e[0]))},validator:()=>{}});return(0,r.jsx)(d.A,{children:k?(0,r.jsx)(d.A,{sx:{width:p,height:m,display:"flex",alignItems:"center",flexDirection:"column"},children:(0,r.jsx)(e_.A,{count:1,spacing:0,rounded:!0,sx:{p:5,width:p,height:m}})}):v?(0,r.jsxs)(d.A,{...z({className:"dropzone"}),sx:{position:"relative",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"},children:[(0,r.jsx)("input",{...O()}),(0,r.jsx)(eW,{src:w,alt:"logo",sx:{m:0,pointerEvents:"none",borderRadius:h,backgroundColor:c,borderStyle:E,borderWidth:x,borderColor:u,width:p,height:m}}),(0,r.jsxs)(d.A,{sx:{position:"absolute",width:"70%",height:"70%",background:"dark"===b.palette.mode?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.6)",borderRadius:"50%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","&:hover > p":{display:"none"},"&:hover > svg":{transform:"scale(2)"}},children:[(0,r.jsx)(eY.A,{}),(0,r.jsx)(Q.A,{size:"large",color:"inherit",sx:{mt:2,textAlign:"center"},children:j})]})]}):(0,r.jsx)(d.A,{sx:{position:"relative",width:p,height:m,"&:before":{content:'""',display:"block",width:p,height:m,position:"absolute",top:0,left:0,zIndex:1,background:b.palette.background.paper,borderRadius:h}},children:(0,r.jsx)(eW,{src:w,sx:{position:"relative",zIndex:1,width:p,height:m,borderRadius:h,backgroundColor:"transparent",borderWidth:x,borderColor:u},alt:f})})})};function eG(){let e=(0,x._)(["0% { opacity: 0 } 100% { opacity: 1 }"]);return eG=function(){return e},e}function eV(){let e=(0,x._)(["0% { opacity: 0; transform: scale(1.5); } 100% { opacity: 1; transform: scale(1); }"]);return eV=function(){return e},e}let eq=(0,p.i7)(eG()),eZ=(0,p.i7)(eV()),eJ=(0,u.Ay)(d.A)(e=>{let{theme:t,color:n}=e;return{display:"flex",position:"absolute",justifyContent:"flex-end",alignItems:"end",top:0,left:0,width:"100%",height:200,zIndex:0,"&:before":{content:'""',display:"block",position:"absolute",background:n,width:"100%",height:"100%",opacity:0,animation:null!==n?"".concat(eq," 1250ms forwards linear"):"none"},"&:after":{content:'""',display:"block",position:"absolute",width:"100%",height:"100%",opacity:0,transform:"scale(1.5)",animation:null!==n?"".concat(eZ," 250ms forwards linear"):"none",background:"url(/img/pages/circles-profile-".concat(t.palette.mode,".svg)"),backgroundSize:"auto",backgroundRepeat:"no-repeat",[t.breakpoints.up("xs")]:{backgroundPosition:"50% -600px",transformOrigin:"50% 100%"},[t.breakpoints.up("md")]:{backgroundPosition:"-680px -600px",transformOrigin:"100px 100%"}}}}),eQ=e=>{var t,n;let{isOpen:o=!1,onOpen:c=()=>{},onClose:u=()=>{}}=e,{settings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),m=(0,l.A)(),h=(0,ek.G)(),f=(0,eh.A)(),g=h.getUserData(),[j,v]=(0,a.useState)(null),[A,b]=(0,a.useState)(!0),[w,S]=(0,a.useState)(!1),[k,I]=(0,a.useState)(null),[C,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o&&"function"==typeof c&&c()},[o]);let z=()=>{o&&"function"==typeof u&&u()},{control:O,setValue:T,handleSubmit:R,formState:{errors:P}}=(0,ew.mN)({defaultValues:{userName:null!=(t=null==g?void 0:g.userName)?t:p.t("User name")},mode:"onChange",resolver:(0,eb.t)(eI.Ik().shape({userName:eI.Yj().min(3,()=>p.t("Must be at least {{n}} characters long",{n:3})).max(64,()=>p.t("Must be at most {{n}} characters long",{n:64})).required()}))});(0,a.useEffect)(()=>{T("userName",null==g?void 0:g.userName),I(null);let e=setTimeout(async()=>{"string"==typeof f.palette.customColors.userColors.gradient[null==g?void 0:g.userColor]&&I(f.palette.customColors.userColors.gradient[null==g?void 0:g.userColor])},150);return()=>clearTimeout(e)},[x.mode,null==g?void 0:g.userColor,null==g?void 0:g.userName]);let N=e=>{"string"==typeof(null==e?void 0:e.userName)&&(T("userName",e.userName),m.setUser({...m.user,userName:e.userName,userColor:e.userColor,userAvatarId:e.userAvatarId}))},L=async()=>{E(!0)},M=async()=>{z(),m.logout()},B=async e=>{if(A){b(!1);try{var t;let n=await eC.A.post("account",e);N(null!=(t=null==n?void 0:n.data)?t:{})}catch(e){}b(!0),S(!1)}},F=async e=>{if(A){b(!1);try{var t;let n=await eC.A.post("account",{userColor:e});N(null!=(t=null==n?void 0:n.data)?t:{})}catch(e){}b(!0)}};return o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(et.A,{open:!0,onClose:z,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:750,p:0}},children:(0,r.jsx)(eP.Ay,{container:!0,spacing:6,children:(0,r.jsx)(eP.Ay,{item:!0,xs:12,children:(0,r.jsxs)(eN.A,{sx:{position:"relative"},children:[(0,r.jsx)(eJ,{color:k}),(0,r.jsx)(eO.A,{sx:{zIndex:10,position:"relative"},action:(0,r.jsxs)(d.A,{sx:{display:"flex"},children:[w&&A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:p.t("Profile color"),children:(0,r.jsx)($.A,{sx:{zIndex:10,background:"light"===f.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:f.palette.background.paper}},onClick:e=>v(e.currentTarget),children:(0,r.jsx)(eF.A,{color:"info"})})}),(0,r.jsx)(eL.A,{keepMounted:!0,anchorEl:j,open:!!j,onClose:()=>v(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{ml:"2px",mt:2},PaperProps:{style:{minWidth:20}},children:Object.keys(f.palette.customColors.userColors.solid).map(e=>(0,r.jsx)(eR.A,{selected:(null==g?void 0:g.userColor)==e,onClick:()=>{v(null),F(e)},children:(0,r.jsx)(d.A,{sx:{width:15,height:15,borderRadius:"50%",background:f.palette.customColors.userColors.solid[e]}})},"user-color-".concat(e)))})]}):null,(0,r.jsx)(ee.A,{title:w?p.t("Exit edit mode"):p.t("Edit profile"),children:(0,r.jsx)($.A,{sx:{ml:2,background:"light"===f.palette.mode?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)","&:hover":{background:f.palette.background.paper}},variant:"contained",color:"inherit",onClick:()=>{if(!w)return void S(!0);T("userName",g.userName),S(!1)},children:w?(0,r.jsx)(eM.A,{}):(0,r.jsx)(eB.A,{})})})]})}),(0,r.jsxs)(ez.A,{sx:{zIndex:10},children:[(0,r.jsx)("form",{onSubmit:R(B),autoComplete:"off",children:(0,r.jsx)(eP.Ay,{container:!0,spacing:7,sx:{justifyContent:"left"},children:(0,r.jsx)(eP.Ay,{item:!0,xs:12,sx:{my:4,display:"flex"},children:(0,r.jsxs)(d.A,{sx:{display:"flex",width:"100%",alignItems:{xs:"center",md:"flex-end"},flexDirection:{xs:"column",md:"row"}},children:[(0,r.jsx)(eH,{crop:"fill",borderColor:f.palette.background.paper,backgroundColor:f.palette.background.paper,inputName:"avatar",uploadPath:"account/avatar",active:w,label:p.t("Select avatar"),radius:"50%",onChange:async()=>{var e;let t=await eC.A.get("account");"string"==typeof(null==(e=t.data)?void 0:e.id)&&m.setUser(t.data)},alt:null!=(n=null==g?void 0:g.userName)?n:p.t("User name"),getSrc:()=>{var e;let t=new Date().toJSON().slice(0,10),n="".concat(y.A.s3Url,"/users/").concat(null==g?void 0:g.id,"/?cb=").concat(t);return(null==(e=m.user)?void 0:e.id)===(null==g?void 0:g.id)&&(n="string"==typeof(null==g?void 0:g.userAvatarId)?"".concat(y.A.s3Url,"/users/").concat(g.id,"/").concat(g.userAvatarId,".png"):"/img/placeholder/user.png"),n}}),(0,r.jsx)(d.A,{sx:{ml:{xs:0,md:6},width:"100%",position:"relative"},children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.A,{sx:{width:"100%",display:"flex"},children:[(0,r.jsx)(ew.xI,{name:"userName",control:O,fullWidth:!0,rules:{required:!0},render:e=>{let{field:{value:t,onChange:n}}=e;return(0,r.jsx)(eT.A,{sx:{textAlign:"center"},fullWidth:!0,required:!0,spellCheck:!1,autoComplete:"off",autoFocus:!0,disabled:!A,value:t,label:p.t("User name"),onChange:n,placeholder:"John Doe"})}}),(0,r.jsx)(en.A,{variant:"contained",startIcon:(0,r.jsx)(eX.A,{}),sx:{ml:3},type:"submit",disabled:!A,children:p.t("Save")})]}),P.userName&&(0,r.jsx)(eE.A,{sx:{color:"error.main",position:"absolute",bottom:-25},children:P.userName.message})]}):(0,r.jsx)(d.A,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(ee.A,{title:(null==g?void 0:g.createdAt)?"".concat(p.t("Member since")," ").concat(eS(g.createdAt,x.lang,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})):null,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"start",flexDirection:"column"},children:[(0,r.jsx)(d.A,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(Q.A,{variant:"h6",children:g.userName})}),(0,r.jsx)(Q.A,{variant:"caption",children:null==g?void 0:g.userEmail})]})})})})]})})})}),(0,r.jsxs)(d.A,{sx:{display:"flex",justifyContent:"end",width:"100%",mt:2},children:[(0,r.jsx)(en.A,{startIcon:(0,r.jsx)(eD.A,{}),onClick:L,color:"error",sx:{mr:2},children:p.t("Log out")}),(0,r.jsx)(en.A,{color:"secondary",onClick:z,children:p.t("Close")})]})]})]})})})}),C?(0,r.jsxs)(et.A,{open:!0,onClose:()=>E(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2}},children:[(0,r.jsx)(J.A,{children:p.t("Log out")}),(0,r.jsx)(Z.A,{children:(0,r.jsxs)(er.A,{severity:"warning",children:[p.t("Are you sure you want to log out of this computer?"),(0,r.jsx)("br",{}),p.t("You can reconnect this computer to your account at any time.")]})}),(0,r.jsxs)(q.A,{children:[(0,r.jsx)(en.A,{color:"secondary",onClick:()=>E(!1),children:p.t("Cancel")}),(0,r.jsx)(en.A,{variant:"text",color:"error",onClick:()=>M(),startIcon:(0,r.jsx)(eD.A,{}),children:p.t("Log out")})]})]}):null]}):null};var e$=n(81041),e0=n(60999),e1=n(66766),e2=n(61293),e5=n(79701),e3=n(95978),e6=n(46320),e4=n(71015),e7=n(20003),e8=n(75359);function e9(){let e=(0,x._)(["\n0%   { transform: scale(0.2); opacity: 0; }\n100% { transform: scale(1); opacity: 1; }"]);return e9=function(){return e},e}function te(){let e=(0,x._)(["\n0%   { transform: scale(0.1) translateY(10rem); opacity: 0; }\n100% { transform: scale(1) translateY(0); opacity: 1; }"]);return te=function(){return e},e}let tt=(0,p.i7)(e9()),tn=(0,p.i7)(te()),tr=(0,u.Ay)(e6.A)(e=>{let{theme:t}=e;return{position:"absolute",right:"-10rem",bottom:"-10rem",width:"35rem",height:"35rem",zIndex:1,opacity:.1}}),tl=(0,u.Ay)("pre")(e=>{let{theme:t}=e;return{backgroundColor:t.palette.divider,padding:t.spacing(2),marginTop:0,marginBottom:0,marginRight:t.spacing(2),borderRadius:t.shape.borderRadius,fontSize:"0.85rem",lineHeight:"0.85rem",fontFamily:"Inconsolata,monospace"}}),ti=(0,u.Ay)(en.A)(e=>{let{theme:t,index:n=0}=e;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(tn," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}}),to=(0,u.Ay)(e$.Ay)(e=>{let{theme:t,index:n=0}=e;return{transformOrigin:"0% 50%",opacity:0,animation:"".concat(tt," 750ms ease-in-out forwards"),animationDelay:"".concat(100*n,"ms")}}),ts=e=>{var t,n,l,s,c;let{isOpen:u=!1,onOpen:d=()=>{},onClose:x=()=>{}}=e,{i18n:p}=(0,i.B)(),m=H(),[h,f]=(0,a.useState)({});(0,a.useEffect)(()=>{u&&"function"==typeof d&&d()},[u]),(0,a.useEffect)(()=>{let e=setTimeout(async()=>{var e,t;let n=y.A.version,r=await (null==(e=window.sdk)?void 0:e.ipc.main.getProcessVersions()),l=await (null==(t=window.sdk)?void 0:t.ipc.device.getSerialNumber());f({...r,app:n,serialNumber:l})},150);return()=>clearTimeout(e)},[]);let g=()=>{u&&"function"==typeof x&&x()},j=async()=>{var e;o.o.info(p.t("Navigating to licenses..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("https://github.com/oglama/dos/blob/main/NOTICE.md"))},v=async()=>{var e;o.o.info(p.t("Navigating to Terms of Service..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("".concat(y.A.siteUrl,"/terms-of-service/")))},A=async()=>{var e;o.o.info(p.t("Navigating to my computers..."),null,!1),await (null==(e=window.sdk)?void 0:e.ipc.device.openURL("".concat(y.A.siteUrl,"/#/tab:computers")))},b=[{icon:(0,r.jsx)(ep.A,{color:"inherit",fontSize:"large"}),key:"serialNumber",name:p.t("Serial Number"),version:null!=(t=h.serialNumber)?t:null,tooltip:p.t("The computer serial number is an anonymized unique hash that you can use to identify this computer in your online dashboard.")},{icon:(0,r.jsx)(e5.A,{color:"warning",fontSize:"large"}),key:"chrome",name:"Chromium",version:null!=(n=h.chrome)?n:null},{icon:(0,r.jsx)(e1.A,{color:"primary",fontSize:"large"}),key:"electron",name:"Electron.js",version:null!=(l=h.electron)?l:null},{icon:(0,r.jsx)(e7.A,{color:"success",fontSize:"large"}),key:"node",name:"Node.js",version:null!=(s=h.node)?s:null},{icon:(0,r.jsx)(e8.A,{size:35,animate:!0}),key:"dos",name:"Draw on Screen",version:null!=(c=h.app)?c:null}];return u?(0,r.jsxs)(et.A,{open:!0,onClose:g,sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:2,overflow:"hidden"}},children:[(0,r.jsx)(tr,{color:"action",className:"rotate"}),(0,r.jsx)(J.A,{sx:{position:"relative",zIndex:2},children:p.t("About Draw on Screen")}),(0,r.jsx)(Z.A,{sx:{position:"relative",zIndex:2},children:(0,r.jsx)(e0.A,{children:b.map((e,t)=>{var n;return(0,r.jsxs)(to,{index:t,children:[e.icon,(0,r.jsx)(Q.A,{variant:"body2",sx:{mx:2},children:e.name}),e.version?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:null!=(n=e.tooltip)?n:null,placement:"top",children:(0,r.jsx)(tl,{children:e.version})}),(0,r.jsx)(ee.A,{title:p.t("Click to copy"),placement:"top",children:(0,r.jsx)($.A,{onClick:()=>((e,t,n)=>{o.o.info("serialNumber"===e?p.t("Copied computer serial number to clipboard"):p.t("Copied {{name}} version to clipboard",{name:t}),null,!1),m.copy("serialNumber"===e?n:"".concat(t," v").concat(n))})(e.key,e.name,e.version),children:(0,r.jsx)(ed.A,{fontSize:"small"})})}),"serialNumber"===e.key?(0,r.jsx)(ee.A,{title:p.t("Go to my computers"),placement:"top",children:(0,r.jsx)($.A,{onClick:()=>A(),children:(0,r.jsx)(e4.A,{fontSize:"small"})})}):null]}):(0,r.jsx)(e_.A,{sx:{width:"15rem",mt:2},spacing:0})]},"".concat(t,"-").concat(e.key))})})}),(0,r.jsxs)(q.A,{sx:{position:"relative",zIndex:2},children:[(0,r.jsx)(ti,{index:5,onClick:j,startIcon:(0,r.jsx)(e3.A,{}),children:p.t("Licenses")}),(0,r.jsx)(ti,{index:7,onClick:v,startIcon:(0,r.jsx)(e2.A,{}),children:p.t("Terms")}),(0,r.jsx)(en.A,{color:"secondary",onClick:g,children:p.t("Close")})]})]}):null},ta=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{position:"relative",pointerEvents:"auto",zIndex:4}}),tc=()=>{let{onDisplayInfo:e,onDialog:t,dialogSet:n}=(0,c.P)(),[l,i]=(0,a.useState)(null),o=()=>{n(null)};return(0,a.useEffect)(()=>{let n=e(async e=>{let{info:t}=e;return t.passThru&&o()}),r=t(e=>i(e));return()=>{n(),r()}},[]),(0,r.jsxs)(ta,{children:["dialog:about"===l?(0,r.jsx)(ts,{isOpen:!0,onClose:o}):null,"dialog:profile"===l?(0,r.jsx)(eQ,{isOpen:!0,onClose:o}):null,"dialog:subscription"===l?(0,r.jsx)(ey,{isOpen:!0,onClose:o}):null]})};var tu=n(97578),td=n(23820),tx=n(25999);let tp=(0,u.Ay)(d.A)(e=>{var t,n;let{theme:r,color:l}=e;return{backgroundColor:r.palette.background.paper,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,height:"100%",width:"30%",backgroundColor:null!=(n=null==(t=r.palette[l])?void 0:t.main)?n:r.palette.primary.main,animation:"progress 1.5s infinite",willChange:"transform"},"@keyframes progress":{"0%":{transform:"translateX(-100%) scaleX(1)"},"70%":{transform:"translateX(200%) scaleX(1.5)"},"100%":{transform:"translateX(350%) scaleX(1)"}}}}),tm=e=>{let{color:t="primary",variant:n="determinate",value:l=0,sx:i={}}=e;return("object"!=typeof i||null===i)&&(i={}),i={width:"100%",height:"4px",...i},["determinate","buffer"].includes(n)?(0,r.jsx)(tx.A,{sx:i,color:t,variant:n,value:l}):(0,r.jsx)(tp,{sx:i,color:t})},th=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"250px",height:"40px",position:"relative",display:"flex",alignItems:"center",justifyContent:"start",paddingLeft:t.spacing(2),paddingRight:t.spacing(2),borderRadius:0,textTransform:"none",textAlign:"left"}}),tf=(0,u.Ay)(Q.A)(e=>{let{theme:t}=e;return{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"180px"}}),tg=e=>{var t;let{children:n}=e,{onUpdaterInfo:l,getUpdaterInfo:s,onUpdaterStatus:u,getUpdaterStatus:x}=(0,c.P)(),{i18n:p}=(0,i.B)(),[m,h]=(0,a.useState)(null),[f,g]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),[A,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{g(s());let e=l(e=>{let{info:t}=e;return g(t)});h(x());let t=u(e=>{let{status:t}=e;return h(t)});return(async()=>{var e;return y("linux"===await (null==(e=window.sdk)?void 0:e.ipc.device.getOS()))})(),()=>{e(),t()}},[]),(0,a.useEffect)(()=>{var e;null==(e=window.sdk)||e.ipc.updater.check()},[]),(0,a.useEffect)(()=>{!(null==m?void 0:m.working)&&(null==m?void 0:m.error)&&o.o.error("".concat(p.t("Update cancelled")," ").concat(m.error),{duration:5e3})},[m]);let b=async()=>{v(!0)},w=async()=>{var e;await (null==(e=window.sdk)?void 0:e.ipc.updater.install()),v(!1)};return(null==f?void 0:f.version)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(th,{children:[!(null==f?void 0:f.filePath)||(null==m?void 0:m.working)?(0,r.jsx)(d.A,{sx:{ml:2,mr:4},children:(null==m?void 0:m.working)?(0,r.jsx)(td.A,{className:"rotate-360"}):(0,r.jsx)(em.A,{color:"primary"})}):null,(0,r.jsx)(d.A,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"start"},children:!(null==f?void 0:f.filePath)||(null==m?void 0:m.working)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tf,{variant:"caption",color:"inherit",children:(null==m?void 0:m.working)?p.t("Updating to v.{{version}}...",{version:f.version}):p.t("Downloading v.{{version}}...",{version:f.version})}),(0,r.jsx)(tm,{color:"primary",sx:{mt:1},variant:(null==m?void 0:m.working)?"indeterminate":"determinate",value:(null==m?void 0:m.working)?null:null!=(t=null==f?void 0:f.progress)?t:0})]}):(0,r.jsx)(ee.A,{title:p.t("Update to version {{version}}",{version:f.version}),placement:"top",children:(0,r.jsx)(en.A,{fullWidth:!0,size:"small",variant:"outlined",startIcon:(0,r.jsx)(em.A,{}),onClick:()=>b(),children:p.t("Update")})})})]}),j?(0,r.jsxs)(et.A,{open:!0,onClose:()=>!(null==m?void 0:m.working)&&v(!1),sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:1}},children:[(0,r.jsx)(J.A,{children:(0,r.jsx)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(Q.A,{variant:"h3",sx:{ml:4},children:(null==m?void 0:m.working)?p.t("Updating to v.{{version}}...",{version:f.version}):p.t("Install update")})})}),(0,r.jsx)(Z.A,{children:(null==m?void 0:m.working)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(er.A,{severity:"warning",sx:{mb:4},children:p.t("Please do not close this window until the update is complete.")}),(0,r.jsx)(e_.A,{sx:{mb:-4}})]}):(0,r.jsx)(er.A,{severity:"info",icon:(0,r.jsx)(tu.A,{}),children:A?p.t("Updating to version {{version}} requires root privileges. Please enter your root password in the next dialog.",{version:f.version}):p.t("Update to version {{version}} and restart the application.",{version:f.version})})}),(null==m?void 0:m.working)?null:(0,r.jsxs)(q.A,{children:[(0,r.jsx)(en.A,{color:"secondary",variant:"text",onClick:()=>v(!1),children:p.t("Cancel")}),(0,r.jsx)(en.A,{size:"small",className:"pop",startIcon:(0,r.jsx)(em.A,{}),color:"primary",onClick:()=>w(),variant:"contained",children:p.t("Update and restart")})]})]}):null]}):n};var tj=n(68697);function tv(){let{webcamGetConfigId:e,onWebcamConfigId:t}=(0,c.P)(),{getWebcamValue:n}=(0,s.t)(),l=(0,eh.A)(),[i,o]=(0,a.useState)(e());return(0,a.useEffect)(()=>{o(e());let n=t(e=>{let{configId:t}=e;return o(t)});return()=>n()},[]),n(i,"id")?(0,r.jsx)(d.A,{sx:{position:"absolute",top:"-6px",right:"-6px",width:"15px",height:"15px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fontSize:"0.65rem",background:l.palette.background.default,border:"1px solid ".concat(l.palette.divider),zIndex:2},children:i}):null}var tA=n(63684),ty=n(95578),tb=n(51260),tw=n(99833),tS=n(19678),tk=n(81579),tI=n(32750),tC=n(66786),tE=n(31763),tz=n(26304),tO=n(42401),tT=n(76543),tR=n(81793),tP=n(86914),tN=n(8111),tL=n(67601);let tM=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}}),tB=e=>{if(y.A.orientation.LANDSCAPE===e)return tP.A;if(y.A.orientation.PORTRAIT===e)return tR.A;let t="".concat(e).split(":").map(e=>parseInt(e,10)).filter(e=>Number.isInteger(e));return Array.isArray(t)&&2===t.length?t[0]===t[1]?tL.A:t[0]<t[1]?tR.A:tP.A:tN.A};function tF(e){var t;let{settingKey:n,title:l=null,sx:o={}}=e,{settings:c,saveSettings:u}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=c[n])?t:y.A.orientation.LANDSCAPE);("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(c[n]!==p&&u({[n]:p})),50);return()=>clearTimeout(e)},[p]);let h=Object.values(y.A.orientation),f=e=>y.A.orientation.LANDSCAPE===e?x.t("Landscape"):y.A.orientation.PORTRAIT===e?x.t("Portrait"):e;return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e&&h.includes(e)){let t=tB(e);return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(tM,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:f(e)})]})}return(0,r.jsx)(Q.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:h.map(e=>{let t=tB(e);return(0,r.jsx)(eR.A,{value:e,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(tM,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:f(e)})]})},e)})})})}var tD=n(19400),tX=n(15959),tU=n(80722),tK=n(73281),tY=n(91247),t_=n(40577),tW=n(28417),tH=n(61548),tG=n(62592);let tV=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:t.spacing(.5),padding:t.spacing(1)}});function tq(e){var t;let{settingKey:n,title:l=null,sx:o={}}=e,{onDisplayInfo:u,onToolbarVisible:d}=(0,c.P)(),{settings:x,saveSettings:p}=(0,s.t)(),{i18n:m}=(0,i.B)(),[h,f]=(0,a.useState)(null!=(t=x[n])?t:"bottom-right"),[g,j]=(0,a.useState)(null),v=()=>{x[n]!==h&&p({[n]:h})};(0,a.useEffect)(()=>{let e=u(()=>j(null)),t=d(()=>j(null));return()=>{e(),t()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(v,50);return()=>clearTimeout(e)},[h]);let A=[{value:"top-left",Icon:tK.A,label:m.t("Top-left")},{value:"top",Icon:tG.A,label:m.t("Top")},{value:"top-right",Icon:tU.A,label:m.t("Top-right")},{value:"left",Icon:tH.A,label:m.t("Left")},{value:"center",Icon:tY.A,label:m.t("Center")},{value:"right",Icon:t_.A,label:m.t("Right")},{value:"bottom-left",Icon:tX.A,label:m.t("Bottom-left")},{value:"bottom",Icon:tW.A,label:m.t("Bottom")},{value:"bottom-right",Icon:tD.A,label:m.t("Bottom-right")}],y=A.find(e=>e.value===h);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(en.A,{tabIndex:-1,size:"small",variant:"text",color:"inherit",startIcon:y&&(0,r.jsx)(y.Icon,{fontSize:"small"}),onClick:e=>j(e.currentTarget),sx:{ml:2,textTransform:"none",...o},children:(0,r.jsx)(Q.A,{sx:{ml:2,fontSize:"0.8rem"},children:y?y.label:m.t("Select an option")})})}),(0,r.jsx)(eL.A,{anchorEl:g,open:!!g,sx:{mt:-1},onClose:()=>j(null),transformOrigin:{vertical:"bottom",horizontal:"left"},anchorOrigin:{vertical:"top",horizontal:"left"},MenuListProps:{disablePadding:!0},children:(0,r.jsx)(tV,{children:A.map(e=>{let{value:t,Icon:n,label:l}=e;return(0,r.jsx)(ee.A,{title:l,placement:"top",children:(0,r.jsx)(en.A,{tabIndex:-1,onClick:()=>{f(t),j(null)},sx:{"&.MuiButton-root":{p:1},position:"relative",minWidth:"30px",flexGrow:0,m:1},variant:t===h?"contained":"text",color:t===h?"primary":"inherit",children:(0,r.jsx)(n,{fontSize:"small"})})},t)})})})]})}function tZ(e){var t;let{settingKey:n,title:l=null,sx:o={}}=e,{onWebcamList:u,webcamGetList:x}=(0,c.P)(),{settings:p,saveSettings:m}=(0,s.t)(),{i18n:h}=(0,i.B)(),[f,g]=(0,a.useState)(x()),[j,v]=(0,a.useState)(null!=(t=p[n])?t:"");return("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{g(x());let e=u(async e=>{let{list:t}=e;g(t)});return()=>{e()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(p[n]!==j&&m({[n]:j})),50);return()=>clearTimeout(e)},[j]),f.length?(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsxs)(tT.A,{displayEmpty:!0,renderValue:e=>{if("string"==typeof e){let t=f.find(t=>t.deviceId===e);if(t)return(0,r.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,r.jsx)(tj.A,{fontSize:"small",sx:{mr:3,ml:-2}}),(0,r.jsx)(ee.A,{title:t.label,placement:"bottom",children:(0,r.jsx)(Q.A,{variant:"caption",color:"inherit",sx:{display:"inline-block",maxWidth:"250px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.label})})]})}return(0,r.jsx)(Q.A,{variant:"caption",sx:{pl:2},children:h.t("Select a webcam")})},value:j,sx:{"&.MuiInput-root:before":{display:"none"},px:0,borderRadius:1,height:"32px",...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>v(e.target.value),children:[f.map(e=>{let{deviceId:t,label:n}=e;return(0,r.jsxs)(eR.A,{value:t,children:[(0,r.jsx)(tj.A,{fontSize:"small",sx:{mr:2}}),(0,r.jsx)(Q.A,{variant:"caption",color:"inherit",children:n})]},t)}),(0,r.jsxs)(eR.A,{value:"",children:[(0,r.jsx)(tI.A,{fontSize:"small",sx:{mr:2}}),(0,r.jsx)(Q.A,{variant:"caption",color:"inherit",children:h.t("No webcam")})]})]})}):(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(tI.A,{fontSize:"small",sx:{mr:2}}),(0,r.jsx)(Q.A,{variant:"caption",children:h.t("No webcam available")})]})}var tJ=n(89879);function tQ(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[m,h]=(0,a.useState)(null!=(t=u[n])?t:20);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(m)&&u[n]!==m&&x({[n]:m})),50);return()=>clearTimeout(e)},[m]);let f={xxs:{value:20},xs:{value:30},sm:{value:40},md:{value:50},lg:{value:60},xl:{value:70},"2xl":{value:80},"3xl":{value:90},"4xl":{value:100}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{value:e}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(tJ.A,{fontSize:"small"}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"H: ".concat(e,"%")})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:m,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>h(e.target.value),children:g.map(e=>{let{value:t}=e;return(0,r.jsx)(eR.A,{value:t,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(tJ.A,{fontSize:"small"}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(t,"%")})]})},t)})})})}var t$=n(33907),t0=n(31821);let t1=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function t2(e){var t;let{settingKey:n,horizontal:l=!1,title:o=null,options:c=null,sx:u={},disabled:x=!1}=e,{settings:p,saveSettings:m}=(0,s.t)(),{i18n:h}=(0,i.B)(),[f,g]=(0,a.useState)(null!=(t=p[n])?t:20);("object"!=typeof u||null===u)&&(u={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(f)&&p[n]!==f&&m({[n]:f})),50);return()=>clearTimeout(e)},[f]);let j={xs:{value:0},sm:{value:5},md:{value:10},lg:{value:15},xl:{value:20}},v="object"==typeof c&&null!==c&&Object.keys(c).length?Object.keys(c).map(e=>{let t=null;return"object"==typeof j[e]&&((t={...j[e]}).value=c[e]),t}).filter(e=>null!==e):Object.values(j);return(0,r.jsx)(ee.A,{title:o,placement:"bottom",children:(0,r.jsx)(d.A,{children:(0,r.jsx)(tT.A,{disabled:x,displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(v).find(t=>t.value===e);if("object"==typeof t){let{value:e}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(t1,{children:l?(0,r.jsx)(t$.A,{fontSize:"small"}):(0,r.jsx)(t0.A,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(l?"MX":"MY",": ").concat(e,"%")})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:h.t("Select an option")})},value:f,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...u},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>g(e.target.value),children:v.map(e=>{let{value:t}=e;return(0,r.jsx)(eR.A,{value:t,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[l?(0,r.jsx)(t$.A,{fontSize:"small"}):(0,r.jsx)(t0.A,{fontSize:"small"}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:"".concat(t,"%")})]})},t)})})})})}var t5=n(78376),t3=n(82175);let t6=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function t4(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[m,h]=(0,a.useState)(null!=(t=u[n])?t:20);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(m)&&u[n]!==m&&x({[n]:m})),50);return()=>clearTimeout(e)},[m]);let f={none:{value:0},xs:{value:5},sm:{value:10},md:{value:20},lg:{value:40},xl:{value:80}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t)return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(t6,{children:t.value>0?(0,r.jsx)(t5.A,{}):(0,r.jsx)(t3.A,{})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:t.value>0?"\xd8 ".concat(t.value,"px"):p.t("Sharp corners")})]})}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:m,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>h(e.target.value),children:g.map(e=>(0,r.jsx)(eR.A,{value:e.value,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(t6,{children:e.value>0?(0,r.jsx)(t5.A,{}):(0,r.jsx)(t3.A,{})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:e.value>0?"\xd8 ".concat(e.value,"px"):p.t("Sharp corners")})]})},e.value))})})}var t7=n(34785);function t8(){let e=(0,x._)(["\n0%   { transform: scale(0.1) translateY(10rem); opacity: 0; width: 0px; margin-left: 0px; }\n100% { transform: scale(1) translateY(0); opacity: 1; width: 30px; margin-left: 8px; }"]);return t8=function(){return e},e}function t9(){let e=(0,x._)(["\n0%   { transform: scale(0.1) translateY(2rem); opacity: 0; width: 0px; margin-left: 0px; }\n100% { transform: scale(1) translateY(0); opacity: 1; width: 60px; margin-left: 8px; }"]);return t9=function(){return e},e}let ne=(0,p.i7)(t8()),nt=(0,p.i7)(t9());function nn(e){let{title:t,Icon:n,children:l,index:i=0,chip:o=null,label:s=null,Bubble:u=null,double:x=!1,startIcon:p=null,onClick:m=()=>{},disabled:h=!1,useCursor:f=!1,overflowVisible:g=!1}=e,{onDisplayInfo:j,onToolbarVisible:v,onWebcamList:A}=(0,c.P)(),y=(0,eh.A)(),[b,w]=(0,a.useState)(null),[S,k]=(0,a.useState)(!1);n||(n=t7.A),(0,a.useEffect)(()=>{let e=A(()=>w(null)),t=j(e=>{let{info:t}=e;w(null),k(t.passThru)}),n=v(()=>w(null));return()=>{e(),t(),n()}},[]);let I=e=>{w(l?e.currentTarget:null),"function"==typeof m&&m(e)},C=!S&&(t||o)?(0,r.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[o?(0,r.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:o}):null,t?(0,r.jsx)(d.A,{sx:{...o?{mt:1}:{}},children:t}):null]}):null;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.A,{title:C,placement:"bottom",children:(0,r.jsx)(d.A,{children:(0,r.jsxs)(d.A,{"data-use-cursor":f?"true":null,sx:{animation:"".concat(x?nt:ne," ").concat(x?350:750,"ms ease-in-out forwards"),animationDelay:"".concat(i*(x?50:100),"ms"),justifyContent:"center",transformOrigin:"50%",flexDirection:"row",position:"relative",display:"flex"},style:{animationDirection:S?"reverse":"normal",marginLeft:S?"8px":0,opacity:+!!S,width:S?x?60:30:0},children:[null!==u?(0,r.jsx)(u,{}):null,l?(0,r.jsx)(en.A,{tabIndex:-1,"aria-label":"button-".concat(i),startIcon:p,onClick:I,variant:b?"contained":"outlined",color:b?"primary":"inherit",disabled:h,size:"small",sx:{borderColor:y.palette.divider,"&.MuiButton-root":{p:1},position:"relative",minWidth:"30px",flexGrow:0,zIndex:1},children:(0,r.jsx)(n,{fontSize:"small",color:"inherit"})}):(0,r.jsx)($.A,{tabIndex:-1,"aria-label":"button-".concat(i),onClick:l?e=>w(e.currentTarget):I,disabled:h,color:"inherit",size:"small",sx:{"&:hover":{transform:"scale(1.1)"},transition:"transform 100ms linear",position:"relative",zIndex:1},children:(0,r.jsx)(n,{fontSize:"small",color:"inherit"})})]},"".concat(S))})}),l?(0,r.jsx)(eL.A,{transformOrigin:{vertical:"bottom",horizontal:"left"},anchorOrigin:{vertical:"top",horizontal:"left"},onClose:()=>w(null),open:!!b,anchorEl:b,sx:{mt:x?-3:-4,...g?{"& .MuiPaper-root":{overflow:"visible",maxHeight:"none"}}:{}},children:(0,r.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",px:3,py:1},children:[null!==s?(0,r.jsx)(d.A,{sx:{mb:2},children:(0,r.jsx)(Q.A,{variant:"caption",sx:{textTransform:"uppercase"},children:s})}):null,(0,r.jsx)(d.A,{sx:{justifyContent:"start",position:"relative",alignItems:"center",display:"flex"},children:l})]})}):null]})}let nr=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{border:"1px solid ".concat("dark"===t.palette.mode?t.palette.text.disabled:t.palette.divider),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),marginRight:t.spacing(2),marginTop:t.spacing(1),borderRadius:t.spacing(2),paddingBottom:t.spacing(1),position:"relative","&:before":{content:'""',display:"block",position:"absolute",top:"-2px",left:"1px",width:"calc(100% - 2px)",height:"90%",border:"2px solid ".concat("dark"===t.palette.mode?t.palette.text.disabled:t.palette.divider),borderRadius:t.spacing(2)}}});function nl(e){let{final:t=!1,children:n}=e;return(0,r.jsx)(nr,{style:{...t?{marginRight:0}:{}},children:n})}function ni(e){var t,n,l;let{configId:o,sx:u={}}=e,{webcamGetList:x,onWebcamList:p,webcamSetConfigId:m,onWebcamConfigId:h,webcamGetConfigId:f}=(0,c.P)(),{getWebcamKey:g,getWebcamValue:j}=(0,s.t)(),{i18n:v}=(0,i.B)(),[A,y]=(0,a.useState)(x()),[b,w]=(0,a.useState)(f()),S=j(o,"placement"),k=j(o,"id");("object"!=typeof u||null===u)&&(u={}),(0,a.useEffect)(()=>{y(x());let e=p(async e=>{let{list:t}=e;y(t)});w(f());let t=h(e=>{let{configId:t}=e;return w(t)});return()=>{e(),t()}},[]);let I=null!=(t=({1:tC.A,2:tE.A,3:tz.A,4:tO.A})[o])?t:tC.A,C=null!=(n=({1:tb.A,2:tw.A,3:tS.A,4:tk.A})[o])?n:tb.A,E=(0,r.jsx)(nl,{final:!0,children:(0,r.jsx)(C,{fontSize:"small"})}),z=k?b===o?(0,r.jsx)(tA.A,{sx:{ml:1}}):(0,r.jsx)(ty.A,{sx:{ml:1}}):(0,r.jsx)(tI.A,{sx:{ml:1}}),O=null!=(l=({1:v.t("Toggle 1st configuration"),2:v.t("Toggle 2nd configuration"),3:v.t("Toggle 3rd configuration"),4:v.t("Toggle 4th configuration")})[o])?l:v.t("Toggle configuration"),T=-1!==S.indexOf("left")||-1!==S.indexOf("right"),R=-1!==S.indexOf("top")||-1!==S.indexOf("bottom");return(0,r.jsx)(nn,{onClick:()=>m(o),title:"".concat(O," (F").concat(o,")"),startIcon:z,index:o-1,chip:E,Icon:I,double:!0,children:(0,r.jsxs)(d.A,{display:"flex",flexDirection:"column",children:[(0,r.jsx)(d.A,{sx:{mb:3},children:(0,r.jsx)(Q.A,{variant:"caption",sx:{textTransform:"uppercase"},children:v.t("Webcam configuration #{{configId}}",{configId:o})})}),(0,r.jsx)(tZ,{settingKey:g(o,"id")}),A.length&&k?(0,r.jsxs)(d.A,{display:"flex",sx:{mt:3},children:[(0,r.jsx)(tq,{sx:{ml:0},settingKey:g(o,"placement"),title:v.t("Placement")}),(0,r.jsx)(tQ,{settingKey:g(o,"height"),title:v.t("Height")}),(0,r.jsx)(tF,{settingKey:g(o,"orientation"),title:v.t("Aspect ratio")})]}):null,A.length&&k?(0,r.jsxs)(d.A,{display:"flex",sx:{mt:3},children:[(0,r.jsx)(t2,{sx:{ml:0},disabled:!T,settingKey:g(o,"marginX"),title:v.t("Horizontal margins"),horizontal:!0}),(0,r.jsx)(t2,{disabled:!R,settingKey:g(o,"marginY"),title:v.t("Vertical margins")}),(0,r.jsx)(t4,{settingKey:g(o,"radius"),title:v.t("Corner radius")})]}):null]})})}function no(){let{i18n:e}=(0,i.B)();return(0,r.jsx)(nn,{index:0,overflowVisible:!0,title:"".concat(e.t("Webcam configurations")),label:e.t("Webcam configurations"),Icon:tj.A,Bubble:tv,children:(0,r.jsx)(d.A,{display:"flex",sx:{ml:-3,mt:1},children:[1,2,3,4].map(e=>(0,r.jsx)(ni,{configId:e,sx:{...1===e?{ml:0}:{}}},e))})})}var ns=n(28137),na=n(99804),nc=n(89612),nu=n(99985);let nd=(0,u.Ay)(en.A)(e=>{let{theme:t}=e;return{zIndex:1,position:"relative",minWidth:"fit-content",flexGrow:0,border:"1px solid ".concat("light"===t.palette.mode?"#ccc":"#333"),backgroundColor:"#ffffff",backgroundImage:"linear-gradient(45deg, #cccccc 25%, transparent 25%), linear-gradient(-45deg, #cccccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #cccccc 75%), linear-gradient(-45deg, transparent 75%, #cccccc 75%)",backgroundSize:"10px 10px",backgroundPosition:"0 0, 0 5px, 5px -5px, -5px 0px","&.MuiButton-root":{padding:0},"&>div":{width:"24px",height:"24px",borderRadius:"4px"},"&>div>div":{position:"absolute",top:"-6px",right:"-6px",width:"15px",height:"15px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",fontSize:"0.65rem",background:t.palette.background.paper,border:"1px solid ".concat(t.palette.divider),zIndex:2}}});function nx(e){var t;let{settingKey:n,title:l=null,letter:i=null,sx:o={}}=e,{onDisplayInfo:u,onToolbarVisible:x}=(0,c.P)(),{settings:p,saveSettings:m}=(0,s.t)(),h=(0,eh.A)(),[f,g]=(0,a.useState)(null!=(t=p[n])?t:"#fff"),[j,v]=(0,a.useState)(null);("object"!=typeof o||null===o)&&(o={});let A=()=>{"string"==typeof n&&"string"==typeof f&&[4,7,9].includes(f.length)&&f.match(/^#[\da-f]+$/i)&&p[n]!==f.toLowerCase()&&m({[n]:f.toLowerCase()})};return(0,a.useEffect)(()=>{let e=u(()=>v(null)),t=x(()=>v(null));return()=>{e(),t()}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>A(),250);return()=>clearTimeout(e)},[f]),(0,r.jsxs)(d.A,{sx:{position:"relative"},children:[(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(nd,{sx:{...o},color:"inherit",onClick:e=>v(e.currentTarget),variant:"outlined",children:(0,r.jsx)("div",{style:{backgroundColor:f},children:"string"==typeof i&&i.length?(0,r.jsx)("div",{children:i[0]}):null})})}),(0,r.jsx)(eL.A,{anchorEl:j,open:!!j,onClose:()=>void(v(null),A()),anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:{mt:-1},children:(0,r.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",px:5,py:3},children:[l?(0,r.jsx)(Q.A,{variant:"caption",sx:{textTransform:"uppercase",mb:3},children:l}):null,(0,r.jsx)(nu.dp,{onChange:g,color:f}),(0,r.jsx)(nu.HC,{color:f,onChange:g,alpha:!0,style:{background:h.palette.background.default,color:h.palette.text.primary,border:"1px solid ".concat(h.palette.divider),minWidth:"50px",width:"200px",padding:"10px",fontSize:"1rem",marginTop:"15px",borderRadius:"10px"}})]})})]})}function np(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Space ":"Space+").concat(t.t("Swipe"));return(0,r.jsxs)(nn,{index:5,title:"".concat(t.t("Spotlight")," (").concat(n,")"),label:t.t("Spotlight settings"),Icon:na.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nl,{children:(0,r.jsx)(ns.A,{})}),(0,r.jsx)(nc.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nx,{settingKey:"spotlightColor",title:t.t("Spotlight color")}),(0,r.jsx)(t4,{settingKey:"spotlightRadius",title:t.t("Corner radius")})]})}var nm=n(70715);let nh=Object.keys(y.A.cursor.sizes).map(e=>parseInt(e,10));function nf(){let{settings:e,saveSettings:t}=(0,s.t)(),{i18n:n}=(0,i.B)();return(0,r.jsx)(nn,{index:0,useCursor:!0,title:n.t("Cursor size"),Icon:nm.A,onClick:()=>{let n=nh.indexOf(e.cursor);++n>=nh.length&&(n=0),t({cursor:nh[n]})}})}var ng=n(13125),nj=n(1954);let nv=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nA(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[m,h]=(0,a.useState)(null!=(t=u[n])?t:"");("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(m)&&u[n]!==m&&x({[n]:m})),50);return()=>clearTimeout(e)},[m]);let f={xs:{icon:(0,r.jsx)(ec.A,{fontSize:"small"}),value:2,label:p.t("Extra thin")},sm:{icon:(0,r.jsx)(ec.A,{fontSize:"medium"}),value:4,label:p.t("Thin")},md:{icon:(0,r.jsx)(ec.A,{fontSize:"large"}),value:8,label:p.t("Midweight")},lg:{icon:(0,r.jsx)(tY.A,{fontSize:"small"}),value:12,label:p.t("Thick")},xl:{icon:(0,r.jsx)(tY.A,{fontSize:"medium"}),value:16,label:p.t("Extra thick")},xxl:{icon:(0,r.jsx)(tY.A,{fontSize:"large"}),value:24,label:p.t("Chunky")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[e?(0,r.jsx)(nv,{children:e}):null,(0,r.jsx)(Q.A,{sx:{ml:2*!!e},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:m,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>h(e.target.value),children:g.map(e=>{let{icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[t?(0,r.jsx)(nv,{children:t}):null,(0,r.jsx)(Q.A,{sx:{ml:2*!!t},variant:"body2",color:"inherit",children:l})]})},n)})})})}var ny=n(54098),nb=n(19563),nw=n(25261);let nS=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nk(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[m,h]=(0,a.useState)(null!=(t=u[n])?t:0);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isFinite(m)&&u[n]!==m&&x({[n]:m})),50);return()=>clearTimeout(e)},[m]);let f={no:{Icon:ny.A,value:0,label:p.t("No thinning")},sm:{Icon:nw.A,value:.3,label:p.t("Slight thinning")},lg:{Icon:nb.A,value:.6,label:p.t("Heavy thinning")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nS,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:m,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>h(e.target.value),children:g.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nS,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}function nI(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Esc ":"Esc+").concat(t.t("Swipe"));return(0,r.jsxs)(nn,{index:6,title:"".concat(t.t("Eraser")," (").concat(n,")"),label:t.t("Eraser settings"),Icon:ng.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nl,{children:(0,r.jsx)(nj.A,{fontSize:"small"})}),(0,r.jsx)(nc.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nA,{settingKey:"eraserThickness",title:t.t("Eraser thickness")}),(0,r.jsx)(nk,{settingKey:"eraserThinning",title:t.t("Eraser thinning")})]})}var nC=n(49404),nE=n(1879);function nz(){let{settings:e,saveSettings:t}=(0,s.t)(),{i18n:n}=(0,i.B)();return(0,r.jsx)(nn,{index:1,title:n.t("Sound"),Icon:e.sound?nE.A:nC.A,onClick:()=>{t({sound:!e.sound}),o.o.info(e.sound?n.t("Sound off"):n.t("Sound on"))}})}var nO=n(4567),nT=n(40756),nR=n(56086),nP=n(692),nN=n(78813);let nL=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function nM(e){var t;let{settingKey:n,title:l=null,options:o=null,sx:c={}}=e,{settings:u,saveSettings:x}=(0,s.t)(),{i18n:p}=(0,i.B)(),[m,h]=(0,a.useState)(null!=(t=u[n])?t:80);("object"!=typeof c||null===c)&&(c={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void("string"==typeof n&&Number.isInteger(m)&&u[n]!==m&&x({[n]:m})),50);return()=>clearTimeout(e)},[m]);let f={slow:{Icon:nP.A,value:160,label:p.t("Slow")},normal:{Icon:nR.A,value:80,label:p.t("Normal speed")},fast:{Icon:nN.A,value:40,label:p.t("Fast")}},g="object"==typeof o&&null!==o&&Object.keys(o).length?Object.keys(o).map(e=>{let t=null;return"object"==typeof f[e]&&((t={...f[e]}).value=o[e]),t}).filter(e=>null!==e):Object.values(f);return(0,r.jsx)(ee.A,{title:l,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(g).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nL,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:p.t("Select an option")})},value:m,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...c},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>h(e.target.value),children:g.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(nL,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}function nB(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Shift ":"Shift+").concat(t.t("Swipe"));return(0,r.jsxs)(nn,{index:2,title:"".concat(t.t("Laser")," (").concat(n,")"),label:t.t("Laser settings"),Icon:nT.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nl,{children:(0,r.jsx)(nO.A,{fontSize:"small"})}),(0,r.jsx)(nc.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nx,{settingKey:"laserColor",title:t.t("Laser color")}),(0,r.jsx)(nA,{settingKey:"laserThickness",title:t.t("Laser thickness")}),(0,r.jsx)(nk,{settingKey:"laserThinning",title:t.t("Laser thinning")}),(0,r.jsx)(nM,{settingKey:"laserDelay",title:t.t("Laser fading speed")})]})}var nF=n(34318),nD=n(92828),nX=n(54582),nU=n(54895);function nK(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n={ctrlComma:"(".concat("macos"===e().os?"⌘ ":"Ctrl+",",)"),ctrlQ:"(".concat("macos"===e().os?"⌘ ":"Ctrl+","Q)")};return(0,r.jsx)(nn,{index:0,title:t.t("Toggle toolbar {{ctrlComma}}",n),Icon:nD.A,onClick:()=>{var e;null==(e=window.sdk)||e.ipc.main.setToolbar(!1),o.o.info(t.t("Press {{ctrlComma}} to toggle toolbar, {{ctrlQ}} to quit",n),{duration:4e3})},chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nl,{children:"macos"===e().os?(0,r.jsx)(nF.A,{fontSize:"small"}):(0,r.jsx)(nX.A,{fontSize:"small"})}),(0,r.jsx)(nl,{final:!0,children:(0,r.jsx)(nU.A,{fontSize:"small"})})]})})}var nY=n(23975),n_=n(63150);function nW(){let{getDeviceInfo:e,historyUndo:t,onHistory:n}=(0,c.P)(),{i18n:l}=(0,i.B)(),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=n(e=>{let{index:t,total:n}=e;s(n<=0||t<0)});return()=>e()},[]),(0,r.jsx)(nn,{index:0,disabled:o,title:"".concat(l.t("Undo")," (").concat("macos"===e().os?"⌘ ":"Ctrl+","Z)"),Icon:nY.A,onClick:t,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nl,{children:"macos"===e().os?(0,r.jsx)(nF.A,{fontSize:"small"}):(0,r.jsx)(nX.A,{fontSize:"small"})}),(0,r.jsx)(nl,{final:!0,children:(0,r.jsx)(n_.A,{fontSize:"small"})})]})})}var nH=n(70673);function nG(){let{getDeviceInfo:e,historyRedo:t,onHistory:n}=(0,c.P)(),{i18n:l}=(0,i.B)(),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=n(e=>{let{index:t,total:n}=e;s(n<=0||t>=n-1)});return()=>e()},[]),(0,r.jsx)(nn,{index:1,disabled:o,title:"".concat(l.t("Redo")," (").concat("macos"===e().os?"Shift ⌘ ":"Ctrl+Shift+","Z)"),Icon:nH.A,onClick:t,chip:(0,r.jsxs)(r.Fragment,{children:["macos"===e().os?null:(0,r.jsx)(nl,{children:(0,r.jsx)(nX.A,{fontSize:"small"})}),(0,r.jsx)(nl,{children:(0,r.jsx)(nO.A,{fontSize:"small"})}),"macos"===e().os?(0,r.jsx)(nl,{children:(0,r.jsx)(nF.A,{fontSize:"small"})}):null,(0,r.jsx)(nl,{final:!0,children:(0,r.jsx)(n_.A,{fontSize:"small"})})]})})}var nV=n(24360),nq=n(1810);function nZ(e){var t;let{title:n=null,sx:l={}}=e,{settings:o,saveSettings:c}=(0,s.t)(),{i18n:u}=(0,i.B)(),[d,x]=(0,a.useState)(null!=(t=o.textFont)?t:"Rancho");("object"!=typeof l||null===l)&&(l={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(o.textFont!==d&&c({textFont:d})),50);return()=>clearTimeout(e)},[d]);let p=["Inconsolata","Inter","Yaldevi","Libre Baskerville","Comic Relief","Pacifico","Dancing Script","Satisfy","Caveat","Rancho","Mansalva","Henny Penny","Permanent Marker"];return(0,r.jsx)(ee.A,{title:n,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>"string"==typeof e&&p.includes(e)?(0,r.jsx)(Q.A,{sx:{fontFamily:e,pl:2},variant:"body1",color:"inherit",children:e}):(0,r.jsx)(Q.A,{variant:"caption",children:u.t("Select an option")}),value:d,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...l},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>x(e.target.value),children:p.map(e=>(0,r.jsx)(eR.A,{value:e,children:(0,r.jsx)(Q.A,{sx:{fontFamily:e},variant:"body1",color:"inherit",children:e})},e))})})}var nJ=n(80037),nQ=n(29437);let n$=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function n0(e){var t;let{title:n=null,sx:l={}}=e,{settings:o,saveSettings:c}=(0,s.t)(),{i18n:u}=(0,i.B)(),[x,p]=(0,a.useState)(null!=(t=o.textAlignment)?t:"center");("object"!=typeof l||null===l)&&(l={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(o.textAlignment!==x&&c({textAlignment:x})),50);return()=>clearTimeout(e)},[x]);let m=[{Icon:nQ.A,value:"left",label:u.t("Left")},{Icon:nJ.A,value:"center",label:u.t("Center")},{Icon:nJ.A,value:"right",label:u.t("Right")}];return(0,r.jsx)(ee.A,{title:n,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=m.find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(n$,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:u.t("Select an option")})},value:x,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...l},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>p(e.target.value),children:m.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(n$,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}var n1=n(24996),n2=n(38261),n5=n(58086),n3=n(74088),n6=n(83931);let n4=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"}});function n7(e){var t;let{title:n=null,options:l=null,sx:o={}}=e,{settings:c,saveSettings:u}=(0,s.t)(),{i18n:x}=(0,i.B)(),[p,m]=(0,a.useState)(null!=(t=c.textSize)?t:54);("object"!=typeof o||null===o)&&(o={}),(0,a.useEffect)(()=>{let e=setTimeout(()=>void(Number.isInteger(p)&&c.textSize!==p&&u({textSize:p})),50);return()=>clearTimeout(e)},[p]);let h={xs:{Icon:n1.A,value:20,label:x.t("Tiny")},sm:{Icon:n5.A,value:36,label:x.t("Small")},md:{Icon:n3.A,value:54,label:x.t("Midsize")},lg:{Icon:n6.A,value:90,label:x.t("Large")},xl:{Icon:n2.A,value:144,label:x.t("Huge")}},f="object"==typeof l&&null!==l&&Object.keys(l).length?Object.keys(l).map(e=>{let t=null;return"object"==typeof h[e]&&((t={...h[e]}).value=l[e]),t}).filter(e=>null!==e):Object.values(h);return(0,r.jsx)(ee.A,{title:n,placement:"bottom",children:(0,r.jsx)(tT.A,{displayEmpty:!0,variant:"standard",renderValue:e=>{if(void 0!==e){let t=Object.values(f).find(t=>t.value===e);if("object"==typeof t){let{Icon:e,label:n}=t;return(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(n4,{children:(0,r.jsx)(e,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:n})]})}}return(0,r.jsx)(Q.A,{variant:"caption",children:x.t("Select an option")})},value:p,sx:{"&.MuiInput-root:before":{display:"none"},borderRadius:1,height:"32px",ml:2,...o},MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},onChange:e=>m(e.target.value),children:f.map(e=>{let{Icon:t,value:n,label:l}=e;return(0,r.jsx)(eR.A,{value:n,children:(0,r.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(n4,{children:(0,r.jsx)(t,{fontSize:"small"})}),(0,r.jsx)(Q.A,{sx:{ml:2},variant:"body2",color:"inherit",children:l})]})},n)})})})}function n8(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"⌘ ":"Ctrl+").concat(t.t("Double-tap"));return(0,r.jsxs)(nn,{index:0,title:(0,r.jsxs)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},children:["".concat(t.t("Text")," (").concat(t.t("Double-tap"),")"),(0,r.jsx)("br",{}),"".concat(t.t("Sequence")," (").concat(n,")")]}),label:t.t("Text settings"),Icon:nq.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q.A,{color:"inherit",children:"2x"}),(0,r.jsx)(nV.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nx,{settingKey:"textColor",title:t.t("Text color")}),(0,r.jsx)(nx,{settingKey:"textStrokeColor",title:t.t("Stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(nZ,{title:t.t("Font family")}),(0,r.jsx)(n7,{title:t.t("Text size")}),(0,r.jsx)(n0,{title:t.t("Justification")})]})}var n9=n(21865);function re(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"⌘ ":"Ctrl+").concat(t.t("Swipe"));return(0,r.jsxs)(nn,{index:3,title:"".concat(t.t("Line")," (").concat(n,")"),label:t.t("Line settings"),Icon:n9.A,chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nl,{children:"macos"===e().os?(0,r.jsx)(nF.A,{fontSize:"small"}):(0,r.jsx)(nX.A,{fontSize:"small"})}),(0,r.jsx)(nc.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nx,{settingKey:"lineColor",title:t.t("Line color")}),(0,r.jsx)(nx,{settingKey:"lineStrokeColor",title:t.t("Line stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(nA,{settingKey:"lineThickness",title:t.t("Line thickness")})]})}var rt=n(7579),rn=n(72295),rr=n(71608),rl=n(23842),ri=n(82491),ro=n(72066);function rs(){let{settings:e,saveSettings:t}=(0,s.t)(),{onDisplayInfo:n,dialogSet:l,onToolbarVisible:o}=(0,c.P)(),{i18n:u}=(0,i.B)(),[d,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=n(()=>x(null)),t=o(()=>x(null));return()=>{e(),t()}},[]);let p=[{key:"dialog:subscription",label:u.t("My subscription"),Icon:ei.A},{key:"dialog:profile",label:u.t("My profile"),Icon:rn.A},{key:"dialog:about",label:u.t("About"),Icon:rr.A},{key:null},{key:"mode",label:"dark"===e.mode?u.t("Dark mode"):u.t("Light mode"),Icon:"dark"===e.mode?ro.A:ri.A}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nn,{index:2,title:u.t("More"),Icon:rl.A,onClick:e=>{x(e.currentTarget)}}),(0,r.jsx)(eL.A,{transformOrigin:{vertical:"bottom",horizontal:"left"},anchorOrigin:{vertical:"top",horizontal:"left"},onClose:()=>x(null),open:!!d,anchorEl:d,sx:{mt:-4},children:p.map((n,i)=>{let{key:o,label:s,Icon:a}=n;return"string"==typeof o&&"string"==typeof s?(0,r.jsxs)(eR.A,{sx:{alignItems:"center"},onClick:()=>{0===o.indexOf("dialog:")?l(o):"mode"===o&&t({mode:"dark"===e.mode?"light":"dark"}),x(null)},children:[a?(0,r.jsx)(a,{fontSize:"small",sx:{mr:3}}):null,(0,r.jsx)(Q.A,{variant:"body2",sx:{color:"inherit"},children:s})]},o):(0,r.jsx)(rt.A,{},i)})})]})}var ra=n(81451);function rc(){let{i18n:e}=(0,i.B)(),t=e.t("Swipe");return(0,r.jsxs)(nn,{index:1,title:"".concat(e.t("Pen")," (").concat(t,")"),label:e.t("Pen settings"),Icon:ra.A,chip:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(nc.A,{fontSize:"small"})}),children:[(0,r.jsx)(nx,{settingKey:"penColor",title:e.t("Pen color")}),(0,r.jsx)(nx,{settingKey:"penStrokeColor",title:e.t("Pen stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(nA,{settingKey:"penThickness",title:e.t("Pen thickness")}),(0,r.jsx)(nk,{settingKey:"penThinning",title:e.t("Pen thinning")})]})}var ru=n(13754),rd=n(25596);function rx(){let{getDeviceInfo:e,historyClear:t}=(0,c.P)(),{i18n:n}=(0,i.B)();return(0,r.jsx)(nn,{index:2,title:"".concat(n.t("New")," (").concat("macos"===e().os?"⌘ ":"Ctrl+","N)"),Icon:rd.A,onClick:()=>t(),chip:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nl,{children:"macos"===e().os?(0,r.jsx)(nF.A,{fontSize:"small"}):(0,r.jsx)(nX.A,{fontSize:"small"})}),(0,r.jsx)(nl,{final:!0,children:(0,r.jsx)(ru.A,{fontSize:"small"})})]})})}var rp=n(25452);function rm(){let{getDeviceInfo:e}=(0,c.P)(),{i18n:t}=(0,i.B)(),n="".concat("macos"===e().os?"Shift ⌘ ":"Ctrl+Shift+").concat(t.t("Swipe"));return(0,r.jsxs)(nn,{index:4,title:"".concat(t.t("Box")," (").concat(n,")"),label:t.t("Box settings"),Icon:rp.A,chip:(0,r.jsxs)(r.Fragment,{children:["macos"===e().os?null:(0,r.jsx)(nl,{children:(0,r.jsx)(nX.A,{fontSize:"small"})}),(0,r.jsx)(nl,{children:(0,r.jsx)(nO.A,{fontSize:"small"})}),"macos"===e().os?(0,r.jsx)(nl,{children:(0,r.jsx)(nF.A,{fontSize:"small"})}):null,(0,r.jsx)(nc.A,{fontSize:"small"})]}),children:[(0,r.jsx)(nx,{settingKey:"boxColor",title:t.t("Border color")}),(0,r.jsx)(nx,{settingKey:"boxStrokeColor",title:t.t("Stroke color"),letter:"S",sx:{ml:2}}),(0,r.jsx)(nx,{settingKey:"boxFillColor",title:t.t("Fill color"),letter:"F",sx:{ml:2}}),(0,r.jsx)(nA,{settingKey:"boxThickness",title:t.t("Border thickness")}),(0,r.jsx)(t4,{settingKey:"boxRadius",title:t.t("Corner radius"),options:{xs:5,sm:10,md:20,lg:40,xl:80}})]})}function rh(){let e=(0,x._)(["\n0%   { opacity: 0; margin-left: 0px; }\n100% { opacity: 1; margin-left: 8px; }"]);return rh=function(){return e},e}let rf=(0,p.i7)(rh());function rg(){let{onDisplayInfo:e}=(0,c.P)(),[t,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=e(async e=>{let{info:t}=e;n(t.passThru)});return()=>{t()}},[]);let l=!t;return(0,r.jsx)(rt.A,{orientation:"vertical",sx:{animation:"".concat(rf," 750ms ease-in-out forwards"),position:"relative",height:"20px",zIndex:1},style:{animationDirection:l?"normal":"reverse",marginLeft:l?0:"8px",opacity:+!l}},"".concat(t))}let rj=(0,u.Ay)(eN.A)(e=>{let{theme:t}=e;return{userSelect:"none",position:"relative",zIndex:5,bottom:"100px",overflow:"visible",display:"flex",flexDirection:"row",alignItems:"end",height:"45px",boxShadow:t.shadows[3],"& .drag":{transition:"transform 100ms linear",transformOrigin:"50% 100%",position:"relative","& .dots":{position:"absolute",top:22,right:15,zIndex:11,opacity:0,transition:"opacity 100ms linear"},"&:hover":{transform:"scale(1.1)","& .dots":{opacity:1}}},transition:"opacity 250ms linear, border-radius 500ms linear",paddingLeft:t.spacing(2),paddingRight:t.spacing(2)}});function rv(){let{onDisplayInfo:e,onToolbarVisible:t,canvasEnable:n}=(0,c.P)(),l=(0,eh.A)(),[i,o]=(0,a.useState)({x:0,y:0}),[s,u]=(0,a.useState)(!0),[x,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!0),f=(0,a.useRef)({mouseX:0,mouseY:0,x:0,y:0}),g=(0,a.useRef)(!1);(0,a.useEffect)(()=>{let r=e=>{if(!g.current)return;let t=e.clientX-f.current.mouseX,n=e.clientY-f.current.mouseY;o({x:f.current.x+t,y:f.current.y+n})},l=()=>{n(!0),g.current&&(g.current=!1)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",l);let i=e(async e=>{let{info:t}=e;t.onPassThru||o({x:0,y:0}),p(t.passThru)}),s=t(async e=>{let{visible:t}=e;h(t)});return()=>{i(),s(),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l)}},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>u(m),250);return()=>clearTimeout(e)},[m]);let j=m&&!x;return(0,r.jsxs)(rj,{onMouseDown:e=>{e.target.closest(".drag")&&(n(!1),g.current=!0,f.current={mouseX:e.clientX,mouseY:e.clientY,x:i.x,y:i.y})},style:{transform:"translate(".concat(i.x,"px, ").concat(i.y,"px)"),opacity:m?x?.5:1:0,...s?{}:{pointerEvents:"none"},...j?{}:{borderRadius:"25px"}},children:[(0,r.jsx)(d.A,{className:x?null:"drag",children:(0,r.jsx)(e8.A,{delay:50,size:70,grey:x,animate:!0},l.palette.mode)}),(0,r.jsxs)(d.A,{sx:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(nW,{}),(0,r.jsx)(nG,{}),(0,r.jsx)(rx,{}),(0,r.jsx)(rg,{}),(0,r.jsxs)(tg,{children:[(0,r.jsx)(no,{}),(0,r.jsx)(n8,{}),(0,r.jsx)(rc,{}),(0,r.jsx)(nB,{}),(0,r.jsx)(re,{}),(0,r.jsx)(rm,{}),(0,r.jsx)(np,{}),(0,r.jsx)(nI,{})]}),(0,r.jsx)(rg,{}),(0,r.jsx)(nf,{}),(0,r.jsx)(nz,{}),(0,r.jsx)(rs,{}),(0,r.jsx)(rg,{}),(0,r.jsx)(nK,{})]})]})}let rA=(0,u.Ay)(d.A)(e=>{let{theme:t}=e;return{display:"flex",width:"100vw",height:"100vh",flexDirection:"column",position:"relative",justifyContent:"end",alignItems:"center"}}),ry=()=>(!function(){let{getDeviceInfo:e,getToolbarVisible:t,historyUndo:n,historyRedo:r,historyClear:l,webcamGetConfigId:u,webcamSetConfigId:d}=(0,c.P)(),{settings:x,getWebcamValue:p}=(0,s.t)(),{i18n:m}=(0,i.B)(),h=(0,a.useRef)(null),f=e=>e===u()?void d(null):p(e,"id")?void d(e):void o.o.error(m.t("No webcam selected for configuration #{{configId}}",{configId:e})),g={F1:()=>f(1),F2:()=>f(2),F3:()=>f(3),F4:()=>f(4),"CommandOrControl+,":()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.setToolbar(!t())},"CommandOrControl+Z":()=>n(),"CommandOrControl+Y":()=>r(),"CommandOrControl+Shift+Z":()=>r(),"CommandOrControl+N":()=>l(),"CommandOrControl+Q":()=>{var e;return null==(e=window.sdk)?void 0:e.ipc.main.quit()}};(0,a.useEffect)(()=>{let t=t=>{if(!t.isTrusted)return;let n=[];("macos"===e().os?t.metaKey:t.ctrlKey)&&n.push("CommandOrControl"),t.altKey&&n.push("Alt"),t.shiftKey&&n.push("Shift"),["Command","Control","Alt","Shift"].includes(t.key)||n.push(1==="".concat(t.key).length?"".concat(t.key).toUpperCase():t.key);let r=n.join("+");r!==h.current&&(h.current=r,"function"==typeof g[r]&&(g[r](),h.current=null))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[x])}(),(0,r.jsxs)(rA,{children:[(0,r.jsx)(K,{}),(0,r.jsx)(f,{}),(0,r.jsx)(tc,{}),(0,r.jsx)(rv,{})]}));var rb=n(72568);let rw=()=>(0,l.A)().user?(0,r.jsx)(ry,{}):(0,r.jsx)(rb.A,{});rw.guestGuard=!0;let rS=rw}},e=>{e.O(0,[444,167,636,593,792],()=>e(e.s=42936)),_N_E=e.O()}]);